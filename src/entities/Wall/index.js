import { Node } from "@lib"
import Texture from "@lib/entities/Texture"
import blockImgUrl from "@assets/images/block.png"

const asciiTilemap0 = 
`
                                                    
                                             
                                             
                                             
        =      ==============                     
        =      =#############
        ========#############
`
const asciiTilemap = 
`
                              =##############=                       
                              =##############========                
=                             =#####################=                
=                             =###############=======                
=========      ================###############=                      
########=      =##############################=======================
########========#####################################################
`
const asciiTilemap1 = 
`
                              ================                          =======================================================================================                          ==============
                              =##############=                          =#####################################################################################=                          =#############
                              =##############========                   =#####################################################################################=                          =#############
=                             =#####################=                   =#####################################################################################=                          =#############
=                             =###############=======                   =#####################################################################################============================#############
=========      ================###############=                         =##############################################################################################################################
########=      =##############################===========================##############################################################################################################################
########========#######################################################################################################################################################################################
`

const asciiTilemap2 = 
`
                              ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                                                 ================                                                                                                                                                                   
                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============                              =##############=                          ====================================                          ===================================                          ==============
                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############                              =##############=                          =###################=##############=                          =##################################                          =#############
                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############                              =##############========                   =###################=##############========                   =##################################                          =#############
=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############=                             =#####################=                   =###################=#####################=                   =##################################                          =#############
=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############=                             =###############=======                   =###################=###############=======                   =##################################===========================#############
=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################=========      ================###############=                         =###################=###############=                         =##########################################################################
########=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##################################################################################=      =##############################===========================###################################===========================##########################################################################
########========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#########################################################################################################################################################################################################========#################################################################################################################################################################################################
`

class Wall extends Node {
    constructor({ img, crestID, gridWidth = 20, blockWidth = 30, blockHeight = 30, ...nodeProps} = {}) {
        super({ ...nodeProps })
        const tilemap = asciiTilemap0.split("\n")
        console.log(tilemap[1].length)
        this.width = tilemap[1].length * blockWidth
        this.height = tilemap.length * blockHeight
        this.slategreyBlocks = new Node({ id: crestID })
        this.greyBlocks = new Node()
        this.add(this.slategreyBlocks)
            .add(this.greyBlocks)

        this.pos.y = 0
        for (let row = 0; row < tilemap.length; row++) {
            const rowCells = tilemap[row].split("")
            for (let col = 0; col < rowCells.length; col++) {
                const cell = rowCells[col]
                if (cell !== " ") {
                    const pos = {
                        x: col * blockWidth,
                        y: row * blockHeight
                    }
                    const block = new Texture({
                        pos,
                        url: blockImgUrl,
                        // fill: cell === "#" ? "dimgrey": cell === "=" ? "slategrey": "",
                        // stroke: "darkslategrey"
                    })
                    block.width = blockWidth
                    block.height = blockHeight
                    block.debug = false
                    // if (col > 20) block.invisible = true
                    if (cell === "=") {
                        this.slategreyBlocks.add(block)
                    } else {
                        this.slategreyBlocks.add(block)
                    }
                }
            }
        }
    }
}

export default Wall