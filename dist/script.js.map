{"version":3,"sources":["webpack://neutrino/./lib/entities/Camera.js","webpack://neutrino/./lib/entities/Node.js","webpack://neutrino/./lib/entities/Rect.js","webpack://neutrino/./lib/entities/TexRegion.js","webpack://neutrino/./lib/entities/Texture.js","webpack://neutrino/./lib/entities/Circle.js","webpack://neutrino/./lib/entities/Text.js","webpack://neutrino/./lib/entities/IsoCube.js","webpack://neutrino/./lib/entities/types.js","webpack://neutrino/./lib/utils/Observable.js","webpack://neutrino/./lib/utils/entity/index.js","webpack://neutrino/./lib/utils/math/index.js","webpack://neutrino/./node_modules/css-loader/dist/runtime/api.js","webpack://neutrino/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://neutrino/./lib/utils/ViewPort.js","webpack://neutrino/./src/config/create.js","webpack://neutrino/./src/config/dev/index.js","webpack://neutrino/./src/helpers/storage/strategies/LocStorage.js","webpack://neutrino/./src/entities/Player/style.css","webpack://neutrino/./src/screens/Game/initUI/style.css","webpack://neutrino/./src/screens/Level/style.css","webpack://neutrino/./src/screens/Loading/style.css","webpack://neutrino/./src/screens/ui/style.css","webpack://neutrino/./src/assets/audio/sprite.cson","webpack://neutrino/./src/assets/audio/sprite.mp3","webpack://neutrino/./src/assets/images/atlasmeta.cson","webpack://neutrino/./src/assets/images/background.png","webpack://neutrino/./src/assets/images/texatlas.png","webpack://neutrino/./src/assets/images/ui/arrow.png","webpack://neutrino/./src/assets/images/ui/cross.png","webpack://neutrino/./src/assets/images/ui/orb.png","webpack://neutrino/./src/assets/images/ui/pause.png","webpack://neutrino/./src/assets/images/ui/reset.png","webpack://neutrino/./src/assets/images/ui/resume.png","webpack://neutrino/./src/assets/images/ui/rva.png","webpack://neutrino/./src/assets/images/ui/sound_off.png","webpack://neutrino/./src/assets/images/ui/sound_on.png","webpack://neutrino/./src/assets/levels/background.cson","webpack://neutrino/./src/assets/levels/level1.cson","webpack://neutrino/./src/assets/levels/level10.cson","webpack://neutrino/./src/assets/levels/level2.cson","webpack://neutrino/./src/assets/levels/level3.cson","webpack://neutrino/./src/assets/levels/level4.cson","webpack://neutrino/./src/assets/levels/level5.cson","webpack://neutrino/./src/assets/levels/level6.cson","webpack://neutrino/./src/assets/levels/level7.cson","webpack://neutrino/./src/assets/levels/level8.cson","webpack://neutrino/./src/assets/levels/level9.cson","webpack://neutrino/./src/assets/particles/all.cson","webpack://neutrino/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://neutrino/webpack/bootstrap","webpack://neutrino/webpack/runtime/compat get default export","webpack://neutrino/webpack/runtime/define property getters","webpack://neutrino/webpack/runtime/global","webpack://neutrino/webpack/runtime/hasOwnProperty shorthand","webpack://neutrino/webpack/runtime/make namespace object","webpack://neutrino/webpack/runtime/publicPath","webpack://neutrino/./lib/utils/Game/startGameLoop.js","webpack://neutrino/./lib/constants.js","webpack://neutrino/./lib/utils/Sound/index.js","webpack://neutrino/./lib/utils/Sound/APIs/WebAudio.js","webpack://neutrino/./lib/utils/Sound/APIs/NoAudio.js","webpack://neutrino/./lib/utils/Game/index.js","webpack://neutrino/./lib/utils/UI.js","webpack://neutrino/./lib/renderer/apis.js","webpack://neutrino/./lib/renderer/Canvas2D.js","webpack://neutrino/./lib/renderer/Webgl2/utils/createShader.js","webpack://neutrino/./node_modules/gl-matrix/esm/common.js","webpack://neutrino/./node_modules/gl-matrix/esm/vec2.js","webpack://neutrino/./lib/renderer/Webgl2/utils/Matrix.js","webpack://neutrino/./node_modules/gl-matrix/esm/mat3.js","webpack://neutrino/./lib/renderer/Webgl2/index.js","webpack://neutrino/./lib/renderer/Webgl2/createMatStackMixin.js","webpack://neutrino/./lib/renderer/Webgl2/utils/getContext.js","webpack://neutrino/./lib/renderer/Webgl2/utils/createProgram.js","webpack://neutrino/./lib/renderer/Webgl2/shaders/vertexShader.js","webpack://neutrino/./lib/renderer/Webgl2/shaders/fragmentShader.js","webpack://neutrino/./lib/utils/AssetsCache/loadResource.js","webpack://neutrino/./lib/utils/AssetsCache/index.js","webpack://neutrino/./src/helpers/Storage/index.js","webpack://neutrino/./src/helpers/SDK/index.js","webpack://neutrino/./src/config/levels.js","webpack://neutrino/./src/screens/names.js","webpack://neutrino/./src/screens/Loading/style.css?ee4f","webpack://neutrino/./src/screens/Loading/initUI.js","webpack://neutrino/./src/screens/Loading/index.js","webpack://neutrino/./src/screens/MainMenu/Title.js","webpack://neutrino/./src/screens/ui/style.css?9950","webpack://neutrino/./src/screens/ui/btn.js","webpack://neutrino/./src/screens/MainMenu/initUI.js","webpack://neutrino/./src/screens/MainMenu/index.js","webpack://neutrino/./lib/entities/ParallaxCamera.js","webpack://neutrino/./lib/utils/Sound/SoundPool.js","webpack://neutrino/./lib/utils/Sound/SoundGroup.js","webpack://neutrino/./lib/utils/Sound/SoundSprite.js","webpack://neutrino/./lib/components/Movement.js","webpack://neutrino/./lib/utils/ParticleEmitter.js","webpack://neutrino/./src/screens/Game/State.js","webpack://neutrino/./src/screens/ui/imgBtn.js","webpack://neutrino/./src/screens/Game/initUI/style.css?5847","webpack://neutrino/./src/screens/Game/initUI/index.js","webpack://neutrino/./src/screens/Game/initUI/soundImgBtn.js","webpack://neutrino/./lib/utils/TiledLevel.js","webpack://neutrino/./src/screens/Game/Level.js","webpack://neutrino/./lib/utils/entity/detectShape.js","webpack://neutrino/./lib/components/Collision/helpers/getTestFn.js","webpack://neutrino/./src/entities/Orb.js","webpack://neutrino/./src/entities/Gate.js","webpack://neutrino/./src/entities/Wind.js","webpack://neutrino/./src/entities/Magnet.js","webpack://neutrino/./lib/utils/Timer.js","webpack://neutrino/./src/entities/Ball.js","webpack://neutrino/./lib/utils/functions.js","webpack://neutrino/./src/entities/MovableEnt.js","webpack://neutrino/./src/entities/SawBlade.js","webpack://neutrino/./src/entities/Laser.js","webpack://neutrino/./src/entities/Fire.js","webpack://neutrino/./src/entities/Crate.js","webpack://neutrino/./lib/utils/Pool.js","webpack://neutrino/./src/entities/Bus.js","webpack://neutrino/./src/screens/Game/makeFactories.js","webpack://neutrino/./lib/components/Collision/helpers/resolvers/aabb.js","webpack://neutrino/./lib/components/Collision/helpers/resolvers/circAabb.js","webpack://neutrino/./lib/components/Collision/index.js","webpack://neutrino/./lib/components/Collision/helpers/getUpdateHandler.js","webpack://neutrino/./lib/components/Collision/helpers/getResolver.js","webpack://neutrino/./lib/components/controls/KeyControls.js","webpack://neutrino/./lib/components/controls/TouchControls.js","webpack://neutrino/./src/entities/Player/PlayerControls.js","webpack://neutrino/./src/entities/Player/style.css?8ff7","webpack://neutrino/./src/entities/Player/index.js","webpack://neutrino/./src/screens/Game/Checkpoint.js","webpack://neutrino/./src/screens/Game/index.js","webpack://neutrino/./src/screens/Level/style.css?ba67","webpack://neutrino/./src/screens/Level/initUI.js","webpack://neutrino/./src/screens/ui/loadingDot.js","webpack://neutrino/./src/screens/Level/index.js","webpack://neutrino/./src/index.js","webpack://neutrino/./lib/renderer/create.js"],"names":["subject","viewport","world","z","nodeProps","pF","bounds","x","y","width","height","onViewportChange","config","focusInst","setSubject","on","focus","node","this","hitbox","aabb","rectBounds","offset","calcCenter","pos","clamp","dt","destX","destY","off","Node","rotation","scale","anchor","pivot","id","alpha","_visible","Boolean","addRef","__entities","onRemove","removeRef","children","childNode","cleanupRecursively","t","rootNode","movable","prevPosX","prevPosY","unduePosXUpdate","roll","prevRot","intersects","forceUpdate","update","cachedChildren","i","len","length","updateRecursively","parentNode","cleanup","filter","n","parent","push","removeChild","fill","stroke","strokeWidth","type","rect","TexRegion","frame","isCustom","meta","_meta","hitCirc","undefined","texregion","initialRotation","Math","PI","w","h","initialPivotX","val","Texture","imgId","img","_assetsCache","get","Error","texture","radius","circle","color","size","value","frontColor","topColor","sideColor","isocube","events","props","reduce","event","Object","assign","callback","once","cb","params","subscribers","forEach","lastAccessedIdx","coords","getReusableBounds","map","getReusableCoords","getReusableCirc","entity","hitcirc","sc","c","e","calcAligned","mX","mY","calcStacked","e1","e2","dir","calcComposite","entities","ent","rEdgX","max","bEdgY","min","combine","a","b","globalPos","getGlobalPos","getHitbox","circBounds","setLocalPosX","globalPosX","localPosX","setLocalPosY","globalPosY","localPosY","getWidth","getHeight","compositeDims","fChild","initialBounds","minX","minY","maxX","maxY","acc","child","rand","to","from","floor","random","randf","pickOne","array","num","sign","abs","stripFloat","place","sqLen","easingFns","linear","quadIn","quadOut","cubicIn","cubicOut","smoothStep","fixedAabb","b1","b2","circCirc","radiiSum","xDist","yDist","aabbCirc","closestDistX","closestDistY","sqClosestDist","round","atan","hexRegexes","short","RegExp","long","hexToNorm","hexString","regexKey","regex","replace","match","hex","parseInt","concat","hexToArray","module","exports","cssWithMappingToString","list","toString","item","content","join","modules","mediaQuery","dedupe","alreadyImportedModules","_i","_arrayLikeToArray","arr","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","err","_iterableToArrayLimit","o","minLen","prototype","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","computeViewport","window","addEventListener","newDimensions","emit","Observable","desktopRes","isMobile","navigator","userAgent","defaultConfig","Viewport","innerWidth","innerHeight","portraitMode","maxWidth","maxHeight","storageId","worldWidth","worldHeight","gravity","devicePixelRatio","orientation","overrides","SDKStrat","StorageStrat","key","localStorage","getItem","setItem","showAdOnRestart","showAdOnResume","prerollAd","___CSS_LOADER_EXPORT___","locals","memo","getTarget","target","styleTarget","document","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","setAttribute","insert","appendChild","textStore","replaceText","replacement","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","styleIndex","bind","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","prop","hasOwnProperty","r","toStringTag","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","p","mainUpdateFn","renderer","step","STEP","fps","RENDER_INTERVAL","UPDATE_INTERVAL","UPDATE_INTERVAL_SECS","lastUpdated","lastRendered","speed","paused","requestAnimationFrame","loop","ts","dtRen","tsInSecs","scene","renderRecursively","pause","resume","setSpeed","elapsed","colRectsId","offLeftThreshold","offRightThreshold","objLayerId","offlineErrMsg","webAudioSupported","AudioContext","ctx","Sound","buffer","volume","pan","panNode","createStereoPanner","volumeNode","createGain","gain","_speed","_loop","playedFrom","playTill","duration","lastPlayedAt","playing","onEnded","onCreated","_on","soundObj","onDestroyed","timeSinceLastPlayed","currentTime","newOffset","_stop","resFrom","_play","_duration","sourceNode","stop","createBufferSource","startSourceNode","startTime","loopStart","loopEnd","start","playbackRate","connect","destination","onended","setValueAtTime","Promise","resolve","reject","fetch","then","res","arrayBuffer","decodeAudioData","audioBuffer","message","createWebAudioClass","assetsCache","screenFactories","activeScreen","screenName","createScreen","_sounds","s","switchScreen","_activeScreen","onExit","background","changeBackground","onEnter","screen","loopControls","startGameLoop","sound","pausedSounds","stopSounds","pauseSounds","domNode","query","root","getBoundingClientRect","q","UI","el","opacity","removeEventListener","classList","left","top","html","innerHTML","CNV_2D","WEBGL","cnvQry","canvas","getContext","resize","newBackground","translate","smooth","rotate","types","drawImage","fillStyle","fillRect","strokeStyle","lineWidth","strokeRect","clearRect","save","globalAlpha","blendMode","globalCompositeOperation","render","debug","Rect","restore","gl","shaderSrc","shaderType","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","ARRAY_TYPE","Float32Array","create","out","glMatrix","set","hypot","arguments","sqrt","IMatrix","tMat","sMat","rMat","mat","identity","rad","sin","cos","iMat","temp","vec","vec2","a00","a01","a02","a10","a11","a12","a20","a21","a22","mat3","v","mixin","image","clearColor","cnvSelector","program","initProgram","initBuffers","initUniforms","matrixUtil","MatrixUtil","setupGlSettings","initViewport","mStack","curMatIdx","curMat","firstMat","getCurMat","prev","vertShader","fragShader","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","VERTEX_SHADER","FRAGMENT_SHADER","useProgram","vao","createVertexArray","bindVertexArray","posBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","aVertPos","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","uMat","getUniformLocation","uTexMat","uOverlay","uOverlayCol","uTint","uGTint","uAlpha","enable","BLEND","setDefaultSettings","overlay","gTint","defTint","defBlend","createTexture","uTexUnit","activeTexture","TEXTURE0","uniform1i","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","generateMipmap","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","bgColor","imageUrl","absWidth","absHeight","srcX","srcY","texMatFrame","texMat","uniformMatrix3fv","drawArrays","TRIANGLES","setAlphaAndBlendMode","resetAlphaAndBlendMode","tint","uniform1f","uniform4fv","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","uniform3fv","loadSoundResource","loadResource","freeze","SOUND","IMAGE","DATA","loadFns","url","Image","onload","onerror","json","assets","thenable","loadPrevResources","asset","inferType","load","resource","msg","assetUrl","castToNum","errParam","Number","strat","txtData","parse","curLevel","orbCount","hiscores","music","setNum","level","time","String","strategy","Date","now","rva","setLoadProg","signalLoad","adLastPlayedAt","playRva","periodBetweenAds","canPlay","console","log","playIntstAd","fn","setOnPause","setOnResume","level1","level2","bgPos","level3","level4","level5","level6","level7","level8","level9","level10","LOADING","MAIN_MENU","LEVEL","GAME","progBarDims","INFO","PROG_BAR","PROG_IND","uiRoot","infoId","msgId","barId","indId","styles","progressBar","progBar","progInd","info","realign","teardown","onProg","onError","onLoad","game","sdk","initUI","switchToMainMenu","disposeScreen","logo","rock1","rock2","ball","add","BTN_ID","gameTitle","Title","vp","teardownUI","onPlay","btn","playBtn","proceed","entYOffset","tiles","rest","prevPos","baselineToBtmBounds","baseline","maxFy","bl","blOffset","tile","tileCopy","_layoutTiles","setWorld","_tiles","Camera","instances","freeInstance","findFree","play","newInstance","instance","mutations","accessIdx","mutation","resourceID","opts","newSound","newPool","SoundPool","frames","poolSize","createPool","SoundGroup","Movement","velX","velY","accX","accY","fricX","fricY","block","offCorner","entBounds","blockBounds","blockCornerX","offEdge","normX","normY","tanX","tanY","a0","dA","a1","backOnTop","readyToFall","cond1","dx","dy","Particle","metaId","lifetime","alphaDecayFn","rotVel","velX0","velY0","alpha0","pos0","_reset","paramIndices","randomDistribution","distribution","param","weight","sumOfWeights","prevTotal","prevIndices","deserializedParam","offsetX","offsetY","onDead","emitter","j","k","l","is","curTime","bestTime","class_","margin","PAUSE","RESUME","ORB_AV","TIMER","ORB_IND","ORB_EXP","ORB_EXP_IND","CROSS","RESET","OVERLAY","BLUR_OVERLAY","CUR_TIME_IND","CUR_TIME","BEST_TIME_IND","BEST_TIME","CONTINUE","player","images","storage","gameState","onClose","resetLevel","getCheckpoint","btnSound","errSound","contSound","sdkInst","orbAv","imgBtn","orb","reset","cross","getOrbCount","ctrlBtns","getCtrlBtns","orbInd","orbExp","orbExpInd","rvaTxt","pauseBtn","resumeBtn","restartBtn","crossBtn","timer","blurOverlay","soundBtn","getterKey","setterKey","onImg","offImg","title","domImgBtn","musicOn","soundImgBtn","soundOn","soundOff","right","axn","changeOrbCount","hideCtrlBtns","hide","alginCtrlBtns","show","onPause","onOver","checkpoint","rvaSupported","checkpointExists","orbs","showRva","showCost","execOver","onComplete","resumeImg","toFixed","renderResult","curTimeInd","curTimeVal","bestTimeInd","bestTimeVal","continueBtn","onDone","playingAd","_val","setVal","display","getVal","restorePlayer","point","restart","restartPlay","canAfford","watchRva","payOrbs","setOrbCount","continuePlay","onBlur","onFocus","onKeyDown","updateTimer","secs","ds","pad","factories","colRects","objNode","mgObjNode","fgObjNode","objNodeMap","mg","fg","getGroup","newG","addTiles","layer","groupId","factory","region","collisionRects","colRect","mgTiles","spawnPoints","fgTiles","resetRecursively","bg","fbg","levelDataId","uiImages","onStateChange","cameraProps","arena","TiledLevel","shapes","RECT","CIRC","PLANK","shape","testCircCirc","e1Bounds","e2Bounds","testCircAabb","circ","testAabbCirc","e1Shape","detectShape","e2Shape","fixed","rigid","getAabbTestFn","testCol","getTestFn","active","dPosX","dPosY","chasing","visible","ParticleEmitter","endY","uSound","dSound","startY","initDir","dist","period","dp","newPosY","startToEndDir","dPX","dPY","Y","updatePos","explode","amp","swirlOffset","WindParticle","norm","feed","iterations","sqDist","controls","switchState","vel","tintVal","onTick","delay","invisible","Timer","Ball","seq","makeFlashMixin","seqs","seqIdx","initiated","dead","nextSeq","nt","jumpTo","velSign","rollTo","updateFlash","checkSeq","require","toX","toY","fromX","fromY","clampX0","clampX1","clampY0","clampY1","newPosX","ANG_VEL","dRot","MovableEnt","hheight","bLen","vert","sounds","bFrame","xOffset","yOffset","xStep","yStep","startX","body","supProps","onTouch","_player","initFrame","dmgToFrame","dmgFacs","orbPool","luck","dmg","setDamage","damage","vy","crack","particle","snap","free","lastIdx","dispY","distX","meanX","meanY","oneOff","resolveX","movementX","hb","resolveY","movementY","hc","nearestBlockYFromEntCenter","offedge","relMovX","normalizedNetMovement","nearestBlockXFromEntCenter","relMovY","falling","offWhichEdge","angle","blocks","onHit","oneToOne","evaluateUpdateFn","sampleBlock","testFn","collision","resolver","entityShape","blockShape","aabbResolver","circAabbResolver","getResolver","onFall","getUpdateHandler","resolveFn","checkFalsePositive","yUndoneBy","updateFn","getKeyCode","keyCode","which","mappings","keyAlias","pressed","held","keysArr","values","keysLen","resetAll","attrib","find","code","btns","btnAlias","m","btnsArr","btnsLen","extendPalyerControls","S","onJump","states","OffEdge","jumping","Jumping","rolling","Rolling","state","limitReached","stateSwitched","limReached","mxJmpVel","jmpVel","first","minJmpVel","maxJvelInc","PlayerKeyControls","KeyControls","PlayerTouchControls","TouchControls","PlayerControlsClass","getControlsMapping","arrowImgId","resumeImgId","Player","shard","cinder","fricX0","jump","wallCollision","Collision","onWallCol","spikeCollision","magnetCollision","onMagnetCol","crateCollision","onCrateCol","moved","colSpeed","onHalt","metal","takeDamage","over","player_exp","player_din","updateOffEdge","_offEdge","checkpoints","sort","findLast","State","turnOnSound","turnOffSound","soundSprite","SoundSprite","soundSpriteId","resourceId","soundMetaId","particles","particlesUrl","playerSounds","spritemap","gateUSound","gateDSound","orbSound","endSound","lasSounds","particlesId","createOrbPool","Pool","Orb","tempOrbPool","windPool","Wind","wind","fire","Fire","getHiscore","getCurLevel","levels","setCurLevel","setHiscore","complete","crateDmgFacs","up","crateUp","down","crateDown","wSounds","slide","NaN","gate","Gate","colSound","_","magnet","Magnet","sb1","SawBlade","sb2","sb3","sb4","sb5","sb6","lcr1","Crate","vlhd","Laser","hlhd","bus","Bus","makeFactories","api","rendApis","bgData","bgDataId","ParallaxCamera","zAtop","crossImgId","pauseImgId","orbImgId","resetImgId","soundOnImgId","soundOffImgId","rvaImgId","Level","mob_bg","moonImg","backgroundPosition","split","pxbg","layoutTiles","levelIdx","setLevel","Checkpoint","idx","advance","unsetLevel","halt","updateX","PREV","NEXT","START","LOCK","RETRY","paddingX","iconDims","lock","renderBest","onStart","maxLevel","chSound","syncColor","levelState","loading","arrow","prevBtn","nextBtn","startBtn","levelInfo","lockInd","realignTxt","tWidth","tHeight","sWidth","sHeight","updateBtnVis","onPrevBtnClick","best","onNextBtnClick","loadAndStart","levelId","loadingInd","unload","errMsg","retryIcon","onStartBtnClick","levelColors","container","atlasMeta","atlasmetaId","realignBg","aligned","fromMenu","Webgl2Renderer","Canvas2dRenderer","createRenderer","AssetsCache","Storage","backgroundTiles","soundMeta","texatlasId","SDK","screenNames","LoadingScreen","MainMenuScreen","GameScreen","LevelScreen","Game","getSound","atlasmeta","texatlas","setTexatlas"],"mappings":"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","file":"script.js","sourcesContent":["import { Node } from \"@lib\"\r\nimport { clamp, aabb } from \"@utils/math\"\r\nimport { calcCenter, rectBounds } from \"@utils/entity\"\r\nimport config from \"@config\"\r\n\r\nconst focSpeed = 12\r\nclass Camera extends Node {\r\n    constructor({ subject, viewport, world, z = 1, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        this.z = z // camera depth factor (z-index)\r\n        this.pF = 1 / z // parallax factor is the multiplicative inverse of z-index\r\n        this.bounds = {\r\n            x: 0,\r\n            y: 0,\r\n            width: viewport.width,\r\n            height: viewport.height,\r\n        }\r\n        this.world = world || { width: viewport.width, height: viewport.height }\r\n        this.onViewportChange = viewport => {\r\n            this.bounds.width = viewport.width *  config.devicePixelRatio\r\n            this.bounds.height = viewport.height *  config.devicePixelRatio\r\n            this.focusInst()\r\n        }\r\n        this.viewport = viewport\r\n        this.setSubject(subject)\r\n        viewport.on(\"change\", this.onViewportChange)\r\n        this.onViewportChange(viewport)\r\n        this.focus()\r\n    }\r\n    intersects(node) {\r\n        // if the node is either the root or just a container (meaning it doesn't have explicit bounds) return true\r\n        if (node === this || (!node.width && !node.height && !node.hitbox)) {\r\n            return true\r\n        }\r\n        const intersects = aabb(rectBounds(node), this.bounds)\r\n        return intersects\r\n    }\r\n    setSubject(subject) {\r\n        if (!subject) { return }\r\n        this.subject = subject\r\n        this.offset = calcCenter(subject)\r\n        this.focus()\r\n    }\r\n    focusInst() { // focus instantly\r\n        if (!this.subject) { return }\r\n\r\n        this.pos.x = this.pF * (-clamp(0, this.world.width - this.bounds.width, this.subject.pos.x + this.offset.x - this.bounds.width / 2))\r\n        this.pos.y = this.pF * (-clamp(0, this.world.height - this.bounds.height, this.subject.pos.y + this.offset.y - this.bounds.height / 2))\r\n    }\r\n    focus(dt) {\r\n        if (!this.subject) { return }\r\n        const destX = this.pF * (-clamp(0, this.world.width - this.bounds.width, this.subject.pos.x + this.offset.x - this.bounds.width / 2))\r\n        const destY = this.pF * (-clamp(0, this.world.height - this.bounds.height, this.subject.pos.y + this.offset.y - this.bounds.height / 2))\r\n\r\n        this.pos.x += (destX - this.pos.x) * focSpeed * dt\r\n        this.pos.y += (destY - this.pos.y) * focSpeed * dt\r\n    }\r\n    update(dt) {\r\n        this.focus(dt)\r\n    }\r\n    onRemove() {\r\n        this.viewport.off(this.onViewportChange)\r\n    }\r\n}\r\n\r\nexport default Camera","class Node {\r\n    static __entities = { }\r\n    static addRef(id, node) {\r\n        this.__entities[id] = node\r\n    }\r\n    static removeRef(id) { \r\n        this.__entities[id] = null\r\n    }\r\n    static get(id) {\r\n        return this.__entities[id]\r\n    }\r\n    static cleanupRecursively(node) {\r\n        if (node.onRemove) { node.onRemove() }\r\n        if (node.id) { this.removeRef(node.id) }\r\n        if (!node.children) { return }\r\n        for (let childNode of node.children) {\r\n            Node.cleanupRecursively(childNode)\r\n        }\r\n    }\r\n    static updateRecursively(node, dt, t, rootNode = node) {\r\n        if (node.movable) {\r\n            node.prevPosX = node.pos.x\r\n            node.prevPosY = node.pos.y\r\n            if (node.unduePosXUpdate) {\r\n                node.pos.x += node.unduePosXUpdate\r\n                node.unduePosXUpdate = 0\r\n            }\r\n            if (node.roll) {\r\n                node.prevRot = node.rotation\r\n            }\r\n        }\r\n        node._visible = node.alpha === 0 ? false: (rootNode.intersects ? rootNode.intersects(node): true)\r\n        ;(node._visible || node.forceUpdate) && node.update && node.update(dt, t)\r\n        if (!node.children) { return }\r\n        const cachedChildren = node.children\r\n        /**\r\n         * cached copy of node.children must be kept to ensure the code executes predictable\r\n         * in case we didn't do so, removal of a childNode (in it's update function) would break this recursion --\r\n         * when the children iteration reaches the removed childNode's last sibling\r\n         * that's because the new children array would have lastChildrenLength - 1 length, but the endpoint of the current iteration -- \r\n         * would still be lastChildrenLength. So trying access length index of the new children array would result in an undefined value\r\n         * Here's an interesting fact: this shrinking of children array results in the removed node's next sibling shifting an index backward,\r\n         * thus occupying the removed node's current position. The next iteration therefore skips over it.\r\n         */\r\n        for (let i = 0, len = cachedChildren.length; i < len; i++) {\r\n            Node.updateRecursively(cachedChildren[i], dt, t, rootNode)\r\n        }\r\n    }\r\n    static removeChild(parentNode, childNode, cleanup = true) {\r\n        if (!parentNode) { return }\r\n        parentNode.children = parentNode.children.filter(n => n !== childNode)\r\n        childNode.parent = null\r\n        if (cleanup) this.cleanupRecursively(childNode)\r\n    }\r\n    constructor({ pos = { x: 0, y: 0 }, rotation, scale,  anchor, pivot, id, alpha } = {}) {\r\n        this.pos = pos\r\n        this._visible = true\r\n        scale && (this.scale = scale)\r\n        rotation && (this.rotation = rotation)\r\n        anchor && (this.anchor = anchor)\r\n        pivot && (this.pivot = pivot)\r\n        alpha && (this.alpha = alpha)\r\n        if (Boolean(id)) {\r\n            this.id = id\r\n            Node.addRef(id, this)\r\n        }\r\n    }\r\n    add(childNode) { // presence or absense of children field indicates whether a node is a leaf node\r\n        childNode.parent = this\r\n        if (this.children) {\r\n            this.children.push(childNode)\r\n            return\r\n        }\r\n        this.children = [ childNode ]\r\n    }\r\n    remove(cleanup) {\r\n        Node.removeChild(this.parent, this, cleanup)\r\n    }\r\n}\r\n\r\nexport default Node","import Node from \"./Node\"\r\nimport { rect } from \"./types\"\r\n\r\nclass Rect extends Node {\r\n    constructor({ width, height, fill, stroke, strokeWidth, alpha, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        this.width = width\r\n        this.height = height\r\n        this.fill = fill\r\n        this.stroke = stroke\r\n        this.strokeWidth = strokeWidth\r\n        this.alpha = alpha\r\n        this.type = rect\r\n    }\r\n}\r\n\r\nexport default Rect","import Node from \"./Node\"\r\nimport { texregion } from \"./types\"\r\n\r\nclass TexRegion extends Node {\r\n    static _assetsCache = null\r\n    static injectAtlasmeta(val) {\r\n        this._meta = val\r\n    }\r\n    constructor({ frame, isCustom=false, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        const meta = TexRegion._meta[frame]\r\n        // if (!this.img) {\r\n        //     throw new Error(`Image with imgId ${imgId} can't be found in the assets cache`)\r\n        // }\r\n        if (!!meta.hitbox) {\r\n            this.hitbox = meta.hitbox\r\n        }\r\n        this.hitCirc = meta.hitCirc ?? undefined\r\n        this.type = texregion\r\n        this.initialRotation = meta.rotation ? -meta.rotation * Math.PI / 180 : null\r\n        this.width =  meta.width\r\n        this.height = meta.height\r\n        this.w = this.initialRotation ? this.height: this.width // width on the atlas\r\n        this.h = this.initialRotation ? this.width: this.height // height on the atlas\r\n        this.frame = isCustom ? [ meta.x, meta.y, this.w, this.h ]: frame\r\n        if (this.initialRotation) { \r\n            this.initialPivotX = -this.height \r\n        }\r\n    }\r\n    setAnchor(val) {\r\n        this.anchor = this.initialRotation ? { x: val.y, y: val.x }: val\r\n    }\r\n}\r\n\r\n// export const createAtlas = ({ metaId, imgId }) => ({\r\n//     createRegion: (params={}) => new TexRegion({ metaId, imgId, ...params })\r\n// })\r\n\r\nexport default TexRegion","import Node from \"./Node\"\r\nimport { texture } from \"./types\"\r\n\r\nexport default class Texture extends Node {\r\n    static _assetsCache = null\r\n    static injectAssetsCache(val) {\r\n        this._assetsCache = val\r\n    }\r\n    constructor({ imgId, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        this.img = Texture._assetsCache.get(imgId)\r\n        if (!this.img) {\r\n            throw new Error(`Image with imgId ${imgId} can't be found in the assets cache`)\r\n        }\r\n        this.type = texture\r\n    }\r\n}","import Node from \"./Node\"\r\nimport { circle } from \"./types\"\r\n\r\nclass Circle extends Node {\r\n    constructor({ radius=30, fill, stroke=\"red\", ...nodeProps} = {}) {\r\n        super({ ...nodeProps })\r\n        this.radius = radius\r\n        this.fill = fill\r\n        this.stroke = stroke\r\n        this.type = circle\r\n    }\r\n}\r\n\r\nexport default Circle","import Node from \"./Node\"\r\nimport { text } from \"./types\"\r\n\r\nclass Text extends Node {\r\n    constructor({ color = \"white\", size = \"20pt\", value = \"Null Text\", ...nodeProps } = {}) {\r\n        super({ ...nodeProps })\r\n        this.color = color\r\n        this.size = size\r\n    }\r\n}\r\n\r\nexport default Text","import Node from \"./Node\"\r\nimport { isocube } from \"./types\"\r\n\r\nclass IsoCube extends Node {\r\n    constructor({ length=20, width=40, frontColor=\"dimgrey\", topColor=\"#B97A57\", sideColor=\"#880015\", ...nodeProps } = {}) {\r\n        super({ ...nodeProps })\r\n        this.length = length\r\n        this.width = width\r\n        this.frontColor = frontColor\r\n        this.topColor = topColor\r\n        this.sideColor = sideColor\r\n        this.type = isocube\r\n        this.hitbox = {\r\n            x: length/2,\r\n            y: -length / 2,\r\n            width: width,\r\n            height: width\r\n        }\r\n    }\r\n}\r\n\r\nexport default IsoCube","export const texture = \"TEXTURE\"\r\nexport const texregion = \"TEXREGION\"\r\nexport const text = \"TEXT\"\r\nexport const rect = \"RECT\"\r\nexport const sprite = \"SPRITE\"\r\nexport const tilemap = \"TILEMAP\"\r\nexport const parallax = \"PARRALLAX\"\r\nexport const isocube = \"ISOCUBE\"\r\nexport const circle = \"CIRCLE\"","class Observable {\r\n    constructor(events = [], props = {}) {\r\n        this.events = events.reduce((events, event) => {\r\n            events[event] = []\r\n            return events\r\n        }, {})\r\n        Object.assign(this, props)\r\n    }\r\n    on(event, callback) {\r\n        if (!this.events[event]) {\r\n            throw new Error(`attempting to listen to an unknown event: \"${event}\"`)\r\n        }\r\n        this.events[event].push(callback)\r\n    }\r\n    once(event, callback) {\r\n        callback.once = true\r\n        this.on(event, callback)\r\n    }\r\n    off(event, callback) {\r\n        if (!callback) {\r\n            return this.events[event] = []\r\n        }\r\n        this.events[event] = this.events[event].filter(cb => cb !== callback)\r\n    }\r\n    emit(event, ...params) {\r\n        const subscribers = [...this.events[event]]\r\n        subscribers.forEach(callback => {\r\n            callback(...params)\r\n            if (callback.once) {\r\n                this.off(event, callback)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default Observable","export { default as detectShape, shapes } from \"./detectShape\" \r\n\r\nexport const  getReusableBounds = (() => {\r\n    const bounds = [0, 0].map(() => ({ x: 0, y: 0, width: 0, height: 0 }))\r\n    let lastAccessedIdx = 0\r\n    return (x, y, width, height) => {\r\n        lastAccessedIdx = lastAccessedIdx === 0 ? 1: 0\r\n        bounds[lastAccessedIdx].x = x\r\n        bounds[lastAccessedIdx].y = y\r\n        bounds[lastAccessedIdx].width = width\r\n        bounds[lastAccessedIdx].height = height\r\n        return bounds[lastAccessedIdx]\r\n    }\r\n})()\r\n\r\nexport const  getReusableCoords = (() => {\r\n    const coords = { x: 0, y: 0 }\r\n    return (x, y) => {\r\n        coords.x = x\r\n        coords.y = y\r\n        return coords\r\n    }\r\n})()\r\n\r\nexport const getReusableCirc =(() => {\r\n    const bounds = [0, 0].map(() => ({ x: 0, y: 0, radius: 0 }))\r\n    let lastAccessedIdx = 0\r\n    return (x, y, radius) => {\r\n        lastAccessedIdx = lastAccessedIdx === 0 ? 1: 0\r\n        bounds[lastAccessedIdx].x = x\r\n        bounds[lastAccessedIdx].y = y\r\n        bounds[lastAccessedIdx].radius = radius\r\n        return bounds[lastAccessedIdx]\r\n    }\r\n})()\r\n\r\nexport function  calcCenter(entity) {\r\n    const { hitbox, hitcirc } = entity\r\n\r\n    if (entity.hitbox) {\r\n        return { x: hitbox.x + hitbox.width / 2, y: hitbox.y + hitbox.height / 2 }\r\n    }\r\n\r\n    if (entity.hitcirc) {\r\n        return { x: hitcirc.x, y: hitcirc.y }\r\n    }\r\n\r\n    return { x: entity.width / 2, y: entity.height / 2 }\r\n}\r\n\r\nconst sc = { // stack calcs\r\n    il: c => { // inside-left\r\n        return c.x\r\n    },\r\n    ol: (c, e) => { // outside-left\r\n        return c.x - e.width\r\n    },\r\n    ir: (c, e) => { // inside-right\r\n        return c.x + (c.width - e.width)\r\n    },\r\n    or: c => { // outiside-right\r\n        return c.x + c.width\r\n    },\r\n    hc: (c, e) => { // horizontal center\r\n        return c.x + (c.width - e.width) / 2\r\n    },\r\n    it: c => { // inside-top\r\n        // c --> container bounds; e --> entity bounds\r\n        return c.y\r\n    },\r\n    ot: (c, e) => { // outside-top\r\n        return c.y - e.height\r\n    },\r\n    ib: (c, e )=> { // inside-bottom\r\n        return c.y + (c.height - e.height)\r\n    },\r\n    ob: c => { // outiside-bottom\r\n        return c.y + c.height\r\n    },\r\n    vc: (c, e) => { // vertical center\r\n        return c.y + (c.height - e.height) / 2\r\n    }\r\n}\r\n\r\nexport function calcAligned(c, e, x, y, mX=0, mY=0) {\r\n    const pos = getReusableCoords(mX, mY)\r\n    switch (x) {\r\n        case \"left\":\r\n            pos.x += sc.il(c, e)\r\n        break\r\n        case \"center\":\r\n            pos.x += sc.hc(c, e)\r\n        break\r\n        case \"right\":\r\n            pos.x += sc.ir(c, e)\r\n        break\r\n        default:\r\n            throw new Error(`Invalid x-alignment parameter: ${x}`)\r\n    }\r\n    switch(y) {\r\n        case \"top\":\r\n            pos.y += sc.it(c, e)\r\n        break\r\n        case \"center\":\r\n            pos.y += sc.vc(c, e)\r\n        break\r\n        case \"bottom\":\r\n            pos.y += sc.ib(c, e)\r\n        break\r\n        default:\r\n            throw new Error(`Invalid y-alignment parameter: ${y}`)\r\n    }\r\n    return pos\r\n}\r\n\r\nexport function calcCentered(c, e) {\r\n    return {\r\n        x: sc.hc(c, e),\r\n        y: sc.vc(c, e)\r\n    }\r\n}\r\n\r\nexport function calcStacked(e1, e2, dir, mX=0, mY=0) {\r\n    const pos = getReusableCoords(mX, mY)\r\n    switch(dir) {\r\n        case \"top-start\":\r\n            pos.x += sc.il(e1, e2)\r\n            pos.y += sc.ot(e1, e2)\r\n        break\r\n        case \"top\":\r\n            pos.x += sc.hc(e1, e2)\r\n            pos.y += sc.ot(e1, e2)\r\n        break\r\n        case \"top-end\":\r\n            pos.x += sc.ir(e1, e2)\r\n            pos.y += sc.ot(e1, e2)\r\n        break\r\n        case \"right-start\":\r\n            pos.x += sc.or(e1, e2)\r\n            pos.y += sc.it(e1, e2)\r\n        break\r\n        case \"right\":\r\n            pos.x += sc.or(e1, e2)\r\n            pos.y += sc.vc(e1, e2)\r\n        break\r\n        case \"right-end\":\r\n            pos.x += sc.or(e1, e2)\r\n            pos.y += sc.ib(e1, e2)\r\n        break\r\n        case \"bottom-start\":\r\n            pos.x += sc.il(e1, e2)\r\n            pos.y += sc.ob(e1, e2)\r\n        break\r\n        case \"bottom\":\r\n            pos.x += sc.hc(e1, e2)\r\n            pos.y += sc.ob(e1, e2)\r\n        break\r\n        case \"bottom-end\":\r\n            pos.x += sc.ir(e1, e2)\r\n            pos.y += sc.ob(e1, e2)\r\n        break\r\n        case \"left-start\":\r\n            pos.x += sc.ol(e1, e2)\r\n            pos.y += sc.it(e1, e2)\r\n        break\r\n        case \"left\":\r\n            pos.x += sc.ol(e1, e2)\r\n            pos.y += sc.vc(e1, e2)\r\n        break\r\n        case \"left-end\":\r\n            pos.x += sc.ol(e1, e2)\r\n            pos.y += sc.ib(e1, e2)\r\n        break\r\n        default:\r\n            throw new Error(`Invalid stacking direction: ${dir}`)\r\n    }\r\n    return pos\r\n}\r\n\r\nexport const calcComposite = entities => {\r\n    const { x, y, width, height } = entities[0]\r\n    const bounds = getReusableBounds(x, y, width, height )\r\n    for (let i = 1; i < entities.length; i++) {\r\n        const ent = entities[i]\r\n        const rEdgX = Math.max(bounds.x + bounds.width, ent.x + ent.width)\r\n        const bEdgY = Math.max(bounds.y + bounds.height, ent.y + ent.height)\r\n\r\n        bounds.x = Math.min(bounds.x, ent.x)\r\n        bounds.y = Math.min(bounds.y, ent.y)\r\n        bounds.width = rEdgX - bounds.x\r\n        bounds.height = bEdgY - bounds.y\r\n    }\r\n    return bounds\r\n}\r\n\r\nexport const combine = (a, b, dir) => {\r\n    switch (dir) {\r\n        case \"x\":\r\n            return {\r\n                width: a.width + b.width,\r\n                height: Math.max(a.height, b.height)\r\n            }\r\n        case \"y\":\r\n            return {\r\n                width: Math.max(a.width, b.width),\r\n                height: Math.max(a.height, b.height)\r\n            }\r\n        default:\r\n            throw new Error(`Invalid combine direction: ${dir}`)\r\n    }\r\n}\r\n\r\nexport function rectBounds(ent) {\r\n    const globalPos = getGlobalPos(ent)\r\n    if (ent.hitbox) {\r\n        return getReusableBounds(globalPos.x + ent.hitbox.x, globalPos.y + ent.hitbox.y, ent.hitbox.width, ent.hitbox.height)\r\n    }\r\n    return getReusableBounds(globalPos.x, globalPos.y, ent.width, ent.height)\r\n}\r\n\r\nexport function getHitbox(ent) {\r\n    if (ent.hitbox) {\r\n        return ent.hitbox\r\n    }\r\n    return getReusableBounds(0, 0, ent.width, ent.height)\r\n}\r\n\r\nexport function circBounds(ent) {\r\n    const globalPos = getGlobalPos(ent)\r\n    return getReusableCirc(globalPos.x + ent.hitCirc.x, globalPos.y + ent.hitCirc.y, ent.hitCirc.radius)\r\n}\r\n\r\nexport function setLocalPosX(node, globalPosX) {\r\n    let parent = node.parent\r\n    let localPosX\r\n    while (parent) {\r\n        localPosX = globalPosX - parent.pos.x\r\n        parent = parent.parent\r\n    }\r\n    node.pos.x = localPosX\r\n}\r\nexport function setLocalPosY(node, globalPosY) {\r\n    let parent = node.parent\r\n    let localPosY\r\n    while (parent) {\r\n        localPosY = globalPosY - parent.pos.y\r\n        parent = parent.parent\r\n    }\r\n    node.pos.y = localPosY\r\n}\r\nexport function getGlobalPos(node) {\r\n    let x = node.pos.x\r\n    let y = node.pos.y\r\n    while (!!node.parent) {\r\n        node = node.parent\r\n        x += node.pos.x\r\n        y += node.pos.y\r\n    }\r\n    return getReusableCoords(x, y)\r\n}\r\n\r\nconst getWidth = node => !!node.w ? node.w: node.width\r\nconst getHeight = node => !!node.h ? node.h: node.height\r\n\r\nexport function compositeDims(node) {\r\n    if (!node.children) {\r\n        return { width: 0, height: 0 }\r\n    }\r\n    const fChild = node.children[0]\r\n    const initialBounds = {\r\n        minX: fChild.pos.x,\r\n        minY: fChild.pos.y,\r\n        maxX: fChild.pos.x + getWidth(fChild),\r\n        maxY: fChild.pos.y + getHeight(fChild)\r\n    }\r\n    const bounds = node.children.reduce((acc, child) => {\r\n        return {\r\n            minX: Math.min(acc.minX, child.pos.x),\r\n            minY: Math.min(acc.minY, child.pos.y),\r\n            maxX: Math.max(acc.maxX, child.pos.x + getWidth(child)),\r\n            maxY: Math.max(acc.maxY, child.pos.y + getHeight(child))\r\n        }\r\n    }, initialBounds)\r\n    return ({\r\n        width: bounds.maxX - bounds.minX,\r\n        height: bounds.maxY - bounds.minY\r\n    })\r\n}","export const rand = (to, from = 0) => from + Math.floor((to - from + 1)* Math.random())\r\n\r\nexport const randf = (to, from = 0) => from + (to - from) * Math.random()\r\n\r\nexport const skewedRand = (to, from = 0) => from + Math.floor((to - from + 1) * Math.random() * Math.random())\r\n\r\nexport const pickOne = array => array[rand(array.length - 1)]\r\n\r\nexport const clamp = (from = 0, to = 1, num) => Math.min(to, Math.max(from, num))\r\n\r\nexport const sign = num => num === 0 ? 1 : num / Math.abs(num)\r\n\r\nexport const lerp = (from, to, num) => (num - from) / (to - from)\r\n\r\nexport const stripFloat = (num, place) => Math.floor(num * place) / place\r\n\r\nexport const roundFloat = (num, place) => Math.round(num * place) / place\r\n\r\nexport const len = (x, y) => Math.sqrt(x * x + y * y)\r\n\r\nexport const sqLen = (x, y) => x * x + y * y\r\n\r\nexport const calcNormal = (x, y) => {\r\n    const length = len(x, y)\r\n    return { x: y / length, y: -x / length}\r\n}\r\n\r\nexport const normalize = (x, y) => {\r\n    const magnitude = len(x, y)\r\n    return { x: x / magnitude, y: y / magnitude }\r\n}\r\n\r\nexport const easingFns = {\r\n    linear(x) {\r\n        return x\r\n    },\r\n    quadIn(x) {\r\n        return  x * x\r\n    },\r\n    quadOut(x) {\r\n        return 1 - this.quadIn(x - 1)\r\n    },\r\n    cubicIn(x) {\r\n        return x * x * x\r\n    },\r\n    cubicOut(x) {\r\n        return 1 - this.cubicIn(1 - x)\r\n    },\r\n    smoothStep(x) {\r\n        return x * x * (3 - 2 * x)\r\n    }\r\n}\r\n\r\nexport const fixedAabb = (b1, b2) => {\r\n    if (\r\n        stripFloat(b1.x + b1.width, 10000) <= stripFloat(b2.x, 10000) || \r\n        stripFloat(b1.x, 10000) >= stripFloat(b2.x + b2.width, 10000) ||\r\n        stripFloat(b1.y + b1.height, 10000) <= stripFloat(b2.y, 10000) ||\r\n        stripFloat(b1.y, 10000) >= stripFloat(b2.y + b2.height, 10000)\r\n    ) {\r\n            return false\r\n    }\r\n    return true\r\n}\r\n\r\nexport const aabb = (b1, b2) => {\r\n    if (\r\n        b1.x + b1.width <= b2.x || \r\n        b1.x >= b2.x + b2.width ||\r\n        b1.y + b1.height <= b2.y ||\r\n        b1.y >= b2.y + b2.height\r\n    ) {\r\n            return false\r\n    }\r\n    return true\r\n}\r\n\r\nexport const circCirc = (b1, b2) => {\r\n    const radiiSum = b1.radius + b2.radius\r\n    const xDist = (b1.x + b1.radius / 2) - (b2.x + b2.radius / 2)\r\n    const yDist = (b1.y + b1.radius / 2) - (b2.y + b2.radius / 2)\r\n    const sqDist = xDist * xDist + yDist * yDist\r\n    return sqDist <= radiiSum * radiiSum\r\n}\r\n\r\nexport const aabbCirc = (rectBounds, circBounds) => {\r\n    const closestDistX = circBounds.x + circBounds.radius - clamp(rectBounds.x, rectBounds.x + rectBounds.width, circBounds.x + circBounds.radius)\r\n    const closestDistY = circBounds.y + circBounds.radius - clamp(rectBounds.y, rectBounds.y + rectBounds.height, circBounds.y + circBounds.radius)\r\n\r\n    \r\n    const sqClosestDist = closestDistX * closestDistX + closestDistY * closestDistY\r\n    return Math.round(sqClosestDist) < circBounds.radius * circBounds.radius\r\n}\r\n\r\nexport const circPlank = (circBounds, plankBounds) => {\r\n    if (!aabbCirc(plankBounds, circBounds)) {\r\n        return\r\n    }\r\n    const vecBEX = (circBounds.x + circBounds.radius) - plankBounds.x\r\n    const vecBEY = (circBounds.y + circBounds.radius) - plankBounds.y\r\n    const normalDist = plankBounds.normalX * vecBEX + plankBounds.normalY * vecBEY // 1D vector\r\n    return normalDist < circBounds.radius\r\n}\r\n\r\nexport const contains = ({ box, point }) => {\r\n    const xcond = point.x > box.x && point.x < box.x + box.width\r\n    const ycond = point.y > box.y && point.y < box.y + box.height\r\n    return xcond && ycond\r\n}\r\n\r\nexport const atan = (y, x) => {\r\n    const abs = Math.abs(Math.atan(y / x))\r\n    if (x > 0 && y < 0) { // fourth quadrant\r\n        return -abs\r\n    }\r\n    if (x < 0 && y < 0) { // third quadrant\r\n        return Math.PI + abs\r\n    }\r\n    if (x < 0 && y > 0) { // second quadrant\r\n        return Math.PI - abs\r\n    }\r\n    if (x > 0 && y > 0) { // first quadrant\r\n        return abs\r\n    }\r\n    if (y === 0 && x > 0) {\r\n        return 0\r\n    }\r\n    if (y === 0 && x < 0) {\r\n        return Math.PI\r\n    }\r\n    if (x === 0 && y > 0) {\r\n        return Math.PI / 2\r\n    }\r\n    if (x === 0 && y < 0) {\r\n        return -Math.PI / 2\r\n    }\r\n}\r\nconst  hexRegexes = {\r\n    short: new RegExp(`[0-9a-f]`, \"g\"),\r\n    long: new RegExp(`[0-9a-f]{2}`, \"g\")\r\n}\r\nexport const hexToArray = (hexString=\"#000\") => {\r\n    const regexKey = hexString.length === 4 ? \"short\": \"long\"\r\n    const regex = hexRegexes[regexKey]\r\n    return hexString.replace(\"#\", \"\").match(regex).map(hex => parseInt(hex.concat(regexKey === \"short\" ? hex: \"\"), 16))\r\n}\r\nexport const hexToNorm = hexString => {\r\n    return hexToArray(hexString).map(num => num / 255)\r\n}\r\nexport const hexToRgb = hexString => {\r\n    return `rgb(${hexToArray(hexString).join(\",\")})`\r\n}","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","import Observable from \"@utils/Observable\"\r\n\r\nclass Viewport extends Observable {\r\n    x = 0\r\n    y = 0\r\n    constructor(computeViewport) {\r\n        super([ \"change\" ], computeViewport())\r\n        window.addEventListener(\"resize\", () => {\r\n            const newDimensions = computeViewport()\r\n            Object.assign(this, newDimensions)\r\n            this.emit(\"change\", this)\r\n        })\r\n    }\r\n}\r\n\r\nexport default Viewport","import Viewport  from \"@utils/ViewPort\"\r\n\r\n/**\r\n * config checklist:\r\n * 1. resolution\r\n * 2. storage strategy class\r\n * 3. sdk strategy class (null for none)\r\n */\r\n\r\nconst resolutions = {\r\n    standard: { max: 1024, min: 720 },\r\n    full: { max: 1980, min: 1024 },\r\n    hd: { max: 1440, min: 986 },\r\n    r720p: { max: 1280, min: 720 },\r\n    custom: { max: 1100, min: 720 }\r\n}\r\n\r\nconst desktopRes = resolutions.custom\r\n\r\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\r\nconst scale = false\r\nconst maxDpr = 1\r\nconst maxMobileDpr = 1.5\r\nconst computeViewport = () => {\r\n    const width = window.innerWidth, height = window.innerHeight // drawing buffer dimensions (how manny actual pixels are there in the screen regardless of scaling) / devicePixelRatio\r\n    const portraitMode = height > width\r\n    if (isMobile) {\r\n        /**\r\n         * 100% of the smaller side\r\n         * and max(100% of the smaller side, 70% of the bigger side)\r\n         */\r\n        const vpWidth = portraitMode ? width: Math.max(0.70 * width, height)\r\n        const vpHeight = portraitMode ? Math.max(0.70 * height, width): height\r\n        return ({\r\n            width: vpWidth,\r\n            height: vpHeight\r\n        })\r\n    }\r\n    const maxWidth = portraitMode ? desktopRes.min: desktopRes.max\r\n    const maxHeight = portraitMode ? desktopRes.max: desktopRes.min\r\n    const vpWidth = Math.min(width, maxWidth)\r\n    const vpHeight = Math.min(height, maxHeight)\r\n    return ({ // canvas dimensions\r\n        width: vpWidth,\r\n        height: vpHeight,\r\n    })\r\n}\r\nconst defaultConfig = {\r\n    viewport: new Viewport(computeViewport),\r\n    storageId: \"jshdf190\",\r\n    worldWidth: 1000,\r\n    worldHeight: window.innerHeight,\r\n    gravity: 1700,\r\n    isMobile,\r\n    scale,\r\n    get devicePixelRatio() {\r\n        return Math.min(isMobile ? maxMobileDpr: maxDpr, window.devicePixelRatio)\r\n    },\r\n    orientation: \"portrait\",\r\n}\r\n\r\nexport default overrides => Object.assign(defaultConfig, overrides)","import createConfig from \"../create\"\r\nimport LocStorage from \"../../helpers/storage/strategies/LocStorage\"\r\n\r\nexport default createConfig({\r\n    SDKStrat: null,\r\n    StorageStrat: LocStorage,\r\n    showAdOnRestart: 0,\r\n    showAdOnResume: 0,\r\n    prerollAd: false\r\n})","export default class {\r\n    constructor(key) {\r\n        this.key = key\r\n    }\r\n    get() {\r\n        return localStorage.getItem(this.key)\r\n    }\r\n    set(val) {\r\n        localStorage.setItem(this.key, val)\r\n    }\r\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._1ABys8-8-_OHSD1WgNfrCA {\\r\\n    transition: opacity 0.25s linear;\\r\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/entities/Player/style.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,gCAAgC;AACpC\",\"sourcesContent\":[\".ctrlBtn {\\r\\n    transition: opacity 0.25s linear;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"ctrlBtn\": \"_1ABys8-8-_OHSD1WgNfrCA\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kBnvNgbdaWjN1JUPehZVl {\\r\\n    white-space: nowrap;\\r\\n    font-size: 2em;\\r\\n    font-family: monospace;\\r\\n    color: #ffe6d5;\\r\\n    user-select: none;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n._2lHPVtCDOcovWkCo9WuhBr {\\r\\n    color: #ffe6d5;\\r\\n    background: black;\\r\\n    margin-left: -16px;\\r\\n    font-size: 1.5em;\\r\\n    padding: 10px 16px;\\r\\n    border-radius: 5px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n._2lHPVtCDOcovWkCo9WuhBr:before {\\r\\n    content: \\\"\\\";\\r\\n    position: absolute;\\r\\n    top: 100%;\\r\\n    left: 50%;\\r\\n    border-width: 12px;\\r\\n    border-style: solid;\\r\\n    border-color: black transparent transparent transparent;\\r\\n}\\r\\n._1ggU-0hgNAcU2DVOMJWQLZ {\\r\\n    font-family: monospace;\\r\\n    color: #ffe6d5;\\r\\n    font-size: 16px;\\r\\n    letter-spacing: 2px;\\r\\n    user-select: none;\\r\\n    transition: opacity 0.25s linear;\\r\\n    border-radius: 5px;\\r\\n}\\r\\n.lc0jbG1_QuFCjZS3-gers {\\r\\n    opacity: 0;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n.fqfOAOxskjZ7CSpKGysjL {\\r\\n    border-radius: 5px;\\r\\n    background: #333366;\\r\\n    opacity: 0;\\r\\n    z-index: 1;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n._2cCNjRBGCgpzkmR8i4dm_7 {\\r\\n    color: #ffe6d5;\\r\\n    font-size: 16px;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.eI9EvLtxVH2HaEV7XABKr {\\r\\n    color: #fa664b;\\r\\n    font-size: 16px;\\r\\n    font-weight: bold;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n._1niWA6rwv5zoeCHQyf8yAz {\\r\\n    color: #e0c6e0;\\r\\n}\\r\\n._2chNllMXrIThEnxJvtvvow {\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.Z2wV4tFi4P3HcME7xm0vV {\\r\\n    display: none;\\r\\n}\\r\\n._3Z4Q7kHHX6KEBKSpcobAx4 {\\r\\n    background:rgba(0, 0, 0, 0.5); \\r\\n    z-index: 1;\\r\\n    display: none;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/screens/Game/initUI/style.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,iBAAiB;IACjB,gCAAgC;AACpC;AACA;IAEI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,kBAAkB;IAClB,mBAAmB;IACnB,uDAAuD;AAC3D;AACA;IACI,sBAAsB;IACtB,cAAc;IACd,eAAe;IACf,mBAAmB;IACnB,iBAAiB;IACjB,gCAAgC;IAChC,kBAAkB;AACtB;AACA;IACI,UAAU;IACV,gCAAgC;AACpC;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;IACV,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;AAClB;AACA;IACI,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,aAAa;AACjB;AACA;IACI,6BAA6B;IAC7B,UAAU;IACV,aAAa;AACjB\",\"sourcesContent\":[\".txt {\\r\\n    white-space: nowrap;\\r\\n    font-size: 2em;\\r\\n    font-family: monospace;\\r\\n    color: #ffe6d5;\\r\\n    user-select: none;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n.tooltip {\\r\\n    composes: txt;\\r\\n    color: #ffe6d5;\\r\\n    background: black;\\r\\n    margin-left: -16px;\\r\\n    font-size: 1.5em;\\r\\n    padding: 10px 16px;\\r\\n    border-radius: 5px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n.tooltip:before {\\r\\n    content: \\\"\\\";\\r\\n    position: absolute;\\r\\n    top: 100%;\\r\\n    left: 50%;\\r\\n    border-width: 12px;\\r\\n    border-style: solid;\\r\\n    border-color: black transparent transparent transparent;\\r\\n}\\r\\n.timer {\\r\\n    font-family: monospace;\\r\\n    color: #ffe6d5;\\r\\n    font-size: 16px;\\r\\n    letter-spacing: 2px;\\r\\n    user-select: none;\\r\\n    transition: opacity 0.25s linear;\\r\\n    border-radius: 5px;\\r\\n}\\r\\n.hidden {\\r\\n    opacity: 0;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n.overlay {\\r\\n    border-radius: 5px;\\r\\n    background: #333366;\\r\\n    opacity: 0;\\r\\n    z-index: 1;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.time {\\r\\n    color: #ffe6d5;\\r\\n    font-size: 16px;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.timeVal {\\r\\n    color: #fa664b;\\r\\n    font-size: 16px;\\r\\n    font-weight: bold;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.recTimeVal {\\r\\n    color: #e0c6e0;\\r\\n}\\r\\n.continue {\\r\\n    z-index: 2;\\r\\n    transition: opacity 1s linear;\\r\\n}\\r\\n.dead {\\r\\n    display: none;\\r\\n}\\r\\n.blurOverlay {\\r\\n    background:rgba(0, 0, 0, 0.5); \\r\\n    z-index: 1;\\r\\n    display: none;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"txt\": \"kBnvNgbdaWjN1JUPehZVl\",\n\t\"tooltip\": \"_2lHPVtCDOcovWkCo9WuhBr kBnvNgbdaWjN1JUPehZVl\",\n\t\"timer\": \"_1ggU-0hgNAcU2DVOMJWQLZ\",\n\t\"hidden\": \"lc0jbG1_QuFCjZS3-gers\",\n\t\"overlay\": \"fqfOAOxskjZ7CSpKGysjL\",\n\t\"time\": \"_2cCNjRBGCgpzkmR8i4dm_7\",\n\t\"timeVal\": \"eI9EvLtxVH2HaEV7XABKr\",\n\t\"recTimeVal\": \"_1niWA6rwv5zoeCHQyf8yAz\",\n\t\"continue\": \"_2chNllMXrIThEnxJvtvvow\",\n\t\"dead\": \"Z2wV4tFi4P3HcME7xm0vV\",\n\t\"blurOverlay\": \"_3Z4Q7kHHX6KEBKSpcobAx4\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._2dxZo1LuY05qYQk5cWBGAj {\\r\\n    transform: scale(-1, 1);\\r\\n}\\r\\n._3vdgYio4yaebTL7u79N62v {\\r\\n    color: #ffe6d5;\\r\\n    font-size: 2em;\\r\\n    font-family: monospace;\\r\\n    font-weight: 700;\\r\\n    white-space: nowrap;\\r\\n    z-index: 1;\\r\\n    user-select: none;\\r\\n}\\r\\n._22uFm83qwojCfg8hmv6Yql {\\r\\n    font-size: 1.2em;\\r\\n    color: #eabeac;\\r\\n}\\r\\n@media (max-width:600px)  {\\r\\n    ._22uFm83qwojCfg8hmv6Yql {\\r\\n        font-size: 0.5em !important;\\r\\n    }\\r\\n    ._3vdgYio4yaebTL7u79N62v {\\r\\n        font-size: 1em;\\r\\n    }\\r\\n}\\r\\n._34sI9l4leBq2HWmVtVKMz5 {\\r\\n    transition: opacity linear 0.125s;\\r\\n    opacity: 0;\\r\\n}\\r\\n._33T254Eh2ILhm_nusDbjXu {\\r\\n    transition: opacity linear 0.250s;\\r\\n}\\r\\n._3H227XjaA5OSILiuNsLx2P:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n.aA9CxtPMIYcN-bXcV3l_i {\\r\\n    color: tomato;\\r\\n    font-size: 1.5em;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n._1B0xVLXoPlp_en5mM907su {\\r\\n    opacity: 0;\\r\\n    transition: opacity 0.5s linear;\\r\\n}\\r\\n.UbeNJHa88KANlX_8vZHCY {\\r\\n    color: silver;\\r\\n    font-size: 1.5em;\\r\\n    font-family: momospace;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/screens/Level/style.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,uBAAuB;AAC3B;AACA;IACI,cAAc;IACd,cAAc;IACd,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;IACnB,UAAU;IACV,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,cAAc;AAClB;AACA;IACI;QACI,2BAA2B;IAC/B;IACA;QACI,cAAc;IAClB;AACJ;AACA;IACI,iCAAiC;IACjC,UAAU;AACd;AACA;IACI,iCAAiC;AACrC;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;IACtB,mBAAmB;AACvB;AACA;IACI,UAAU;IACV,+BAA+B;AACnC;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;AAC1B\",\"sourcesContent\":[\".prevBtn {\\r\\n    transform: scale(-1, 1);\\r\\n}\\r\\n.infoTitle {\\r\\n    color: #ffe6d5;\\r\\n    font-size: 2em;\\r\\n    font-family: monospace;\\r\\n    font-weight: 700;\\r\\n    white-space: nowrap;\\r\\n    z-index: 1;\\r\\n    user-select: none;\\r\\n}\\r\\n.infoSub {\\r\\n    font-size: 1.2em;\\r\\n    color: #eabeac;\\r\\n}\\r\\n@media (max-width:600px)  {\\r\\n    .infoSub {\\r\\n        font-size: 0.5em !important;\\r\\n    }\\r\\n    .infoTitle {\\r\\n        font-size: 1em;\\r\\n    }\\r\\n}\\r\\n.icon {\\r\\n    transition: opacity linear 0.125s;\\r\\n    opacity: 0;\\r\\n}\\r\\n.startBtn {\\r\\n    transition: opacity linear 0.250s;\\r\\n}\\r\\n.playBtn:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n.error {\\r\\n    color: tomato;\\r\\n    font-size: 1.5em;\\r\\n    font-family: monospace;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n.hidden {\\r\\n    opacity: 0;\\r\\n    transition: opacity 0.5s linear;\\r\\n}\\r\\n.retry {\\r\\n    color: silver;\\r\\n    font-size: 1.5em;\\r\\n    font-family: momospace;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"prevBtn\": \"_2dxZo1LuY05qYQk5cWBGAj\",\n\t\"infoTitle\": \"_3vdgYio4yaebTL7u79N62v\",\n\t\"infoSub\": \"_22uFm83qwojCfg8hmv6Yql\",\n\t\"icon\": \"_34sI9l4leBq2HWmVtVKMz5\",\n\t\"startBtn\": \"_33T254Eh2ILhm_nusDbjXu\",\n\t\"playBtn\": \"_3H227XjaA5OSILiuNsLx2P\",\n\t\"error\": \"aA9CxtPMIYcN-bXcV3l_i\",\n\t\"hidden\": \"_1B0xVLXoPlp_en5mM907su\",\n\t\"retry\": \"UbeNJHa88KANlX_8vZHCY\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._2jdDmJpB0m2pgCwnQXkXp0 {\\r\\n    font-size: 16px;\\r\\n    color: #ffe6d5;\\r\\n    font-family: monospace;\\r\\n    letter-spacing: 4px;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n._3jHrN0bUvMonJnX0kLE_H5 {\\r\\n    letter-spacing: 0;\\r\\n}\\r\\n._28whNcPBsAxhOYxXkHBOdc {\\r\\n    border-radius: 5px;\\r\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/screens/Loading/style.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,eAAe;IACf,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IACnB,mBAAmB;AACvB;AACA;IACI,iBAAiB;AACrB;AACA;IACI,kBAAkB;AACtB\",\"sourcesContent\":[\".txt {\\r\\n    font-size: 16px;\\r\\n    color: #ffe6d5;\\r\\n    font-family: monospace;\\r\\n    letter-spacing: 4px;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n.info {\\r\\n    letter-spacing: 0;\\r\\n}\\r\\n.bar {\\r\\n    border-radius: 5px;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"txt\": \"_2jdDmJpB0m2pgCwnQXkXp0\",\n\t\"info\": \"_3jHrN0bUvMonJnX0kLE_H5\",\n\t\"bar\": \"_28whNcPBsAxhOYxXkHBOdc\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._35YmgIRdM1rGTagRZdiMWH {\\r\\n    background-color: transparent;\\r\\n    cursor: pointer;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n\\r\\n._5nb22jczr2iRQl6GzsxhG {\\r\\n    width: 12px;\\r\\n    height: 12px;\\r\\n    border-radius: 50%;\\r\\n    background: #ffe6d5;\\r\\n    animation-name: uP3_D0Wi7V8GXgXu0IENq;\\r\\n    animation-duration: 0.75s;\\r\\n    animation-iteration-count: infinite;\\r\\n}\\r\\n._3lEQuyyX-I9YTwqE1mHS1o {\\r\\n    animation-delay: 0s;\\r\\n}\\r\\n._1h3b1j-Uhme2WBBixZS7-Z {\\r\\n    animation-delay: 0.25s;\\r\\n    margin-left: 16px;\\r\\n}\\r\\n.bancwqSaH-c4kiW34bN3V {\\r\\n    animation-delay: 0.5s;\\r\\n    margin-left: 32px;\\r\\n}\\r\\n@keyframes uP3_D0Wi7V8GXgXu0IENq {\\r\\n    0% { opacity: 0 }\\r\\n    100% { opacity: 1 }\\r\\n}\\r\\n\\r\\n.-P5MQXKbIsmfEcxD8zhki {\\r\\n    background: #eeeeee;\\r\\n    font-size: 1.5em;\\r\\n    color: #e15c22;\\r\\n    padding: 0.55em;\\r\\n    border-radius: 0.2em;\\r\\n    cursor: pointer;\\r\\n    font-weight: bold;\\r\\n    font-family: monospace;\\r\\n    letter-spacing: 1px;\\r\\n    user-select: none;\\r\\n}\\r\\n.-P5MQXKbIsmfEcxD8zhki:hover, .-P5MQXKbIsmfEcxD8zhki:active, .-P5MQXKbIsmfEcxD8zhki:focus {\\r\\n    box-shadow: 0px 0px 3px 3px #7a371c;\\r\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/screens/ui/style.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,6BAA6B;IAC7B,eAAe;IACf,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;IACnB,qCAAuB;IACvB,yBAAyB;IACzB,mCAAmC;AACvC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,iBAAiB;AACrB;AACA;IACI,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,KAAK,WAAW;IAChB,OAAO,WAAW;AACtB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;IAChB,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;AACrB;AACA;IACI,mCAAmC;AACvC\",\"sourcesContent\":[\".imgBtn {\\r\\n    background-color: transparent;\\r\\n    cursor: pointer;\\r\\n    transition: opacity 0.25s linear;\\r\\n}\\r\\n\\r\\n.loadingDot {\\r\\n    width: 12px;\\r\\n    height: 12px;\\r\\n    border-radius: 50%;\\r\\n    background: #ffe6d5;\\r\\n    animation-name: loading;\\r\\n    animation-duration: 0.75s;\\r\\n    animation-iteration-count: infinite;\\r\\n}\\r\\n.dotA {\\r\\n    animation-delay: 0s;\\r\\n}\\r\\n.dotB {\\r\\n    animation-delay: 0.25s;\\r\\n    margin-left: 16px;\\r\\n}\\r\\n.dotC {\\r\\n    animation-delay: 0.5s;\\r\\n    margin-left: 32px;\\r\\n}\\r\\n@keyframes loading {\\r\\n    0% { opacity: 0 }\\r\\n    100% { opacity: 1 }\\r\\n}\\r\\n\\r\\n.playBtn {\\r\\n    background: #eeeeee;\\r\\n    font-size: 1.5em;\\r\\n    color: #e15c22;\\r\\n    padding: 0.55em;\\r\\n    border-radius: 0.2em;\\r\\n    cursor: pointer;\\r\\n    font-weight: bold;\\r\\n    font-family: monospace;\\r\\n    letter-spacing: 1px;\\r\\n    user-select: none;\\r\\n}\\r\\n.playBtn:hover, .playBtn:active, .playBtn:focus {\\r\\n    box-shadow: 0px 0px 3px 3px #7a371c;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"imgBtn\": \"_35YmgIRdM1rGTagRZdiMWH\",\n\t\"loadingDot\": \"_5nb22jczr2iRQl6GzsxhG\",\n\t\"loading\": \"uP3_D0Wi7V8GXgXu0IENq\",\n\t\"dotA\": \"_3lEQuyyX-I9YTwqE1mHS1o\",\n\t\"dotB\": \"_1h3b1j-Uhme2WBBixZS7-Z\",\n\t\"dotC\": \"bancwqSaH-c4kiW34bN3V\",\n\t\"playBtn\": \"-P5MQXKbIsmfEcxD8zhki\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","module.exports = __webpack_public_path__ + \"assets/372dc952be4e3949ea766f9a3cc16e4c.cson\";","module.exports = __webpack_public_path__ + \"assets/1c14c948068ce72052c2f5c76b83ac7a.mp3\";","module.exports = __webpack_public_path__ + \"assets/5ea22db127bf58d7edacd4e27de15128.cson\";","module.exports = __webpack_public_path__ + \"assets/cd3cbf8f37bcd08c3cbc8ab297c0dfd9.png\";","module.exports = __webpack_public_path__ + \"assets/8d5b69f4aa3fb86a73b9adac5fc89c68.png\";","module.exports = __webpack_public_path__ + \"assets/48b0df5de1822d037c3e0da1056d5ea0.png\";","module.exports = __webpack_public_path__ + \"assets/2a19667466be46c7b96d969d0f68f723.png\";","module.exports = __webpack_public_path__ + \"assets/ec8b65d405f50357bf99224c24ad7e2e.png\";","module.exports = __webpack_public_path__ + \"assets/3c92faa2a2f84dc5a4a752de743a7521.png\";","module.exports = __webpack_public_path__ + \"assets/6d20d50c4325d374f53558afe76267a1.png\";","module.exports = __webpack_public_path__ + \"assets/74d1202a0fc2f45361702ef9520989af.png\";","module.exports = __webpack_public_path__ + \"assets/667305c7749f4cc363a07c4cedcc4e58.png\";","module.exports = __webpack_public_path__ + \"assets/e864417a5cd342b1fe190beed41cd2f3.png\";","module.exports = __webpack_public_path__ + \"assets/0ca9736dc31ac025b4a21bf7942a86fc.png\";","module.exports = __webpack_public_path__ + \"assets/80b7b67277fabe5881e19db3ae8d119a.cson\";","module.exports = __webpack_public_path__ + \"assets/629a0261aa38809f626b97c75c2cd20d.cson\";","module.exports = __webpack_public_path__ + \"assets/0a5c7ff70d42b9e8d5ef0ab8acd287f5.cson\";","module.exports = __webpack_public_path__ + \"assets/f6f87743c611252be421a4b359607457.cson\";","module.exports = __webpack_public_path__ + \"assets/1db215397ce4431cbba8cbecd2c00849.cson\";","module.exports = __webpack_public_path__ + \"assets/e7043f79214f629e8df091157cf1368c.cson\";","module.exports = __webpack_public_path__ + \"assets/3e6ada5a8b0bc5f97b91808d80f07e0a.cson\";","module.exports = __webpack_public_path__ + \"assets/af903ba7f995fd00c067563ab2cfde76.cson\";","module.exports = __webpack_public_path__ + \"assets/1b8fc2b7508e99db2348de7c84f498cb.cson\";","module.exports = __webpack_public_path__ + \"assets/98d1121390135652ce1243461363d583.cson\";","module.exports = __webpack_public_path__ + \"assets/c7e44ba8b1dec2b016af516370db1071.cson\";","module.exports = __webpack_public_path__ + \"assets/f728efa8df13fb51278b6bf604a4e975.cson\";","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import { Node } from \"@lib\"\r\nconst startGameLoop = ({ mainUpdateFn = () => { }, renderer, step = 100 }) => {\r\n    const STEP = step // max frame duration\r\n    const RENDER_FPS = 30, UPDATE_FPS = 60\r\n    const [RENDER_INTERVAL, UPDATE_INTERVAL] = [RENDER_FPS, UPDATE_FPS].map(fps => 1000 / fps)\r\n    const UPDATE_INTERVAL_SECS = UPDATE_INTERVAL / 1000\r\n    let lastUpdated = 0, lastRendered = 0\r\n    let speed = 1\r\n    let paused = false\r\n\r\n    function loop(ts) {\r\n        // const dt = speed * Math.min(ts - lastUpdated, STEP) / 1000\r\n        let dt = speed * Math.min(ts - lastUpdated, STEP)\r\n        const dtRen = ts - lastRendered\r\n        const tsInSecs = ts / 1000\r\n        \r\n        if (paused) return requestAnimationFrame(loop)\r\n\r\n        // if root scene has update method that's where recursive update should go (it is useful when we have multiple cameras, one for each parallax layer)\r\n        while (dt >= UPDATE_INTERVAL) {\r\n            renderer.scene.update ? renderer.scene.update(UPDATE_INTERVAL_SECS, tsInSecs) : Node.updateRecursively(renderer.scene, UPDATE_INTERVAL_SECS, tsInSecs, renderer.scene)\r\n            mainUpdateFn(UPDATE_INTERVAL_SECS, tsInSecs)\r\n            dt -= UPDATE_INTERVAL\r\n        }\r\n\r\n        if (dtRen >= RENDER_INTERVAL) {\r\n            renderer.renderRecursively()\r\n            lastRendered = ts - (dtRen - RENDER_INTERVAL)\r\n        } else {\r\n            lastRendered = ts - dtRen\r\n        }\r\n        \r\n        lastUpdated = ts - dt\r\n        requestAnimationFrame(loop)\r\n    }\r\n    requestAnimationFrame(loop)\r\n    return {\r\n        pause() {\r\n            paused = true\r\n        },\r\n        resume() {\r\n            paused = false\r\n        },\r\n        setSpeed(val) { speed = val },\r\n        get meta() {\r\n            return {\r\n                elapsed: lastUpdated / 1000\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default startGameLoop\r\n\r\n","export const colRectsId = \"col-rects\"\r\nexport const offLeftThreshold = Math.PI / 4\r\nexport const offRightThreshold = 3 * Math.PI / 4\r\nexport const offEdgeReboundSpeed = 175\r\nexport const offEdgeToppleSpeed = 50\r\nexport const objLayerId = \"obj-layer\"\r\nexport const offlineErrMsg = \"offline\"","import createWebAudioClass from \"./APIs/WebAudio\"\r\nimport createNoAudioClass from \"./APIs/NoAudio\"\r\n\r\nexport const webAudioSupported = AudioContext !== undefined && AudioContext !== null\r\nconst SoundClass = webAudioSupported ? createWebAudioClass(): createNoAudioClass()\r\n\r\nexport default SoundClass","import { offlineErrMsg } from \"@lib/constants\"\r\n\r\nconst createWebAudio = () => {\r\n    const ctx = new AudioContext()\r\n    const decodeAudioData =  arrayBuffer => {\r\n        return new Promise((resolve, reject) => {\r\n            ctx.decodeAudioData(arrayBuffer, resolve, reject)\r\n        })\r\n    }\r\n\r\n    const getBufferNodeStartFn = node => {\r\n        return (startTime, from, duration) => {\r\n            if (node.loop) {\r\n                node.loopStart = from\r\n                node.loopEnd = from + duration\r\n                return node.start(startTime, from)\r\n            }\r\n            node.start(startTime, from, duration)\r\n        }\r\n    }\r\n\r\n    class Sound {\r\n        static _on = true\r\n        static getPaused() {\r\n            return this._on\r\n        }\r\n        static off() { \r\n            this._on = false\r\n        }\r\n        static on() {\r\n            this._on = true\r\n        }\r\n        static loadResource = src => {\r\n            return new Promise((resolve, reject) => {\r\n                fetch(src)\r\n                    .then(res => res.arrayBuffer())\r\n                    .then(arrayBuffer => decodeAudioData(arrayBuffer))\r\n                    .then(audioBuffer => resolve(audioBuffer))\r\n                    .catch(() => reject({ message: offlineErrMsg }))\r\n            })\r\n        }\r\n        static onCreated() { } // on sound object created\r\n        static onDestroyed() { } // on sound object destroyed\r\n        static destroy(soundObj) {\r\n            Sound.onDestroyed(soundObj)\r\n        }\r\n        constructor(buffer, { loop = false, volume = 1, pan = 0, speed = 1 } = {}) {\r\n            // initializing core props\r\n            this.buffer = buffer\r\n            this.panNode = ctx.createStereoPanner()\r\n            this.volumeNode = ctx.createGain()\r\n\r\n            // initializing settings\r\n            this.panNode.pan.value = pan\r\n            this.volumeNode.gain.value = volume\r\n            this._speed = speed\r\n            this._loop = loop // loop, once set, cannot be changed\r\n\r\n            // initializing state variables\r\n            this.playedFrom = 0 // starting point of the current play session\r\n            this.offset = 0 // marker between starting and end points indicating playing progress\r\n            this.playTill = buffer.duration // end point of the current play session\r\n            this.lastPlayedAt = 0 // last time the play method was invoked\r\n            this.playing = false // the sound starts off paused\r\n            this.onEnded = () => this.playing = false\r\n            Sound.onCreated(this)\r\n        }\r\n        pause() {\r\n            if (!this.playing) { return }\r\n            const timeSinceLastPlayed = ctx.currentTime - this.lastPlayedAt\r\n            const newOffset = this.offset + timeSinceLastPlayed\r\n            const duration = this.playTill - this.playedFrom\r\n            this.offset = this.loop ? newOffset % duration: Math.min(newOffset, duration)\r\n            this._stop()\r\n        }\r\n        resume() {\r\n            if (this.playing || !Sound._on) { return }\r\n            const { playedFrom, offset, playTill } = this\r\n            const resFrom = playedFrom + offset\r\n            const duration = playTill - resFrom\r\n            this._play(resFrom, duration)\r\n        }\r\n        play(from = 0, _duration, volume) { \r\n            if (this.playing || !Sound._on) { return }\r\n            if (volume) { this.volume = volume }\r\n            const duration = _duration || this.buffer.duration\r\n            this.playedFrom = from // starting point\r\n            this.offset = 0 // marker between starting point and endpoint, which indicates playing progress\r\n            this.playTill = from + duration // end point\r\n            this.lastPlayedAt = ctx.currentTime\r\n            this._play(from, duration)\r\n        }\r\n        set speed(val) {\r\n            this._speed = val\r\n            this.sourceNode && this.sourceNode.playbackRate.setValueAtTime(val, 0)\r\n        }\r\n        set volume(val) {\r\n            this.volumeNode.gain.setValueAtTime(val, 0)\r\n        }\r\n        set pan(val) {\r\n            this.panNode.pan.setValueAtTime(val, 0)\r\n        }\r\n        get pan() {\r\n            this.panNode.pan.value\r\n        }\r\n        _stop() {\r\n            const { sourceNode  } = this\r\n            sourceNode && sourceNode.stop(0)\r\n        }\r\n        _play(from, duration) {\r\n            const { buffer, panNode, volumeNode, _loop, _speed } = this\r\n            const sourceNode = ctx.createBufferSource()\r\n            const startSourceNode = getBufferNodeStartFn(sourceNode)\r\n            this.sourceNode = sourceNode\r\n            this.lastPlayedAt = ctx.currentTime\r\n            \r\n            sourceNode.buffer = buffer\r\n            sourceNode.loop = _loop\r\n            sourceNode.playbackRate.value = _speed\r\n\r\n            sourceNode.connect(panNode)\r\n            panNode.connect(volumeNode)\r\n            volumeNode.connect(ctx.destination)\r\n\r\n            startSourceNode(ctx.currentTime, from, duration)\r\n\r\n            sourceNode.onended = this.onEnded\r\n            this.playing = true\r\n        }\r\n    }\r\n    return Sound\r\n}\r\n\r\nexport default createWebAudio","const createNoAudio = () => {\r\n    return class {\r\n        static off() {}\r\n        static on() { }\r\n        static loadResource = src => {\r\n            return Promise.resolve(src)\r\n        }\r\n        static destroy() { }\r\n        pause() { }\r\n        resume() { }\r\n        play() { }\r\n    }\r\n}\r\nexport default createNoAudio","import startGameLoop from \"./startGameLoop\"\r\nimport Texture from \"@lib/entities/Texture\"\r\nimport Sound from \"@utils/Sound\"\r\n\r\nclass Game {\r\n    _activeScreen = null\r\n    _sounds = []\r\n    paused = false\r\n    pausedSounds = []\r\n    constructor({ renderer, assetsCache, screenFactories, activeScreen }) {\r\n        this._assetsCache = assetsCache\r\n        this.renderer = renderer\r\n\r\n        const screenNames = Object.keys(screenFactories)\r\n        screenNames.forEach(screenName => {\r\n            const createScreen = screenFactories[screenName]\r\n            this[screenName] = createScreen(this)\r\n            this[screenName].name = screenName\r\n        })\r\n\r\n        Texture.injectAssetsCache(assetsCache)\r\n        Sound.onCreated = soundObj => { this._sounds.push(soundObj) }\r\n        Sound.onDestroyed = soundObj => { this._sounds = this._sounds.filter(s => s !== soundObj ) }\r\n        if (activeScreen) { this.switchScreen(activeScreen) }\r\n    }\r\n    get assetsCache() { return this._assetsCache }\r\n    switchScreen(screenName, ...params) {\r\n        if (this._activeScreen) {\r\n            this._activeScreen.onExit()\r\n        }\r\n        this._activeScreen = this[screenName]\r\n        this.renderer.scene = this._activeScreen\r\n        if (this._activeScreen.background) { this.renderer.changeBackground(this._activeScreen.background) }\r\n        this._activeScreen.onEnter(...params)\r\n    }\r\n    disposeScreen(screen) {\r\n        this[screen.name] = null\r\n    }\r\n    _update(dt, t) {\r\n       if (this._activeScreen.update) {\r\n           this._activeScreen.update(dt, t)\r\n       }\r\n    }\r\n    start() {\r\n        this.loopControls = startGameLoop({\r\n            mainUpdateFn: () => {},\r\n            renderer: this.renderer\r\n        })\r\n    }\r\n    stopSounds() {\r\n        this._sounds.forEach(sound => {\r\n            sound.pause()\r\n        })\r\n    }\r\n    pauseSounds() {\r\n        this.pausedSounds = this._sounds.filter(sound => sound.playing) // sounds that were playing before pause call\r\n        this._sounds.forEach(sound => {\r\n            sound.pause()\r\n        })\r\n    }\r\n    turnOffSound() {\r\n        this.stopSounds()\r\n        Sound.off()\r\n    }\r\n    turnOnSound() {\r\n        Sound.on()\r\n    }\r\n    pause() {\r\n        if (this.paused) { return }\r\n        this.paused = true\r\n        this.loopControls.pause()\r\n        this.pauseSounds()\r\n        return \r\n    }\r\n    resume() {\r\n        if (!this.paused) { return }\r\n        this.paused = false\r\n        this.loopControls.resume()\r\n        this.pausedSounds.forEach(sound => {\r\n            sound.resume()\r\n        })\r\n    }\r\n    reset() {\r\n        this.paused = false\r\n        this.loopControls.resume()\r\n        this.pausedSounds = null\r\n    }\r\n}\r\n\r\nexport default Game","class UI {\r\n    static query(q, root) {\r\n        return new UI(null, q, root)\r\n    }\r\n    static create(el) {\r\n        return new UI(document.createElement(el))\r\n    }\r\n    static bounds(el) {\r\n        return el.domNode.getBoundingClientRect()\r\n    }\r\n    constructor(domNode, query, root = document) {\r\n        this.domNode = domNode || root.querySelector(query)\r\n        if (!this.domNode) {\r\n            throw new Error(\"one or more invalid constructor parameters\")\r\n        }\r\n        if (!this.domNode.getBoundingClientRect) {\r\n            return\r\n        }\r\n        this.x = 0\r\n        this.y = 0\r\n        if (!!domNode) { return }\r\n        const { width, height } = this.domNode.getBoundingClientRect()\r\n        this.width = width\r\n        this.height = height\r\n    }\r\n    get(query) {\r\n        return UI.query(query, this.domNode)\r\n    }\r\n    hide() {\r\n        this.domNode.style.opacity = 0\r\n    }\r\n    show() {\r\n        this.domNode.style.opacity = 1\r\n    }\r\n    get classList() {\r\n        return this.domNode.classList\r\n    }\r\n    set pos({ x, y }) {\r\n        if (x) { \r\n            this.x = x\r\n            this.domNode.style.left = `${x}px`\r\n        }\r\n        if (y) {\r\n            this.y = y\r\n            this.domNode.style.top = `${y}px`\r\n        }\r\n    }\r\n    set content(html) {\r\n        this.domNode.innerHTML = html\r\n    }\r\n    clear() {\r\n        this.content = \"\"\r\n    }\r\n    on(event, callback) {\r\n        this.domNode.addEventListener(event, callback)\r\n    }\r\n    off(event, callback) {\r\n        this.domNode.removeEventListener(event, callback)\r\n    }\r\n    add(el) {\r\n        this.domNode.appendChild(el.domNode || el)\r\n        return this\r\n    }\r\n}\r\n\r\nexport default UI","export const CNV_2D = \"canvas\"\r\nexport const WEBGL = \"webgl\"","import * as types from \"@lib/entities/types\"\r\nimport Rect from \"@lib/entities/Rect\"\r\nimport config from \"@config\"\r\nimport { getHitbox } from \"@utils/entity\"\r\nimport { CNV_2D } from \"./apis\"\r\n\r\nclass Canvas2DRenderer {\r\n    api = CNV_2D\r\n    constructor({ cnvQry, scene, viewport, background=\"#ffffff\" }) {\r\n        const canvas = document.querySelector(cnvQry)\r\n        this.canvas = canvas\r\n        this.scene = scene\r\n        this.ctx = canvas.getContext(\"2d\")\r\n\r\n        this.changeBackground(background)\r\n        this.resize(viewport)\r\n        viewport.on(\"change\", this.resize.bind(this))\r\n    }\r\n    changeBackground(newBackground) {\r\n        this.canvas.style.background = newBackground\r\n    }\r\n    resize({ width, height }) {\r\n        this.canvas.setAttribute(\"width\", width * config.devicePixelRatio)\r\n        this.canvas.setAttribute(\"height\", height * config.devicePixelRatio)\r\n        this.canvas.style.width = `${width}px`\r\n        this.canvas.style.height = `${height}px`\r\n    }\r\n    setTexatlas(img, meta) {\r\n        this.img = img\r\n        this.meta = meta\r\n    }\r\n    render(node) {\r\n        this.ctx.translate(node.smooth ? node.pos.x: Math.round(node.pos.x), node.smooth ? node.pos.y: Math.round(node.pos.y))\r\n        if (node.initialRotation) {\r\n            this.ctx.rotate(node.initialRotation)\r\n            this.ctx.translate(node.initialPivotX, 0)\r\n        }\r\n    \r\n        node.anchor && this.ctx.translate(node.anchor.x, node.anchor.y)\r\n        node.rotation && this.ctx.rotate(node.rotation)\r\n        node.anchor && this.ctx.translate(-node.anchor.x, -node.anchor.y)\r\n        node.pivot && this.ctx.translate(node.pivot.x, node.pivot.y)\r\n        node.scale && this.ctx.scale(node.scale.x, node.scale.y)\r\n        switch(node.type) {\r\n            case types.texregion:\r\n                const meta = this.meta[node.frame]\r\n                this.ctx.drawImage(this.img, meta.x, meta.y, node.w, node.h, 0, 0, node.w, node.h)\r\n            break\r\n            case types.texture:\r\n                this.ctx.drawImage(node.img, 0, 0)\r\n            break\r\n            case types.rect:\r\n                if (node.fill) {\r\n                    this.ctx.fillStyle = node.fill\r\n                    this.ctx.fillRect(0, 0, node.width, node.height)\r\n                }\r\n                if (node.stroke) {\r\n                    this.ctx.strokeStyle = node.stroke\r\n                    this.ctx.lineWidth = node.strokeWidth\r\n                    this.ctx.strokeRect(0, 0, node.width, node.height)\r\n                }\r\n            break\r\n            // default:\r\n            //     if(node.pos.x < 0 && node.pos.y < 0) { console.log(node.pos) }\r\n        }\r\n    }\r\n    renderRecursively(node = this.scene) {\r\n        if (!node._visible) { return }\r\n        if (node === this.scene) { this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height) }\r\n\r\n        this.ctx.save()\r\n        if (node.alpha) {\r\n            this.ctx.globalAlpha = node.alpha\r\n        }\r\n        if (node.blendMode) {\r\n            this.ctx.globalCompositeOperation = node.blendMode\r\n        }\r\n        this.render(node)\r\n        if (node.debug) {\r\n            const hitbox = node.hitbox || getHitbox(node)\r\n            this.ctx.save()\r\n            this.render(new Rect({ pos: { ...hitbox }, ...hitbox, stroke: \"red\", strokeWidth: 1  }))\r\n            this.ctx.restore()\r\n        }\r\n        if (node.children) {\r\n            for (let i = 0, len = node.children.length; i < len; i++) {\r\n                this.renderRecursively(node.children[i])\r\n            }\r\n        }\r\n        this.ctx.restore()\r\n    }\r\n}\r\n\r\nexport default Canvas2DRenderer","export default (gl, shaderSrc, shaderType) => {\r\n    const shader = gl.createShader(shaderType)\r\n    gl.shaderSource(shader, shaderSrc)\r\n    gl.compileShader(shader)\r\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS)\r\n    if (!success) {\r\n        throw new Error(`Couldn't compile shader: ${gl.getShaderInfoLog(shader)}`)\r\n    }\r\n    return shader\r\n}","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import { mat3, vec2 } from \"gl-matrix\";\r\n\r\nexport class IMatrix {\r\n    static create() {\r\n        return mat3.create();\r\n    }\r\n\r\n    static identity(mat) {\r\n        mat3.identity(mat);\r\n        return mat;\r\n    }\r\n\r\n    constructor() {\r\n        this.tMat = IMatrix.create();\r\n        this.sMat = IMatrix.create();\r\n        this.rMat = IMatrix.create();\r\n    }\r\n\r\n    scaled(x, y = x) {\r\n        const mat = IMatrix.identity(this.sMat);\r\n        mat[0] = x;\r\n        mat[4] = y;\r\n        return mat;\r\n    }\r\n\r\n    rotated(rad) {\r\n        const mat = IMatrix.identity(this.rMat);\r\n        const s = Math.sin(rad);\r\n        const c = Math.cos(rad);\r\n        mat[0] = c;\r\n        mat[1] = s;\r\n        mat[3] = -s;\r\n        mat[4] = c;\r\n        return mat;\r\n    }\r\n\r\n    translated(x, y) {\r\n        const mat = IMatrix.identity(this.tMat);\r\n        mat[6] = x;\r\n        mat[7] = y;\r\n        return mat;\r\n    }\r\n}\r\n\r\nclass Matrix {\r\n    constructor() {\r\n        this.iMat = new IMatrix();\r\n        this.temp = IMatrix.create();\r\n        this.vec = vec2.create();\r\n    }\r\n\r\n    create() {\r\n        return IMatrix.create();\r\n    }\r\n\r\n    identity(mat) {\r\n        return IMatrix.identity(mat);\r\n    }\r\n\r\n    multiply(a, b) {\r\n        const temp = this.temp;\r\n        temp[0] = a[0] * b[0] + a[1] * b[3] + a[2] * b[6];\r\n        temp[1] = a[0] * b[1] + a[1] * b[4] + a[2] * b[7];\r\n        temp[2] = a[0] * b[2] + a[1] * b[5] + a[2] * b[8];\r\n        temp[3] = a[3] * b[0] + a[4] * b[3] + a[5] * b[6];\r\n        temp[4] = a[3] * b[1] + a[4] * b[4] + a[5] * b[7];\r\n        temp[5] = a[3] * b[2] + a[4] * b[5] + a[5] * b[8];\r\n        temp[6] = a[6] * b[0] + a[7] * b[3] + a[8] * b[6];\r\n        temp[7] = a[6] * b[1] + a[7] * b[4] + a[8] * b[7];\r\n        temp[8] = a[6] * b[2] + a[7] * b[5] + a[8] * b[8];\r\n        for (let i = 0; i < 9; i++) {\r\n            b[i] = temp[i];\r\n        }\r\n    }\r\n\r\n    rotate(mat, rad) {\r\n        mat3.rotate(mat, mat, rad);\r\n    }\r\n\r\n    scale(mat, x, y) {\r\n        vec2.set(this.vec, x, y);\r\n        mat3.scale(mat, mat, this.vec);\r\n    }\r\n\r\n    translate(mat, x, y) {\r\n        vec2.set(this.vec, x, y);\r\n        mat3.translate(mat, mat, this.vec);\r\n    }\r\n}\r\n\r\nexport default Matrix;\r\n","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import config from \"@config\";\r\nimport getContext from \"./utils/getContext\";\r\nimport createShader from \"./utils/createShader\";\r\nimport createProgram from \"./utils/createProgram\";\r\nimport vertexShaderSrc from \"./shaders/vertexShader\";\r\nimport fragShaderSrc from \"./shaders/fragmentShader\";\r\nimport MatrixUtil, { IMatrix } from \"./utils/Matrix\";\r\nimport createMatStackMixin from \"./createMatStackMixin\";\r\nimport { WEBGL } from \"../apis\";\r\n\r\n\r\nclass Webgl2Renderer {\r\n    api = WEBGL;\r\n    defBlend = \"source-over\"; // global blendMode\r\n    defTint = [0, 0, 0, 0]; // default tint\r\n    viewport = null\r\n    constructor({ image, cnvQry, viewport, scene, clearColor = [0, 0, 0, 0], background = \"#000000\" }) {\r\n        this.canvas = document.querySelector(cnvQry);\r\n        this.gl = getContext(cnvQry);\r\n        this.program = this.initProgram();\r\n        this.image = image;\r\n        this.scene = scene;\r\n        this.clearColor = clearColor;\r\n        this.initBuffers();\r\n        this.initUniforms();\r\n        this.matrixUtil = new MatrixUtil();\r\n        this.setupGlSettings();\r\n        this.initViewport(viewport);\r\n        Object.assign(this, createMatStackMixin()); // Must be done before calling resize\r\n        this.resize(viewport);\r\n        this.viewport = viewport\r\n        this.changeBackground(background);\r\n    }\r\n\r\n    initProgram() {\r\n        const gl = this.gl;\r\n        const program = createProgram(\r\n            gl,\r\n            createShader(gl, vertexShaderSrc, gl.VERTEX_SHADER),\r\n            createShader(gl, fragShaderSrc, gl.FRAGMENT_SHADER)\r\n        );\r\n        gl.useProgram(program);\r\n        return program;\r\n    }\r\n\r\n    initBuffers() {\r\n        const gl = this.gl;\r\n\r\n        // Create and bind VAO\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n\r\n        const posBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n            0, 0,\r\n            1, 0,\r\n            0, 1,\r\n            1, 0,\r\n            1, 1,\r\n            0, 1\r\n        ]), gl.STATIC_DRAW);\r\n\r\n        const aVertPos = gl.getAttribLocation(this.program, \"vert_pos\");\r\n        gl.enableVertexAttribArray(aVertPos);\r\n        gl.vertexAttribPointer(aVertPos, 2, gl.FLOAT, false, 0, 0);\r\n\r\n        // Unbind VAO\r\n        gl.bindVertexArray(null);\r\n    }\r\n\r\n    initUniforms() {\r\n        const gl = this.gl;\r\n        this.uMat = gl.getUniformLocation(this.program, \"mat\");\r\n        this.uTexMat = gl.getUniformLocation(this.program, \"tex_mat\");\r\n        this.uOverlay = gl.getUniformLocation(this.program, \"overlay\"); // px_mod flag\r\n        this.uOverlayCol = gl.getUniformLocation(this.program, \"overlay_col\"); // uniform3fv\r\n        this.uTint = gl.getUniformLocation(this.program, \"tint\"); // current tint (uniform4fv)\r\n        this.uGTint = gl.getUniformLocation(this.program, \"g_tint\"); // global tint (applies to all sprites)\r\n        this.uAlpha = gl.getUniformLocation(this.program, \"alpha\");\r\n    }\r\n\r\n    setupGlSettings() {\r\n        const gl = this.gl;\r\n        gl.enable(gl.BLEND);\r\n        this.setDefaultSettings();\r\n    }\r\n\r\n    setDefaultSettings() {\r\n        this.overlay = false;\r\n        this.alpha = 1;\r\n        this.gTint = this.defTint;\r\n        this.blendMode = this.defBlend;\r\n    }\r\n\r\n    initViewport(viewport) {\r\n        viewport.on(\"change\", this.resize.bind(this));\r\n    }\r\n\r\n    set clearColor(arr) {\r\n        this.gl.clearColor(...arr);\r\n    }\r\n\r\n    set alpha(val) {\r\n        this.gl.uniform1f(this.uAlpha, val);\r\n    }\r\n\r\n    set gTint(val) {\r\n        this.gl.uniform4fv(this.uGTint, val);\r\n    }\r\n\r\n    set tint(val) {\r\n        this.gl.uniform4fv(this.uTint, val);\r\n    }\r\n\r\n    set blendMode(val) {\r\n        const gl = this.gl;\r\n        switch (val) {\r\n            default:\r\n                gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n        }\r\n    }\r\n\r\n    set overlay(val) {\r\n        this.gl.uniform1i(this.uOverlay, val ? 1 : 0);\r\n        if (val) {\r\n            this.gl.uniform3fv(this.uOverlayCol, val);\r\n        }\r\n    }\r\n\r\n    setTexatlas(image, meta) {\r\n        const gl = this.gl;\r\n        const texture = gl.createTexture();\r\n        const uTexUnit = gl.getUniformLocation(this.program, \"tex_unit\");\r\n        const texUnit = 0;\r\n        this.meta = meta;\r\n        this.image = image;\r\n        gl.activeTexture(gl.TEXTURE0 + texUnit);\r\n        gl.uniform1i(uTexUnit, texUnit);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n\r\n    translate(x, y) {\r\n        this.matrixUtil.translate(this.getCurMat(), x, y);\r\n    }\r\n\r\n    rotate(rad) {\r\n        this.matrixUtil.rotate(this.getCurMat(), rad);\r\n    }\r\n\r\n    scale(x, y) {\r\n        this.matrixUtil.scale(this.getCurMat(), x, y);\r\n    }\r\n\r\n    clear() {\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\r\n    }\r\n\r\n    changeBackground(bgColor, imageUrl) {\r\n        this.canvas.setAttribute(\"style\", `background-image:url(${imageUrl}); background-color: ${bgColor} !important; width: ${config.viewport.width}px; height: ${config.viewport.height};`)\r\n    }\r\n\r\n    resize({ width, height }) {\r\n        const absWidth = Math.round(width * config.devicePixelRatio);\r\n        const absHeight = Math.round(height * config.devicePixelRatio);\r\n\r\n        this.canvas.setAttribute(\"width\", absWidth);\r\n        this.canvas.setAttribute(\"height\", absHeight);\r\n        this.gl.viewport(0, 0, absWidth, absHeight);\r\n\r\n        this.canvas.style.width = `${width}px`;\r\n        this.canvas.style.height = `${height}px`;\r\n\r\n        this.matrixUtil.identity(this.firstMat);\r\n        this.matrixUtil.scale(this.firstMat, 1, -1);\r\n        this.matrixUtil.translate(this.firstMat, -1, -1);\r\n        this.matrixUtil.scale(this.firstMat, 2 / absWidth, 2 / absHeight);\r\n    }\r\n\r\n    render(node) {\r\n        const { rotation, anchor } = node;\r\n        this.translate(Math.round(node.pos.x), Math.round(node.pos.y));\r\n        if (node.initialRotation) {\r\n            this.rotate(node.initialRotation);\r\n            this.translate(node.initialPivotX, 0);\r\n        }\r\n        if (rotation) {\r\n            anchor && this.translate(anchor.x, anchor.y);\r\n            this.rotate(rotation);\r\n            anchor && this.translate(-anchor.x, -anchor.y);\r\n        }\r\n        if (node.scale) {\r\n            this.scale(node.scale.x, node.scale.y);\r\n        }\r\n        if (node.blendMode) {\r\n            this.blendMode = node.blendMode;\r\n        }\r\n        if (!node.frame) {\r\n            return; // if the node isn't renderable, just do transforms\r\n        }\r\n\r\n        const meta = this.meta[node.frame];\r\n        const srcX = meta.x;\r\n        const srcY = meta.y;\r\n        const width = node.w;\r\n        const height = node.h;\r\n\r\n        this.scale(width, height);\r\n\r\n        if (node.texMatFrame !== node.frame) {\r\n            node.texMat = this.matrixUtil.create();\r\n            node.texMatFrame = node.frame;\r\n            this.matrixUtil.translate(node.texMat, srcX / this.image.width, srcY / this.image.height);\r\n            this.matrixUtil.scale(node.texMat, width / this.image.width, height / this.image.height);\r\n        }\r\n\r\n        this.gl.uniformMatrix3fv(this.uMat, false, this.getCurMat());\r\n        this.gl.uniformMatrix3fv(this.uTexMat, false, node.texMat);\r\n\r\n        // Bind VAO before drawing\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n        this.gl.bindVertexArray(null); // Unbind VAO\r\n\r\n        this.scale(1 / width, 1 / height);\r\n    }\r\n\r\n    renderRecursively(node = this.scene) {\r\n        if (!node._visible) { return; }\r\n        if (node === this.scene) { this.clear(); }\r\n        this.save();\r\n\r\n        this.setAlphaAndBlendMode(node);\r\n        this.render(node);\r\n\r\n        if (node.children) {\r\n            for (const child of node.children) {\r\n                this.renderRecursively(child);\r\n            }\r\n        }\r\n\r\n        this.resetAlphaAndBlendMode(node);\r\n        this.restore();\r\n    }\r\n\r\n    setAlphaAndBlendMode(node) {\r\n        if (node.blendMode) {\r\n            this.blendMode = node.blendMode;\r\n        }\r\n        if (node.alpha) {\r\n            this.alpha = node.alpha;\r\n        }\r\n        if (node.overlay) {\r\n            this.overlay = node.overlay;\r\n        }\r\n        if (node.tint) {\r\n            this.tint = node.tint;\r\n        }\r\n    }\r\n\r\n    resetAlphaAndBlendMode(node) {\r\n        if (node.overlay) {\r\n            this.overlay = false;\r\n        }\r\n        if (node.tint) {\r\n            this.tint = this.defTint;\r\n        }\r\n        if (node.alpha) {\r\n            this.alpha = 1;\r\n        }\r\n        if (node.blendMode) {\r\n            this.blendMode = this.defBlend;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Webgl2Renderer;","import { IMatrix } from \"./utils/Matrix\"\r\nconst createMatStackMixin = (matrixUtil) => {\r\n    const mixin = {}\r\n    mixin.mStack = []\r\n    mixin.mStack.push(IMatrix.create()) // identity matrix\r\n    mixin.curMatIdx = 0\r\n    mixin.curMat = mixin.mStack[0]\r\n    mixin.firstMat = mixin.mStack[0]\r\n    mixin.getCurMat = function() {\r\n        return this.curMat\r\n    }\r\n    mixin.save = function() {\r\n        this.curMatIdx += 1\r\n        this.mStack[this.curMatIdx] =  this.mStack[this.curMatIdx] || IMatrix.create()\r\n        this.curMat = this.mStack[this.curMatIdx]\r\n        // copying previous matrix into the current one (can be interpreted as cloning the previous matrix and pushing it into the stack)\r\n        const prev = this.mStack[this.curMatIdx - 1]\r\n        for (let i = 0; i < 9; i++) {\r\n            this.curMat[i] = prev[i]\r\n        }\r\n    }\r\n    mixin.restore = function() {\r\n        if (this.curMatIdx === 0) {\r\n            throw new Error(\"couldn't restore state: no save point could be found\")\r\n        }\r\n        // unwinding the matrix (popping the stack)\r\n        this.curMatIdx -= 1\r\n        this.curMat = this.mStack[this.curMatIdx]\r\n    }\r\n    return mixin\r\n}\r\n\r\nexport default createMatStackMixin","export default cnvSelector => {\r\n    const canvas = document.querySelector(cnvSelector)\r\n    const gl = canvas.getContext(\"webgl2\")\r\n    if (!gl) {\r\n        throw new Error(`Webgl support not available`)\r\n    }\r\n    return gl\r\n}","export default (gl, vertShader, fragShader) => {\r\n    const program = gl.createProgram()\r\n    gl.attachShader(program, vertShader)\r\n    gl.attachShader(program, fragShader)\r\n    gl.linkProgram(program)\r\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS)\r\n    if (!success) {\r\n        throw new Error(`Couldnt link shaders: ${gl.getProgramInfoLog(program)}`)\r\n    }\r\n    return program\r\n}","const vertexShaderSrc = \r\n`   #version 300 es\r\n\r\n    in vec2 vert_pos;\r\n    \r\n    uniform mat3 mat;\r\n    uniform mat3 tex_mat;\r\n\r\n    out vec2 tex_coords;\r\n\r\n    void main() {\r\n        \r\n        tex_coords = (tex_mat * vec3(vert_pos, 1)).xy;\r\n        \r\n        gl_Position = vec4((mat * vec3(vert_pos, 1)).xy, 0, 1);\r\n    }\r\n`\r\n\r\nexport default vertexShaderSrc","const fragShaderSrc = \r\n`   #version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 tex_coords;\r\n    \r\n    uniform sampler2D tex_unit;\r\n    uniform bool overlay;\r\n    uniform vec3 overlay_col;\r\n    uniform vec4 g_tint;\r\n    uniform vec4 tint;\r\n    uniform float alpha;\r\n\r\n    out vec4 out_color;\r\n    void main() {\r\n        vec4 px_col = texture(tex_unit, tex_coords);\r\n        if (overlay) {\r\n            out_color = vec4(overlay_col, px_col.a * alpha);\r\n            return;\r\n        } \r\n        out_color = vec4((px_col + g_tint + tint).rgb, px_col.a * alpha);\r\n    }\r\n`\r\n\r\nexport default fragShaderSrc","import Sound from \"@utils/Sound\"\r\nimport { offlineErrMsg } from \"@lib/constants\"\r\n\r\nconst loadSoundResource = Sound.loadResource\r\nconst loadImgResource = url => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image()\r\n        img.src = url\r\n        img.onload = () => resolve(img)\r\n        img.onerror = () => reject({ message: offlineErrMsg })\r\n    })\r\n}\r\nconst loadDataResource = url => {\r\n    return new Promise((resolve, reject) => {\r\n        fetch(url)\r\n            .then(res => res.json())\r\n            .then(data => resolve(data))\r\n            .catch(e => reject({ message: offlineErrMsg }))\r\n    })\r\n}\r\nconst types = Object.freeze({ SOUND: \"SOUND\", IMAGE: \"IMAGE\", DATA: \"DATA\" })\r\n\r\n\r\nconst loadFns = {\r\n    [types.SOUND]: loadSoundResource,\r\n    [types.IMAGE]: loadImgResource,\r\n    [types.DATA]:loadDataResource\r\n}\r\n\r\nconst inferType = url => {\r\n    if (url.match(/.(jpe?g)|(png)$/)) {\r\n        return types.IMAGE\r\n    } else if (url.match(/.(mp3)|(wav)|(ogg)$/)) {\r\n        return types.SOUND\r\n    } else if (url.match(/.(cson|bson)$/)) {\r\n        return types.DATA\r\n    }\r\n}\r\n\r\nconst loadResource = url => {\r\n    const type = inferType(url)\r\n    const load = loadFns[type]\r\n    return load(url)\r\n}\r\n\r\nexport default loadResource","import Observable from \"../Observable\"\r\nimport loadResource from \"./loadResource\"\r\n\r\nclass AssetLoader extends Observable { // static class\r\n    assets = {}\r\n    constructor() {\r\n        super([ \"prog\", \"prog-end\", \"load\", \"error\" ]) // defining a set of supported events\r\n    }\r\n    load(assets) {\r\n        const len = assets.length\r\n        const thenable = Promise.resolve()\r\n        assets.reduce((loadPrevResources, asset, index) => {\r\n            return loadPrevResources.then(() => {\r\n                const url = typeof asset === \"string\" ? asset: asset.url\r\n                return loadResource(url).then(resource => {\r\n                    this.assets[url] = resource\r\n                    this.emit(\"prog\", (index + 1) / len, asset.msg)\r\n                })\r\n            })\r\n        }, thenable).then(() => {\r\n            this.emit(\"prog-end\") // upon 100% progress (gets called before \"load\" event)\r\n            this.emit(\"load\")\r\n            this.off(\"prog\") // clearing all progress observers\r\n        }).catch(e => {\r\n            this.emit(\"error\", e)\r\n        })\r\n    }\r\n    unload(url) {\r\n        this.assets[url] = null\r\n    }\r\n    get(assetUrl) {\r\n        return this.assets[assetUrl]\r\n    }\r\n}\r\n\r\nexport default AssetLoader","import Observable from \"@lib/utils/Observable\"\r\n\r\nconst castToNum = (val, errParam) => {\r\n    const num = Number(val)\r\n    if (num !== 0 && !num) {\r\n        throw new Error(`Attempting to set invalid ${errParam}: ${val}`)\r\n    }\r\n    return num\r\n}\r\n\r\nclass Storage extends Observable {\r\n    constructor(strat) {\r\n        super([ \"orb-update\", \"music-update\", \"sound-update\" ])\r\n        this.strat = strat\r\n        const txtData = strat.get()\r\n        this.data = !!txtData ? JSON.parse(txtData): { \r\n            curLevel: 1,\r\n            orbCount: 6,\r\n            hiscores: {},\r\n            music: true,\r\n            sound: true\r\n        }\r\n    }\r\n    setNum(key, val) {\r\n        const num = castToNum(val, key)\r\n        this.data[key] = num\r\n        this.save(this.data)\r\n        return num\r\n    }\r\n    setCurLevel(val) {\r\n        this.setNum(\"curLevel\", val)\r\n    }\r\n    setOrbCount(val) {\r\n        const num = this.setNum(\"orbCount\", val)\r\n        this.emit(\"orb-update\", num)\r\n    }\r\n    setHiscore(level, val) {\r\n        const time  = castToNum(val, \"hiscore\")\r\n        this.data.hiscores[String(level)] = time\r\n        this.save(this.data)\r\n    }\r\n    getCurLevel() {\r\n        return this.data.curLevel\r\n    }\r\n    getOrbCount() {\r\n        return this.data.orbCount\r\n    }\r\n    getHiscore(level) {\r\n        return this.data.hiscores[String(level)]\r\n    }\r\n    getMusic() {\r\n        return this.data.music\r\n    }\r\n    setMusic(val) {\r\n        this.data.music = val\r\n        this.emit(\"music-update\", this.data.music)\r\n        this.save(this.data)\r\n    }\r\n    getSound() {\r\n        return this.data.sound\r\n    }\r\n    setSound(val) {\r\n        this.data.sound = val\r\n        this.emit(\"sound-update\", this.data.sound)\r\n        this.save(this.data)\r\n    }\r\n    save(data) {\r\n        this.strat.set(JSON.stringify(data))\r\n    }\r\n}\r\n\r\nexport default Storage","class SDK {\r\n    periodBetweenAds = 45 * 1000\r\n    adLastPlayedAt = Date.now() - 45 * 1000\r\n    constructor(strategy) {\r\n        this.strat = strategy\r\n    }\r\n    rvaSupported() {\r\n        if (!this.strat) return false\r\n        return this.strat.rva\r\n    }\r\n    setLoadProg(val) {\r\n        if (!this.strat) return\r\n        this.strat.setLoadProg(val)\r\n    }\r\n    signalLoad() {\r\n        if (!this.strat) return Promise.resolve()\r\n        return this.strat.signalLoad()\r\n    }\r\n    playRva() {\r\n        if (!this.strat) return Promise.reject()\r\n        this.adLastPlayedAt = Date.now()\r\n        return this.strat.playRva()\r\n    }\r\n    canPlay() {\r\n        return Date.now() - this.adLastPlayedAt < this.periodBetweenAds\r\n    }\r\n    playIntstAd() {\r\n        if (!this.strat || this.canPlay()) {\r\n            console.log(\"Ad throttled: interstitial ad frequency exceeded\")\r\n            return Promise.reject()\r\n        }\r\n        this.adLastPlayedAt = Date.now()\r\n        return this.strat.playIntstAd()\r\n    }\r\n    prerollAd() {\r\n        if (!this.strat) return Promise.reject()\r\n        this.adLastPlayedAt = Date.now()\r\n        return this.strat.prerollAd()\r\n    }\r\n    setOnPause(fn) {\r\n        if (!this.strat) return\r\n        this.strat.setOnPause(fn)\r\n    }\r\n    setOnResume(fn) {\r\n        if (!this.strat) return\r\n        this.strat.setOnResume(fn)\r\n    }\r\n}\r\n\r\nexport default SDK","import level1 from \"@assets/levels/level1.cson\"\r\nimport level2 from \"@assets/levels/level2.cson\"\r\nimport level3 from \"@assets/levels/level3.cson\"\r\nimport level4 from \"@assets/levels/level4.cson\"\r\nimport level5 from \"@assets/levels/level5.cson\"\r\nimport level6 from \"@assets/levels/level6.cson\"\r\nimport level7 from \"@assets/levels/level7.cson\"\r\nimport level8 from \"@assets/levels/level8.cson\"\r\nimport level9 from \"@assets/levels/level9.cson\"\r\nimport level10 from \"@assets/levels/level10.cson\"\r\nexport default [\r\n    {\r\n        id: level1,\r\n        music: \"music1\"\r\n    },\r\n    {\r\n        id: level2,\r\n        bgPos: \"15% 75w%\"\r\n\r\n    },\r\n    {\r\n        id: level3,\r\n    },\r\n    {\r\n        id: level4,\r\n        music: \"music1\"\r\n    },\r\n    {\r\n        id: level5,\r\n        music: \"\"\r\n    },\r\n    {\r\n        id: level6,\r\n        music: \"music1\",\r\n        bgPos: \"-50%\"\r\n    },\r\n    {\r\n        id: level7,\r\n        bgPos:  \"40% 80%\"\r\n    },\r\n    {\r\n        id: level8,\r\n        music: \"\",\r\n        bgPos: \"40% 32%\"\r\n    },\r\n    {\r\n        id: level9,\r\n        music: \"music1\",\r\n        bgPos: \"75% 30%\"\r\n    },\r\n    {\r\n        id: level10,\r\n        music: \"\",\r\n        bgPos: \"40% 80%\"\r\n    }\r\n]","export const LOADING = \"LOADING\"\r\nexport const MAIN_MENU = \"MAIN_MENU\"\r\nexport const LEVEL = \"LEVEL\"\r\nexport const GAME = \"GAME\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import config from \"@config\"\r\nimport UI from \"@lib/utils/UI\"\r\nimport { calcAligned, calcStacked } from \"@utils/entity\"\r\nimport { offlineErrMsg } from \"@lib/constants\"\r\nimport styles from \"./style.css\"\r\n\r\nconst progBarDims = {\r\n    width: 150,\r\n    height: 25\r\n}\r\n\r\nconst INFO = \"info\"\r\nconst MSG = \"msg\"\r\nconst PROG_BAR = \"prog-bar\"\r\nconst PROG_IND = \"prog-ind\"\r\nconst progressBar = (width, height, barId, indId) => {\r\n    return `\r\n        <div id=\"${barId}\" class=\"${styles.bar}\" style=\"width: ${width}px; height: ${height}px; background: #ffe6d5; z-index: 99999;\">\r\n        </div>\r\n        <div id=\"${indId}\" class=\"${styles.bar}\" style=\"width: 4px; height: ${height}px; background: tomato; z-index: 100000;\">\r\n        </div>\r\n    `\r\n}\r\n\r\nconst render = (barId, indId, infoId, msgId) => {\r\n   return `\r\n        ${progressBar(progBarDims.width, progBarDims.height, PROG_BAR, PROG_IND, barId, indId)}\r\n        <div id=\"${infoId}\" class=\"${styles.txt} ${styles.info}\">loading</div>\r\n        <div id=\"${msgId}\" class=\"${styles.txt} ${styles.info}\"></div>\r\n    `\r\n}\r\n\r\nconst initUI = (uiRoot) => {\r\n    uiRoot.content = render(PROG_BAR, PROG_IND, INFO, MSG)\r\n    const progBar = uiRoot.get(`#${PROG_BAR}`)\r\n    const progInd = uiRoot.get(`#${PROG_IND}`)\r\n    const info = uiRoot.get(`#${INFO}`)\r\n    const msg = uiRoot.get(`#${MSG}`)\r\n    const realign = viewport => { \r\n        progBar.pos = calcAligned(viewport, progBarDims, \"center\", \"center\")\r\n        progInd.pos = calcAligned(viewport, progBarDims, \"center\", \"center\",)\r\n        info.pos = calcStacked(progBar, UI.bounds(info), \"bottom\", 0, 20)\r\n        msg.pos = calcStacked(progBar, UI.bounds(msg), \"bottom\", 0, 50)\r\n    }\r\n    config.viewport.on(\"change\", realign)\r\n    realign(config.viewport)\r\n    return {\r\n        teardown: () => {\r\n            config.viewport.off(\"change\", realign)\r\n            uiRoot.clear()\r\n        },\r\n        onProg: (p, message) => {\r\n            progInd.domNode.style.width = `${Math.round(p * progBarDims.width)}px`\r\n            info.content = `${Math.round(p * 100)}%`\r\n            msg.content = message\r\n            realign(config.viewport)\r\n        },\r\n        onError: e => {\r\n            console.log(e)\r\n            info.content = !!e && e.message === offlineErrMsg ? \"Error: something went wrong\": \"Error: Unsupported Device\"\r\n            info.domNode.style.color = \"#d34545\"\r\n            msg.content = \"\"\r\n            realign(config.viewport)\r\n        },\r\n        onLoad: () => {\r\n            uiRoot.clear()\r\n        }\r\n    }\r\n}\r\n\r\nexport default initUI","import { Node } from \"@lib\"\r\nimport initUI from \"./initUI\"\r\nimport { MAIN_MENU } from \"@screens/names\"\r\n\r\nclass LoadingScreen extends Node {\r\n    background = \"#000000\"\r\n    constructor({ game, assets, uiRoot, sdk }) { \r\n        super()\r\n        this.game = game\r\n        this.assets = assets\r\n        this.uiRoot = uiRoot\r\n        this.sdk = sdk\r\n    }\r\n    onEnter() {\r\n        const { assetsCache } = this.game\r\n\r\n        assetsCache.load(this.assets)\r\n\r\n        const { teardown, onProg, onError, onLoad } =  initUI(this.uiRoot)\r\n        this.teardown = teardown\r\n        this.onProg = onProg\r\n        assetsCache.once(\"load\", () => {\r\n            onLoad()\r\n            const switchToMainMenu = () => {\r\n                this.game.switchScreen(MAIN_MENU)\r\n            }\r\n            this.sdk.signalLoad()\r\n                .then(switchToMainMenu)\r\n                .catch(switchToMainMenu)\r\n        })\r\n        assetsCache.on(\"prog\", (val, msg) => {\r\n            onProg(val, msg)\r\n            this.sdk.setLoadProg(Math.round(val * 100))\r\n        })\r\n        assetsCache.once(\"error\", onError)\r\n    }\r\n    onExit() {\r\n        this.game.disposeScreen(this)\r\n        this.teardown()\r\n        this.game.assetsCache.off(\"prog\", this.onProg)\r\n        this.game.assetsCache.off(\"error\")\r\n    }\r\n}\r\n\r\nexport default LoadingScreen","import { TexRegion, Node } from \"@lib\"\r\nimport { compositeDims } from \"@utils/entity\"\r\n\r\nclass Title extends Node {\r\n    constructor() {\r\n        super()\r\n        this.logo = new TexRegion({ frame: \"logo\" })\r\n        this.rock1 = new TexRegion({ frame: \"rock1\" })\r\n        this.rock2 = new TexRegion({ frame: \"rock2\" })\r\n        this.ball = new TexRegion({ frame: \"ball\" })\r\n\r\n        this.ball.pos.x = 88\r\n        this.ball.pos.y = 80\r\n        this.rock1.pos.x = 200\r\n        this.rock2.pos.y += this.rock2.h / 2\r\n\r\n        this.ball.anchor = {\r\n            x: this.ball.w * 0.75,\r\n            y: this.ball.h / 2\r\n        }\r\n        this.ball.rotation = 0\r\n\r\n        this.rock2.anchor = {\r\n            x: this.rock2.w * 0.75,\r\n            y: this.rock2.h / 2\r\n        }\r\n        this.rock2.rotation = -Math.PI / 12\r\n\r\n        this.rock1.anchor = {\r\n            x: this.rock1.w / 2,\r\n            y: this.rock1.h / 2\r\n        }\r\n        this.rock1.rotation = Math.PI / 6\r\n\r\n        this.add(this.rock1)\r\n        this.add(this.rock2)\r\n        this.add(this.ball)\r\n        this.add(this.logo)\r\n\r\n        this.alpha = 0.01\r\n        Object.assign(this, compositeDims(this))\r\n    }\r\n    update(dt) {\r\n        this.ball.rotation += dt * Math.PI / 12\r\n        this.alpha = Math.min(1, this.alpha + 0.5 * dt)\r\n    }\r\n}\r\n\r\nexport default Title","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import styles from \"./style.css\"\r\nexport default (id, content) => {\r\n    return `\r\n        <div id=\"${id}\" class=\"${styles.playBtn}\">${content}</div>\r\n    `\r\n}","import config from \"@config\"\r\nimport { calcAligned } from \"@utils/entity\"\r\nimport btn from \"@screens/ui/btn\"\r\n\r\nconst BTN_ID = \"play-btn\"\r\n\r\nconst initUI = ({ uiRoot, onPlay }) => {\r\n    uiRoot.content = btn(BTN_ID, \"PLAY\")\r\n    const playBtn = uiRoot.get(`#${BTN_ID}`)\r\n    const realign = viewport => { \r\n        playBtn.pos = calcAligned(viewport, playBtn, \"center\", \"center\", 0, 0)\r\n    }\r\n    playBtn.on(\"click\", onPlay)\r\n    config.viewport.on(\"change\", realign)\r\n    realign(config.viewport)\r\n    return () => {\r\n        playBtn.off(\"click\", onPlay)\r\n        uiRoot.clear()\r\n        config.viewport.off(\"change\", realign)\r\n    }\r\n}\r\n\r\nexport default initUI","import { Node } from \"@lib\"\r\nimport config from \"@config\"\r\nimport { calcAligned, getGlobalPos } from \"@utils/entity\"\r\nimport { LEVEL } from \"@screens/names\"\r\nimport Title from \"./Title\"\r\nimport initUI from \"./initUI\"\r\n\r\nclass MainMenuScreen extends Node {\r\n    background = \"#041a27\"\r\n    constructor({ game, uiRoot, sdk }) {\r\n        super()\r\n        this.game = game\r\n        this.uiRoot = uiRoot\r\n        this.sdk = sdk\r\n        game.assetsCache.once(\"load\", () => {\r\n            const { viewport } = config\r\n            this.gameTitle = new Title()\r\n            this.realign = vp => {\r\n                const { devicePixelRatio } = config\r\n                this.gameTitle.pos = { ...calcAligned({\r\n                    x: 0, y:0, width: vp.width * devicePixelRatio, height: vp.height * devicePixelRatio\r\n                }, { width: this.gameTitle.width, height: this.gameTitle.height }, \"center\", \"top\", 15, 80) }\r\n            }\r\n            viewport.on(\"change\", this.realign)\r\n            this.realign(viewport)\r\n            this.add(this.gameTitle)\r\n        })\r\n    }\r\n    onEnter() {\r\n        const { uiRoot, game, sdk } = this\r\n        this.teardownUI = initUI({ uiRoot, onPlay: () => {\r\n            // on play button click\r\n            const proceed = () => game.switchScreen(LEVEL, true)\r\n            uiRoot.clear()\r\n            if (!config.prerollAd) {\r\n                return proceed()\r\n            }\r\n            sdk.prerollAd()\r\n                .then(proceed)\r\n                .catch(proceed)\r\n        }})\r\n    }\r\n    onExit() {\r\n        this.teardownUI()\r\n        config.viewport.off(\"change\", this.realign)\r\n    }\r\n}\r\n\r\nexport default MainMenuScreen","import { clamp } from \"@utils/math\"\r\nimport Camera from \"./Camera\"\r\n\r\nexport const getBaseline = tiles => {\r\n    return tiles.reduce((acc, tile) => { // y-coordinates of the baseline where parallax entities stand (the max y-coordinate within which all the entities are bound)\r\n        return Math.max(acc, tile.pos.y + tile.height)\r\n    }, 0)\r\n}\r\n\r\nclass ParallaxCamera extends Camera {\r\n    _layoutTiles = () => {}\r\n    _tiles = null\r\n    constructor({ entYOffset = 0, tiles, ...rest }) {\r\n        super({ ...rest })\r\n        this.entYOffset = entYOffset\r\n        this.tiles = tiles\r\n        this.prevPos = { x: 0, y: 0 }\r\n    }\r\n    get tiles() {\r\n        return this._tiles\r\n    }\r\n    set tiles(val) {\r\n        if (!val) { return }\r\n        this._tiles = val\r\n        this.baseline = getBaseline(val)\r\n    }\r\n    setWorld({ worldWidth, worldHeight }) { // this assumes that we only have two parallax backgrounds\r\n        // in case baselineAtop is not undefined, it's assumed that this is the parallax-far-bg layer\r\n        const baselineToBtmBounds = Math.min(worldHeight - this.baseline, (this.bounds.height - this.subject.height) / 2)\r\n\r\n\r\n        const maxFy = this.baseline - this.subject.height / 2 // assuming the subject is restricted within baseline, calculating it's max y position\r\n        const maxWoCamY = clamp(0, worldHeight - this.bounds.height, maxFy - this.bounds.height / 2) // max position of the world-layer camera\r\n        const maxCamY = maxWoCamY * this.pF // max camera y-coordinates in this layer\r\n        const bl = maxCamY + this.bounds.height - baselineToBtmBounds // baseline in this layer\r\n        const blOffset = baselineToBtmBounds * (1 - 1 / this.z)\r\n\r\n        this.world.width = worldWidth\r\n        this.world.height = worldHeight\r\n        this.tiles.forEach(tile => {\r\n            const tileCopy = { ...tile } // tile shouldn't be mutated\r\n            tileCopy.pos = { \r\n                x: tile.pos.x,\r\n                y: (bl + blOffset) - (this.baseline - tile.pos.y) + this.entYOffset\r\n            }\r\n            this.add(tileCopy)\r\n        })\r\n    }\r\n    layoutTiles({ width: worldWidth=this.world.width, height: worldHeight=this.world.height, tiles=this.tiles }) { // recalculate tiles layout\r\n        if (worldHeight === this.world.height && tiles === this.tiles) { // return early if nothing hasn't changed\r\n            return this.world.width = worldWidth\r\n        }\r\n\r\n        if (tiles !== this.tiles) {\r\n            this.tiles = tiles\r\n        }\r\n\r\n        // taking advantage of closure to avoid unnecessary state setups and dependencies\r\n        this.viewport.off(\"change\", this._layoutTiles) // remove previous listener from viewport observable, so that the camera can be reused across multiple levels\r\n        this._layoutTiles =  () => { // re-layout the tiles\r\n            this.children = []\r\n            this.setWorld({ worldWidth, worldHeight })\r\n        }\r\n        this.viewport.on(\"change\", this._layoutTiles) // and attach a new one\r\n        this._layoutTiles() // performing the actual (initial) work\r\n    }\r\n    onRemove() {\r\n        super.onRemove()\r\n        this.viewport.off(\"change\", this._layoutTiles)\r\n    }\r\n}\r\n\r\nexport default ParallaxCamera","import Sound from \"./index\"\r\nconst findFree = instances => {\r\n    for (let i = instances.length - 1; i > -1; i--) {\r\n        if (!instances[i].playing) {\r\n            return instances[i]\r\n        }\r\n    }\r\n}\r\nclass SoundPool {\r\n    constructor({ resource, start, duration, size = 1, loop, volume, pan, speed }) {\r\n        this.resource = resource\r\n        this.start = start\r\n        this.duration = duration\r\n        this.instances = Array(size).fill(new Sound(resource, { loop, volume, pan, speed }))\r\n    }\r\n    play(volume) {\r\n        const freeInstance = findFree(this.instances)\r\n        if (freeInstance) {\r\n            freeInstance.play(this.start, this.duration, volume)\r\n            return\r\n        }\r\n        const newInstance = new Sound(this.resource)\r\n        this.instances.push(newInstance)\r\n        \r\n        newInstance.play(this.start, this.duration, volume)\r\n    }\r\n    pause() {\r\n        this.instances.forEach(instance => {\r\n            instance.pause()\r\n        })\r\n    }\r\n    resume() {\r\n        this.instances.forEach(instance => {\r\n            instance.resume()\r\n        })\r\n    }\r\n}\r\n\r\nexport default SoundPool","class SoundGroup {\r\n    constructor(mutations) { // a list of slightly varying mutations of a sound (pool)\r\n        this.mutations = mutations\r\n        this.accessIdx = 0\r\n    }\r\n    play(volume) {\r\n        const { mutations, accessIdx } = this\r\n        mutations[accessIdx].play(volume)\r\n        this.accessIdx = (accessIdx + 1) % mutations.length // round robin algorithm\r\n    }\r\n    pause() {\r\n        this.mutations(mutation => {\r\n            mutation.pause()\r\n        })\r\n    }\r\n    resume() {\r\n        this.mutations(mutation => {\r\n            mutation.resume()\r\n        })\r\n    }\r\n}\r\n\r\nexport default SoundGroup","import Sound from \"./index\"\r\nimport SoundPool from \"./SoundPool\"\r\nimport SoundGroup from \"./SoundGroup\"\r\n\r\nclass SoundSprite {\r\n    constructor({ resource, resourceID, meta }) {\r\n        if (!resource) { throw new Error(`Null audio resource: ${resourceID}`) }\r\n        this.meta = meta\r\n        this.resource = resource\r\n    }\r\n    create(frame, opts) {\r\n        const { meta, resource } = this\r\n        const newSound = new Sound(resource, opts)\r\n        newSound.play = newSound.play.bind(newSound, meta[frame].start, meta[frame].duration)\r\n        return newSound\r\n    }\r\n    createPool(frame, opts = {}) {\r\n        const newPool = new SoundPool({ \r\n            resource: this.resource,\r\n            ...this.meta[frame], // destructuring to get start and duration props\r\n            ...opts\r\n        })\r\n        return newPool\r\n    }\r\n    createGroup(frames, poolSize) {\r\n        const mutations = frames.map(frame => this.createPool(frame, poolSize))\r\n        const newGroup = new SoundGroup(mutations)\r\n        return newGroup\r\n    }\r\n}\r\n\r\nexport default SoundSprite","import { circBounds, rectBounds, setLocalPosX, setLocalPosY } from \"@utils/entity\"\r\nimport { atan } from \"@utils/math\"\r\nimport { offEdgeToppleSpeed, offLeftThreshold, offRightThreshold } from \"@lib/constants\"\r\nexport default class Movement {\r\n    static makeMovable(entity, { velX=0, velY=0, accX, accY, fricX, fricY, roll }={}) {\r\n        Object.assign(entity, {\r\n            movable: true,\r\n            velX,\r\n            velY,\r\n            accX, accY, fricX, fricY, roll\r\n        })\r\n        if (roll) { entity.rotation = 0 }\r\n    }\r\n    static updateOffEdge(entity, dt) {\r\n        const block = entity.offCorner\r\n\r\n        if (block.movable) {\r\n            entity.pos.x += block.pos.x - block.prevPosX\r\n            entity.pos.y += block.pos.y - block.prevPosY\r\n        }\r\n\r\n        const entBounds = circBounds(entity)\r\n        const blockBounds = rectBounds(block)\r\n        const blockCornerX = blockBounds.x + (entity.offEdge === 1 ? blockBounds.width : 0)\r\n        const normX = (blockCornerX - (entBounds.x + entBounds.radius)) / entBounds.radius\r\n        const normY = (blockBounds.y - (entBounds.y + entBounds.radius)) / entBounds.radius\r\n        const tanX = normY\r\n        const tanY = -normX\r\n        const a0 = atan(normY, normX) // angle of vector from circle's center to the block's corner\r\n\r\n        if (entity.fricX) {\r\n            entity.velX -= entity.fricX * entity.velX * dt / 2\r\n        }\r\n        const dPos = (entity.velX * tanX + 20 * tanY) * dt // dPos projection along tangent (this is the amount by which to move along circumference)\r\n        const dA = dPos / entBounds.radius // rotation angle\r\n        const a1 = a0 + dA // new angle\r\n        \r\n        // exit conditions\r\n        switch (entity.offEdge) {\r\n            case -1: // off left-edge\r\n                const backOnTop = a1 > Math.PI / 2\r\n                const readyToFall = a1 < offLeftThreshold\r\n                const exiting = backOnTop || readyToFall\r\n                if (exiting) {\r\n                    entity.offEdge = 0\r\n                    entity.velX *= 1.5\r\n                }     \r\n                if (readyToFall) {\r\n                    entity.velX = -offEdgeToppleSpeed\r\n                }\r\n                if (backOnTop) {\r\n                    entity.pos.y -= 0.5\r\n                }\r\n            break\r\n            case 1: // off right-edge\r\n                var cond1 = a1 < Math.PI / 2\r\n                // console.log(a1 * 180 / Math.PI)\r\n                if (cond1 || a1 > offRightThreshold) { // 2.35 is (90 + 45) degrees in radians\r\n                    entity.offEdge = 0\r\n                    !cond1 && (entity.velX = offEdgeToppleSpeed)\r\n                    cond1 && (entity.velX *= 1.5)\r\n                    return cond1 && (entity.pos.y -= 1 / 2)\r\n                }\r\n            break\r\n        }\r\n        const dx = entBounds.radius * (1 + Math.cos(a1)) // x-offset on circle which should now snap to the corner\r\n        const dy = entBounds.radius * (1 + Math.sin(a1)) // y-offset on circle which should now snap to the corner\r\n        \r\n        const prevPosX = entity.pos.x\r\n        setLocalPosX(entity, blockCornerX - dx)\r\n        if (Math.abs(prevPosX - entity.pos.x) > 60) debugger\r\n        setLocalPosY(entity, blockBounds.y - dy)\r\n\r\n        entity.rotation += dA\r\n    }\r\n    static update(entity, dt) {\r\n        if (entity.accX) {\r\n            entity.velX += entity.accX * dt /  2\r\n        }\r\n        \r\n        if (entity.accY) {\r\n            entity.velY += entity.accY * dt / 2\r\n        }\r\n        \r\n        if (entity.fricX) {\r\n            entity.velX += - entity.fricX * entity.velX * dt / 2\r\n        }\r\n        \r\n        if (entity.fricY) {\r\n            entity.velY *= dt / entity.fricY\r\n        }\r\n        if (entity.roll) {\r\n            entity.rotation += entity.velX * dt / (2 * entity.radius)\r\n        }\r\n        entity.pos.x += entity.velX * dt\r\n        entity.pos.y += entity.velY * dt\r\n    }\r\n}","import { Node } from \"@lib\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport { rand, randf, pickOne, easingFns } from \"@utils/math\"\r\nimport Movement from \"@components/Movement\"\r\n\r\nclass Particle extends TexRegion {\r\n    constructor({ imgId, metaId, frame, pos, lifetime, velX=0, velY=0, accX, accY, alpha, alphaDecayFn, rotVel, loop }) {\r\n        super({ imgId, metaId, frame, pos })\r\n        this.lifetime = lifetime\r\n        this.velX0 = velX\r\n        this.velY0 = velY\r\n        this.alpha0 = alpha\r\n        this.pos0 = { ...pos }\r\n        this.alpha = alpha\r\n        this.alphaDecayFn = alphaDecayFn\r\n        this.elapsed = 0\r\n        this.loop = loop\r\n        if (rotVel) {\r\n            this.rotVel = rotVel\r\n            this.rotation = 0\r\n            this.anchor = {\r\n                x: this.w / 2,\r\n                y: this.h / 2\r\n            }\r\n        }\r\n        Movement.makeMovable(this, { velX, velY, accX, accY })\r\n    }\r\n    _reset() {\r\n        this.elapsed = 0\r\n        this.velX = this.velX0\r\n        this.velY = this.velY0\r\n        this.alpha = this.alpha0\r\n        this.pos.x = this.pos0.x\r\n        this.pos.y = this.pos0.y\r\n        if (this.rotVel) {\r\n            this.rotation = 0\r\n        }\r\n    }\r\n    update(dt) {\r\n        if (this.elapsed > this.lifetime) {\r\n            if (!this.loop) { return }\r\n            this._reset()\r\n        }\r\n        this.elapsed += dt\r\n        Movement.update(this, dt)\r\n        if (this.rotVel) {\r\n            this.rotation += this.rotVel * dt\r\n        }\r\n        if (this.alphaDecayFn) {\r\n            this.alpha = Math.max(0.01, 1 - easingFns[this.alphaDecayFn](this.elapsed / this.lifetime))\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nclass ParticleEmitter extends Node {\r\n    static feed(emitter, i, dt) {\r\n        for (let j = 0; j < i; j++) {\r\n            for (let k = 0, l = emitter.children.length; k < l; k++) {\r\n                emitter.children[k].update(dt)\r\n            }\r\n        }\r\n    }\r\n    constructor({ size, blendMode, loop = false, randomDistribution = true, metaId, imgId, params, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        this.blendMode = blendMode\r\n        let paramIndices\r\n        if (randomDistribution) {\r\n            paramIndices = params.reduce((distribution, param, index) => {\r\n                return distribution.concat(Array(param.weight || 1).fill(index))\r\n            },[])\r\n        } else {\r\n            const sumOfWeights = params.reduce((prevTotal, param) => {\r\n                return prevTotal + (param.weight || 1)\r\n            }, 0)\r\n            paramIndices = params.reduce((prevIndices, param, index) => {\r\n                return prevIndices.concat(Array(Math.round(size * (param.weight || 1) / sumOfWeights)).fill(index))\r\n            }, [])\r\n        }\r\n        for (let i = 0; i < size; i++) {\r\n            const index = randomDistribution ? pickOne(paramIndices): paramIndices[i]\r\n            const param = params[index]\r\n            const deserializedParam = {\r\n                metaId,\r\n                imgId,\r\n                frame: param.frame,\r\n                pos: {\r\n                    x: Array.isArray(param.offsetX) ? rand(param.offsetX[0], param.offsetX[1]): param.offsetX || 0,\r\n                    y: Array.isArray(param.offsetY) ? rand(param.offsetY[0], param.offsetY[1]): param.offsetY || 0,\r\n                },\r\n                lifetime: Array.isArray(param.lifetime) ? randf(param.lifetime[0], param.lifetime[1]): param.lifetime,\r\n                velX: Array.isArray(param.velX) ? rand(param.velX[0], param.velX[1]): param.velX,\r\n                velY: Array.isArray(param.velY) ? rand(param.velY[0], param.velY[1]): param.velY,\r\n                accX: Array.isArray(param.accX) ? rand(param.accX[0], param.accX[1]): param.accX,\r\n                accY: Array.isArray(param.accY) ? rand(param.accY[0], param.accY[1]): param.accY,\r\n                alpha: Array.isArray(param.alpha) ? randf(param.alpha[0], param.alpha[1]): param.alpha,\r\n                rotVel:  Array.isArray(param.rotVel) ? randf(param.rotVel[0], param.rotVel[1]): param.rotVel,\r\n                alphaDecayFn: param.alphaDecayFn,\r\n                loop\r\n            }\r\n            this.add(new Particle(deserializedParam))\r\n        }\r\n        if (!loop) {\r\n            this.lifetime = params.reduce((lifetime, param) => { // max possible lifetime of all particles\r\n                return Math.max(lifetime, param.lifetime[1])\r\n            }, 0)\r\n            this.elapsed = 0\r\n            this._reset = function() {\r\n                this.remove(false)\r\n                this.onDead && this.onDead()\r\n                this.elapsed = 0\r\n                for (let i = this.children.length - 1; i > -1; i--) {\r\n                    this.children[i]._reset()\r\n                }\r\n            }\r\n            this.update = function(dt) {\r\n                this.elapsed += dt\r\n                if (this.elapsed > this.lifetime) {\r\n                    this._reset()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default ParticleEmitter","import Observable from \"@lib/utils/Observable\";\r\n\r\nclass State extends Observable {\r\n    name = null // starting with null state before any state transition call\r\n    level = 1\r\n    elapsed = 0\r\n    constructor() {\r\n        super([ \"pause\", \"over\", \"play\", \"complete\", \"halt\" ])\r\n    }\r\n    set(n) {\r\n        this.name = n\r\n    }\r\n    is(n) {\r\n        return n === this.name\r\n    }\r\n    pause() {\r\n        if (this.is(\"paused\")) return\r\n        this.emit(\"pause\")\r\n        this.set(\"paused\")\r\n    }\r\n    play() {\r\n        if (this.is(\"playing\")) return\r\n        this.emit(\"play\")\r\n        this.set(\"playing\")\r\n    }\r\n    over(x) { // at what x-coordinates did the player die\r\n        if (this.is(\"over\")) return\r\n        this.emit(\"over\", x)\r\n        this.set(\"over\")\r\n    }\r\n    complete(curTime, bestTime) {\r\n        if (this.is(\"completed\")) return\r\n        this.emit(\"complete\", curTime, bestTime)\r\n        this.set(\"completed\")\r\n    }\r\n    halt() {\r\n        if (this.is(\"halted\")) return\r\n        this.set(\"halted\")\r\n        this.emit(\"halt\")\r\n    }\r\n}\r\n\r\nexport default State","import UI from \"@utils/UI\"\r\nimport styles from \"./style.css\"\r\n\r\nexport const dom = (img, class_) => {\r\n    const el = UI.create(\"div\")\r\n    el.domNode.setAttribute(\"class\", `${styles.imgBtn} ${class_ || ''}`)\r\n    el.domNode.setAttribute(\"style\", `width: ${img.width}px; height: ${img.height}px; background: url(${img.src});`)\r\n    el.width = img.width\r\n    el.height = img.height\r\n    return el\r\n}\r\nexport default (id, img, class_) => {\r\n    return `\r\n    <div \r\n        class=\"${styles.imgBtn} ${class_ || ''}\" \r\n        id=\"${id}\" \r\n        style=\"width: ${img.width}px; height: ${img.height}px; background: url(${img.src});\"\r\n    >\r\n    </div>\r\n    `\r\n}","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { calcAligned, calcStacked, calcComposite, combine } from \"@utils/entity\"\r\nimport config from \"@config\"\r\nimport imgBtn from \"@screens/ui/imgBtn\"\r\nimport soundImgBtn from \"./soundImgBtn\"\r\nimport styles from \"./style.css\"\r\nimport { wait } from \"@lib/utils\"\r\n\r\nconst margin = 20\r\nconst hMargin = margin / 2 // hMargin\r\nconst orbExpAmt = 2\r\nconst instFocThres = 1400\r\n\r\nconst PAUSE = \"pause-btn\"\r\nconst RESUME  = \"resume-btn\"\r\nconst ORB_AV = \"orb-av\" // orb available\r\nconst TIMER = \"timer\"\r\nconst ORB_IND = \"orb-ind\"\r\nconst ORB_EXP = \"orb-exp\" // orb expend\r\nconst ORB_EXP_IND = \"orb-exp-ind\"\r\nconst CROSS = \"cross-btn\"\r\nconst RESET = \"reset-btn\"\r\n\r\nconst OVERLAY = \"overlay\"\r\nconst BLUR_OVERLAY = \"pause-overlay\"\r\nconst CUR_TIME_IND = \"cur-time-ind\"\r\nconst CUR_TIME = \"cur-time\"\r\nconst BEST_TIME_IND = \"best-time-ind\"\r\nconst BEST_TIME = \"best-time\"\r\nconst CONTINUE = \"continue\"\r\nconst RVA_TXT = \"rva\"\r\n\r\nconst render = (images, orbAv) => {\r\n    return `\r\n        <div id=\"${BLUR_OVERLAY}\" class=\"${styles.blurOverlay}\"></div>\r\n        ${imgBtn(ORB_IND, images.orb, styles.hidden, \"orb count\")}\r\n        <div id=\"${TIMER}\" class=\"${styles.timer} ${styles.hidden}\"> 0000:0 </div>\r\n        <div id=\"${ORB_AV}\" class=\"${styles.txt} ${styles.hidden}\"> ${orbAv} </div>\r\n        ${imgBtn(PAUSE, images.pause, styles.hidden, \"pause game\")}\r\n        ${imgBtn(RESUME, images.resume, styles.hidden, \"resume\")}\r\n        ${imgBtn(ORB_EXP_IND, images.orb, styles.hidden)}\r\n        <div id=\"${ORB_EXP}\" class=\"${styles.txt} ${styles.hidden}\"> &times; ${orbExpAmt} </div>\r\n        <div id=\"${RVA_TXT}\" class=\"${styles.tooltip} ${styles.hidden}\" style=\"font-size: 1.5em\"> watch ad to continue</div>\r\n        ${imgBtn(RESET, images.reset, styles.hidden, \"restart\")}\r\n        ${imgBtn(CROSS, images.cross, styles.hidden, \"exit to level screen\")}\r\n    `\r\n}\r\n\r\nconst renderResult = (resumeImg, curTime, bestTime) => {\r\n    return `\r\n        <div class=\"${styles.overlay} ${styles.hidden}\" id=\"${OVERLAY}\">  </div>\r\n        <div class=\"${styles.time} ${styles.hidden}\" id=\"${CUR_TIME_IND}\">finished in:</div>\r\n        <div class=\"${styles.timeVal} ${styles.hidden}\" id=\"${CUR_TIME}\"> ${curTime.toFixed(2)}s </div>\r\n        <div class=\"${styles.time} ${styles.hidden}\" id=\"${BEST_TIME_IND}\"> record time: </div>\r\n        <div class=\"${styles.timeVal} ${styles.recTimeVal} ${styles.hidden}\" id=\"${BEST_TIME}\"> ${bestTime === 0 || curTime < bestTime ? \"new!\": bestTime.toFixed(2) + \"s\"} </div>\r\n        ${imgBtn(CONTINUE, resumeImg, `${styles.hidden} ${styles.continue}`)}\r\n    `\r\n}\r\n\r\nexport default (uiRoot, player, images, storage, gameState, onClose, resetLevel, focusInst, getCheckpoint, btnSound, errSound, contSound, webAudioSupported, game, sdkInst) => {\r\n    uiRoot.content = render(images, storage.getOrbCount(), webAudioSupported)\r\n    const ctrlBtns = config.isMobile && player.getCtrlBtns()\r\n    const orbInd = uiRoot.get(`#${ORB_IND}`)\r\n    const orbCount = uiRoot.get(`#${ORB_AV}`)\r\n    const orbExp = uiRoot.get(`#${ORB_EXP}`)\r\n    const orbExpInd = uiRoot.get(`#${ORB_EXP_IND}`)\r\n    const rvaTxt = uiRoot.get(`#${RVA_TXT}`)\r\n    const pauseBtn = uiRoot.get(`#${PAUSE}`)\r\n    const resumeBtn = uiRoot.get(`#${RESUME}`)\r\n    const restartBtn = uiRoot.get(`#${RESET}`)\r\n    const crossBtn = uiRoot.get(`#${CROSS}`)\r\n    const timer = uiRoot.get(`#${TIMER}`)\r\n    const blurOverlay = uiRoot.get(`#${BLUR_OVERLAY}`)\r\n    // const music = soundBtn(storage, \"getMusic\", \"setMusic\", gameState, images.musOn, images.musOff, contSound, webAudioSupported, \"toggle music\")\r\n    const soundBtn = soundImgBtn(storage, \"getSound\", \"setSound\", gameState, images.soundOn, images.soundOff, contSound, webAudioSupported, \"toggle audio\")\r\n\r\n    uiRoot.add(soundBtn)\r\n    if (ctrlBtns) {\r\n        uiRoot.add(ctrlBtns.left)\r\n              .add(ctrlBtns.right)\r\n              .add(ctrlBtns.axn)\r\n    }\r\n    const changeOrbCount = num => {\r\n        orbCount.content = num\r\n    }\r\n    const showCtrlBtns = () => {\r\n        if (!config.isMobile) return\r\n        ctrlBtns.left.show()\r\n        ctrlBtns.right.show()\r\n        ctrlBtns.axn.show()\r\n    }\r\n    const hideCtrlBtns = () => {\r\n        if (!config.isMobile) return\r\n        ctrlBtns.left.hide()\r\n        ctrlBtns.right.hide()\r\n        ctrlBtns.axn.hide()\r\n    }\r\n    const alginCtrlBtns = (viewport) => {\r\n        if (!config.isMobile) { return }\r\n        ctrlBtns.left.pos = calcAligned(viewport, ctrlBtns.left, \"left\", \"bottom\", margin, -margin * 1.5)\r\n        ctrlBtns.right.pos = calcStacked(ctrlBtns.left, ctrlBtns.right, \"right\", margin)\r\n        ctrlBtns.axn.pos = calcAligned(viewport, ctrlBtns.right, \"right\", \"bottom\", - margin, - margin * 1.75)\r\n    }\r\n    const realign = viewport => {\r\n        orbInd.pos = calcAligned(viewport, orbInd, \"left\", \"top\", margin, margin)\r\n        orbCount.pos = calcStacked(orbInd, orbCount, \"right\", hMargin)\r\n        pauseBtn.pos = calcAligned(viewport, pauseBtn, \"right\", \"top\", -margin, margin)\r\n        soundBtn.pos = calcStacked(pauseBtn, soundBtn, \"left\", -margin * 0.625)\r\n        timer.pos = calcStacked(pauseBtn, timer, \"bottom\", 0, hMargin)\r\n        restartBtn.pos = calcAligned(viewport, restartBtn, \"center\", \"center\")\r\n        resumeBtn.pos = calcStacked(restartBtn, resumeBtn, \"top\", 0, -hMargin)\r\n        orbExpInd.pos = calcStacked(resumeBtn, orbExpInd, \"right\", margin)\r\n        orbExp.pos = calcStacked(orbExpInd, orbExp, \"right\", hMargin)\r\n        rvaTxt.pos = calcStacked(resumeBtn, rvaTxt, \"top\", 0, -margin * 3 / 4)\r\n        crossBtn.pos = calcStacked(restartBtn, crossBtn, \"bottom\", 0, hMargin)\r\n        alginCtrlBtns(viewport)\r\n\r\n        blurOverlay.domNode.style.width = `${viewport.width}px`\r\n        blurOverlay.domNode.style.height = `${viewport.height}px`\r\n    }\r\n    const endLevel = () => {\r\n        const onDone = () => {\r\n            uiRoot.clear()\r\n            onClose(true)\r\n        }\r\n        sdkInst.playIntstAd()\r\n            .then(onDone)\r\n            .catch(onDone)\r\n    }\r\n    const onPlay = () => {\r\n        resumeBtn.hide()\r\n        restartBtn.hide()\r\n        crossBtn.hide()\r\n\r\n        orbExpInd.hide()\r\n        orbExp.hide()\r\n\r\n        soundBtn.show()\r\n        pauseBtn.show()\r\n        orbInd.show()\r\n        orbCount.show()\r\n        timer.show()\r\n        rvaTxt.hide()\r\n\r\n        showCtrlBtns()\r\n    }\r\n    const onPause = () => {\r\n        resumeBtn.show()\r\n        restartBtn.show()\r\n        crossBtn.show()\r\n\r\n        orbExpInd.hide()\r\n        orbExp.hide()\r\n\r\n        soundBtn.hide()\r\n        pauseBtn.hide()\r\n        orbInd.hide()\r\n        orbCount.hide()\r\n        timer.hide()\r\n\r\n        hideCtrlBtns()\r\n        resumeBtn.domNode.style.background = `url(${images.resume.src})`\r\n    }\r\n    const execOver = () => {\r\n        const checkpoint = getCheckpoint(player.pos.x)\r\n        resumeBtn.show()\r\n        restartBtn.show()\r\n        crossBtn.show()\r\n        \r\n        soundBtn.hide()\r\n        pauseBtn.hide()\r\n        timer.hide()\r\n        hideCtrlBtns()\r\n\r\n        const rvaSupported = sdkInst.rvaSupported()\r\n        const checkpointExists = !!checkpoint\r\n        const orbs = storage.getOrbCount()\r\n        const canAfford = orbs >= orbExpAmt\r\n        const showRva = checkpointExists && !canAfford && rvaSupported\r\n        const showCost = checkpointExists && !showRva\r\n        resumeBtn.domNode.style.background = `url(${ showRva ? images.rva.src: images.resume.src})`\r\n\r\n        if (showRva) {\r\n            // if the player can't afford, prompt them to watch ad (which makes me some money :)) in exchange of checkpoint\r\n            return rvaTxt.show()\r\n        }\r\n        \r\n        if (showCost) { // if player can afford to pay for the checkpoint, show the price\r\n            orbExpInd.show()\r\n            orbExp.show()\r\n            return\r\n        }\r\n\r\n        // if checkpoints do not exist, hide available orbs to expend\r\n        orbInd.hide()\r\n        orbCount.hide()\r\n    }\r\n    const onOver = () => {\r\n        // wait(0.75).then(execOver)\r\n        execOver()\r\n    }\r\n    const onComplete = (curTime, bestTime) => {\r\n        uiRoot.clear()\r\n        uiRoot.content = renderResult(images.resume, curTime, bestTime)\r\n        const overlay = uiRoot.get(`#${OVERLAY}`)\r\n        const curTimeInd = uiRoot.get(`#${CUR_TIME_IND}`)\r\n        const curTimeVal = uiRoot.get(`#${CUR_TIME}`)\r\n        const bestTimeInd = uiRoot.get(`#${BEST_TIME_IND}`)\r\n        const bestTimeVal = uiRoot.get(`#${BEST_TIME}`)\r\n        const continueBtn = uiRoot.get(`#${CONTINUE}`)\r\n\r\n        overlay.domNode.style.width = `${config.viewport.width}px`\r\n        overlay.domNode.style.height = `${config.viewport.height}px`\r\n\r\n        bestTimeInd.pos = calcAligned(config.viewport, combine(bestTimeInd, bestTimeVal, \"x\"), \"center\", \"center\")\r\n        bestTimeVal.pos = calcStacked(bestTimeInd, bestTimeVal, \"right\", 8)\r\n        curTimeInd.pos = calcStacked(bestTimeInd, bestTimeInd, \"top-start\", 0, -8)\r\n        curTimeVal.pos = calcStacked(curTimeInd, curTimeVal, \"right\", 8)\r\n        continueBtn.pos = calcStacked(calcComposite([ bestTimeInd, bestTimeVal ]), continueBtn, \"bottom\", 0, 16)\r\n        \r\n        continueBtn.on(\"click\", () => {\r\n            continueBtn.domNode.remove()\r\n            bestTimeInd.domNode.remove()\r\n            curTimeInd.domNode.remove()\r\n            bestTimeVal.domNode.remove()\r\n            curTimeVal.domNode.remove()\r\n            endLevel()\r\n        })\r\n        \r\n        overlay.domNode.style.opacity = 0.8\r\n        curTimeInd.show()\r\n        curTimeVal.show()\r\n        bestTimeInd.show()\r\n        bestTimeVal.show()\r\n        continueBtn.show()\r\n    }\r\n    const [ continuePlay, restartPlay ] = (() => {\r\n        const playingAd = {\r\n            _val: false,\r\n            setVal(val) {\r\n                if (val === this._val) return\r\n                this._val = val\r\n                if (val) { // if rva is playing, make restart and exit buttons non existent\r\n                    crossBtn.domNode.style.display = \"none\"\r\n                    restartBtn.domNode.style.display = \"none\"\r\n                    resumeBtn.domNode.style.display = \"none\"\r\n                    rvaTxt.domNode.style.display = \"none\"\r\n                    orbExp.domNode.style.display = \"none\"\r\n                    orbExpInd.domNode.style.display = \"none\"\r\n                    return\r\n                }\r\n                // if rva has stopped playing, bring back exit and restart buttons\r\n                crossBtn.domNode.style.display = \"\"\r\n                restartBtn.domNode.style.display = \"\"\r\n                resumeBtn.domNode.style.display = \"\"\r\n                rvaTxt.domNode.style.display = \"\"\r\n                orbExp.domNode.style.display = \"none\"\r\n                orbExpInd.domNode.style.display = \"none\"\r\n            },\r\n            getVal() {\r\n                return this._val\r\n            }\r\n        }\r\n        const restorePlayer = point => {\r\n            resetLevel()\r\n            player.pos.x = point.x\r\n            player.pos.y = point.y\r\n        }\r\n        const restart = () => {\r\n            resetLevel()\r\n            const posXAtReset = player.pos.x\r\n            posXAtReset > instFocThres && focusInst() // if the player is not near enough to it's reset spawn point, focus the camera to player position instantly to avoid jarring focus\r\n            gameState.elapsed = 0\r\n            gameState.play()\r\n            btnSound.play()\r\n            // post restart hook (synchronize ad playing state)\r\n            playingAd.setVal(false)\r\n        }\r\n        const restartPlay = () => { \r\n            if (playingAd.getVal()) return\r\n            playingAd.setVal(true)\r\n            // pre-restart hook: ad trigger point (configureable chance if restart is triggered programmatically triggred or explicitly by user)\r\n            if (Math.random() < config.showAdOnRestart) {\r\n                sdkInst.playIntstAd()\r\n                    .then(restart)\r\n                    .catch(restart)\r\n                return\r\n            }\r\n            restart()\r\n        }\r\n        const continuePlay = () => {\r\n            if (playingAd.getVal()) return\r\n            \r\n            const checkpoint = getCheckpoint(player.pos.x)\r\n\r\n            const rvaSupported = sdkInst.rvaSupported()\r\n            const checkpointExists = !!checkpoint\r\n            const orbs = storage.getOrbCount()\r\n            const canAfford = orbs >= orbExpAmt\r\n            const watchRva = checkpointExists && !canAfford && rvaSupported\r\n            const payOrbs = checkpointExists && !watchRva\r\n\r\n            if (payOrbs && !canAfford) {\r\n                return errSound.play()\r\n            }\r\n\r\n            btnSound.play()\r\n\r\n            if (payOrbs && canAfford) {\r\n                playingAd.setVal(true)\r\n                const onDone = () => {\r\n                    storage.setOrbCount(orbs - orbExpAmt)\r\n                    restorePlayer(checkpoint)\r\n                    gameState.play()\r\n                    playingAd.setVal(false)\r\n                }\r\n                if (Math.random() < config.showAdOnResume) { // grabbing ad probability from configuration object\r\n                    sdkInst.playIntstAd()\r\n                        .then(onDone)\r\n                        .catch(onDone)\r\n                }\r\n                onDone()\r\n                return\r\n            }\r\n\r\n            if (watchRva) {\r\n                playingAd.setVal(true)\r\n                const onDone = () => {\r\n                    restorePlayer(checkpoint)\r\n                    gameState.play()\r\n                    playingAd.setVal(false)\r\n                }\r\n                sdkInst.playRva()\r\n                    .then(onDone)\r\n                    .catch(onDone)\r\n                return\r\n            }\r\n\r\n            restartPlay()\r\n        }\r\n        return [\r\n            continuePlay, restartPlay\r\n        ]\r\n    })();\r\n    const onBlur = () => {\r\n        if (gameState.is(\"paused\") || gameState.is(\"completed\")) return\r\n        blurOverlay.domNode.style.display = \"block\"\r\n        game.pause()\r\n    }\r\n    const onFocus = () => {\r\n        if (gameState.is(\"paused\") || gameState.is(\"completed\")) return\r\n        blurOverlay.domNode.style.display = \"none\"\r\n        game.resume()\r\n    }\r\n    const onKeyDown = e => {\r\n        if (gameState.is(\"playing\") && e.key === \"Escape\") {\r\n            return gameState.pause()\r\n        } \r\n        if (gameState.is(\"over\") && e.key === \"Enter\") { \r\n            return continuePlay()\r\n        }\r\n        if (gameState.is(\"paused\") && e.key === \"Enter\") {\r\n            return gameState.play()\r\n        }\r\n        // if (gameState.is(\"completed\") && (e.key === \"Enter\" || e.key === \" \")) {\r\n        //     endLevel()\r\n        //     if (!config.isMobile) document.removeEventListener(\"keydown\", onKeyDown) // remove keydown listener since it may result in multiple endLevel calls (and consequently multiple  interstitial ad load error) and we no longer need the listener\r\n        // }\r\n    }\r\n\r\n    if (!config.isMobile) document.addEventListener(\"keydown\", onKeyDown)\r\n    window.addEventListener(\"focus\", onFocus)\r\n    window.addEventListener(\"blur\", onBlur)\r\n    document.addEventListener(\"blur\", onBlur)\r\n    document.addEventListener(\"focus\", onFocus)\r\n    gameState.on(\"play\", onPlay)\r\n    gameState.on(\"pause\", onPause)\r\n    gameState.on(\"over\", onOver)\r\n    gameState.on(\"complete\", onComplete)\r\n    config.viewport.on(\"change\", realign)\r\n    storage.on(\"orb-update\", changeOrbCount)\r\n    pauseBtn.on(\"click\", () => {\r\n        if (!gameState.is(\"playing\")) return\r\n        gameState.pause()\r\n        btnSound.play()\r\n    })\r\n    resumeBtn.on(\"click\", () => {\r\n        if (gameState.is(\"playing\") || gameState.is(\"completed\")) return\r\n        if (gameState.is(\"paused\")) {\r\n            gameState.play()\r\n            return btnSound.play()\r\n        } \r\n        continuePlay()\r\n    })\r\n    crossBtn.on(\"click\", () => {\r\n        if (gameState.is(\"playing\") || gameState.is(\"completed\")) return\r\n        onClose(false)\r\n        btnSound.play()\r\n    })\r\n    restartBtn.on(\"click\", () => {\r\n        if (gameState.is(\"playing\") || gameState.is(\"completed\")) return\r\n        restartPlay()\r\n    })\r\n    realign(config.viewport)\r\n    return {\r\n        teardownUI: () => {\r\n            if (!config.isMobile) document.removeEventListener(\"keydown\", onKeyDown)\r\n            window.removeEventListener(\"blur\", onBlur)\r\n            window.removeEventListener(\"focus\", onFocus)\r\n            document.removeEventListener(\"blur\", onBlur)\r\n            document.removeEventListener(\"focus\", onFocus)\r\n            config.viewport.off(\"change\", realign)\r\n            storage.off(\"orb-update\", changeOrbCount)\r\n            gameState.off(\"play\", onPlay)\r\n            gameState.off(\"pause\", onPause)\r\n            gameState.off(\"over\", onOver)\r\n            gameState.off(\"complete\", onComplete)\r\n        },\r\n        updateTimer: t => {\r\n            if (!gameState.is(\"playing\")) {\r\n                return\r\n            }\r\n            const secs = Math.floor(t)\r\n            const ds = Math.floor((t - secs) * 10) // deciseconds\r\n            const pad = t < 10 ? \"000\":\r\n                        t < 100 ? \"00\":\r\n                        t < 1000 ? \"0\": \"\"\r\n            timer.content = `${pad}${secs}:${ds}`\r\n        }\r\n    }\r\n}","import { dom as domImgBtn } from \"@screens/ui/imgBtn\"\r\nimport styles from \"./style.css\"\r\nexport default (storage, getterKey, setterKey, gameState, onImg, offImg, sound, webAudioSupported, title) => {\r\n    const img = !!storage[getterKey]() ? onImg: offImg\r\n    const _class = webAudioSupported ? styles.hidden: styles.dead\r\n    const el = domImgBtn(img, _class, title)\r\n    el.on(\"click\", () => {\r\n        if (!gameState.is(\"playing\")) return\r\n        const musicOn = !storage[getterKey]()\r\n        storage[setterKey](musicOn)\r\n        el.domNode.style.background = `url(${musicOn ? onImg.src: offImg.src})`\r\n        sound.play()\r\n    })\r\n    return el\r\n}","import { Node } from \"@lib\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport { colRectsId, objLayerId } from \"@lib/constants\"\r\n\r\nclass TiledLevel extends  Node {\r\n    resetRecursively(node = this) {\r\n        node.reset && node.reset()\r\n        if (!node.children) return\r\n        for (let child of node.children) {\r\n            this.resetRecursively(child)\r\n        }\r\n    }\r\n    constructor({ player, data, factories={}, ...nodeProps }) {\r\n        super({ ...nodeProps })\r\n        const colRects = new Node({ id: colRectsId }) // collision rects are invisible, so wherever in the scene graph they go doesn't matter\r\n        const objNode = new Node({ id: objLayerId }) // node for entities created via factories; it goes between world layer and foreground\r\n        const mgObjNode = new Node() // midground tile-group that lies behind the world layer\r\n        const fgObjNode = new Node()\r\n        const objNodeMap = {\r\n            mg: mgObjNode,\r\n            world: objNode,\r\n            fg: fgObjNode\r\n        }\r\n        const getGroup = function(id) { // all the collision groups in particular node should go to it's respective objLayer\r\n            const g = Node.get(id)\r\n            if (!g) { // if g isn't there, create a new one, add it to the objNode and return it\r\n                const newG = new Node({ id })\r\n                this.add(newG)\r\n                return newG\r\n            }\r\n            return g\r\n        } \r\n        objNode.getGroup = getGroup\r\n        mgObjNode.getGroup = getGroup\r\n        fgObjNode.getGroup = getGroup\r\n        const addTiles = (tiles, layer) => {\r\n            const objNode = objNodeMap[layer]\r\n            const addTile = ({ name, x, y, groupId, ...props }) => {\r\n                const factory = factories[name]\r\n                if (factory) { // in case there exists a factory for creating the tile with this particular name, give that a precedence\r\n                    const parentNode = !!groupId ? objNode.getGroup(groupId): objNode\r\n                    parentNode.add(factory(x, y, props, player))\r\n                    return\r\n                }\r\n                const region = new TexRegion({ frame: name, pos: { x: x, y: y }})\r\n                const parentNode = groupId ? objNode.getGroup(groupId): this\r\n                parentNode.add(region)\r\n            }\r\n            tiles.forEach(addTile)\r\n        }\r\n        \r\n        const addSpawnPoint = ({ name, x, y, groupId, layer = \"w\", ...props }) => {\r\n            const factory = factories[name]\r\n            if (!factory) {\r\n                throw new Error(`no factory method provided for ${name}`)\r\n            }\r\n            const node = layer === \"mg\" ? mgObjNode:\r\n                         layer === \"fg\" ? fgObjNode:\r\n                         objNode\r\n            const parentNode = !!groupId ? node.getGroup(groupId): node\r\n            parentNode.add(factory(x, y, props, player))\r\n        }\r\n        const addColRect = ({ x, y, width, height, ...props }) => {\r\n            const colRect = new Node({ pos: { x, y } })\r\n            colRect.width = width\r\n            colRect.height = height\r\n            Object.assign(colRect, props)\r\n            colRects.add(colRect)\r\n        }\r\n\r\n        // adding col-rects to objNode (after world tiles and before world spawn points)\r\n        data.collisionRects.forEach(addColRect)\r\n        objNode.add(colRects)\r\n\r\n        // followed by midground tiles and mgObjNode\r\n        addTiles(data.mgTiles, \"mg\")\r\n        this.add(mgObjNode)\r\n\r\n        // then, world-layer tiles, objNode and spawnPoints (all of which lie on world layer)\r\n        addTiles(data.tiles, \"world\")\r\n        this.add(objNode)\r\n        data.spawnPoints.forEach(addSpawnPoint)\r\n\r\n        // and finally foreground tiles and fgObjNode\r\n        addTiles(data.fgTiles, \"fg\")\r\n        this.add(fgObjNode)\r\n\r\n        this.width = data.width\r\n        this.height = data.height\r\n    }\r\n}\r\n\r\nexport default TiledLevel","import { Camera } from \"@lib\"\r\nimport TiledLevel from \"@utils/TiledLevel\"\r\n\r\nclass Level extends Camera {\r\n    constructor({ player, uiRoot, data, bg, fbg, factories, levelDataId, uiImages, onStateChange, gameState, music, ...cameraProps }) {\r\n        const arena = new TiledLevel({ \r\n            data,\r\n            bg, fbg, player,\r\n            factories\r\n        })\r\n        super({ ...cameraProps, world: { width: arena.width, height: arena.height } })\r\n        this.gameState = gameState\r\n        this.player = player\r\n        this.music = music                                                                                                                                                                                                                                                                                                                                           \r\n        this.add(arena)\r\n        this.resetRecursively = () => {\r\n            arena.resetRecursively()\r\n        }\r\n    }\r\n    update(dt) {\r\n        super.update(dt)\r\n        if (!this.music) return\r\n        if (this.gameState.is(\"completed\")) return this.music.playing && this.music.pause()\r\n\r\n        !this.music.playing && this.music.play()\r\n    }\r\n    onRemove() {\r\n        if (!this.music) return\r\n        this.music.pause()\r\n    }\r\n}\r\n\r\nexport default Level","export const shapes = Object.freeze({\r\n    RECT: \"rectangle\",\r\n    CIRC: \"circle\",\r\n    PLANK: \"plank\" // inclined-plane\r\n})\r\nexport default entity => {\r\n    const shape = entity.hitCirc ? shapes.CIRC: shapes.RECT\r\n    if (shape === shapes.RECT && !entity.hitbox && !entity.width & !entity.height) {\r\n        throw new Error(`Unable to determine entity shape: \\n${JSON.stringify(entity, null, 3)}`)\r\n    }\r\n    return shape\r\n}","import { aabbCirc, aabb, fixedAabb, circCirc } from \"@lib/utils/math\"\r\nimport { shapes, detectShape, rectBounds, circBounds } from \"@lib/utils/entity\"\r\n\r\nexport const getAabbTestFn = fixed => {\r\n    const test = fixed ? fixedAabb: aabb\r\n    return (e1, e2) => {\r\n        const e1Bounds = rectBounds(e1)\r\n        const e2Bounds = rectBounds(e2)\r\n        return test(e1Bounds, e2Bounds)\r\n    }\r\n}\r\n\r\nexport const testCircCirc = (e1, e2) => {\r\n    const e1Bounds = circBounds(e1)\r\n    const e2Bounds = circBounds(e2)\r\n    return circCirc(e1Bounds, e2Bounds)\r\n}\r\n\r\n\r\nexport const testCircAabb = (circ, aabb) => {\r\n    return aabbCirc(rectBounds(aabb), circBounds(circ))\r\n}\r\n\r\nexport const testAabbCirc = (aabb, circ) => {\r\n    return aabbCirc(rectBounds(aabb), circBounds(circ))\r\n}\r\n\r\nexport default (e1, e2, opts) => {\r\n    const e1Shape = detectShape(e1)\r\n    const e2Shape = detectShape(e2)\r\n    const fixed = opts && opts.rigid && opts.movable\r\n\r\n    if (e1Shape === shapes.RECT && e2Shape === shapes.RECT) {\r\n        return getAabbTestFn(fixed)\r\n    } \r\n    if (e1Shape === shapes.CIRC && e2Shape === shapes.CIRC) {\r\n        return testCircCirc\r\n    } \r\n    if (e1Shape === shapes.CIRC && e2Shape === shapes.RECT) {\r\n        return testCircAabb\r\n    }\r\n    if (e1Shape === shapes.RECT && e2Shape === shapes.CIRC) {\r\n        return testAabbCirc\r\n    }\r\n}\r\n","import { Node } from \"@lib\"\r\nimport ParticleEmitter from \"@lib/utils/ParticleEmitter\"\r\nimport { sqLen } from \"@lib/utils/math\"\r\nimport getTestFn from \"@lib/components/Collision/helpers/getTestFn\"\r\nimport { objLayerId } from \"@lib/constants\"\r\n\r\nclass Orb extends ParticleEmitter {\r\n    chasing = false\r\n    constructor({ player, sound, storage, temp = false, ...rest }) {\r\n        super({ ...rest })\r\n        this.player = player\r\n        this.sound = sound\r\n        this.hitbox = { x: 5, y: 5, width: 14, height: 14}\r\n        this.testCol = getTestFn(this, player)\r\n        this.active = true\r\n        this.storage = storage\r\n        this.temp = temp\r\n    }\r\n    update() {\r\n        if (!this.active) { return }\r\n        const dPosX = this.player.pos.x + this.player.width / 2 - this.pos.x\r\n        const dPosY = this.player.pos.y + this.player.width / 2 - this.pos.y\r\n        const sqDist = sqLen(dPosX, dPosY)\r\n        if (sqDist > 14400 && !this.chasing) { // distance > 120\r\n            return \r\n        }\r\n        this.chasing = true\r\n        this.pos.x += dPosX / 60\r\n        this.pos.y += dPosY / 60\r\n        if (this.testCol(this, this.player) && this.player.visible) {\r\n            this.sound.play()\r\n            this.storage.setOrbCount(this.storage.getOrbCount() + 1)\r\n            this.remove()\r\n        }\r\n    }\r\n    reset() { \r\n        this.chasing = false\r\n        this.temp && this.remove()\r\n    }\r\n    onRemove() {\r\n        this.parent = null\r\n        this.chasing = false\r\n    }\r\n}\r\n\r\nexport default Orb","import TexRegion from \"@lib/entities/TexRegion\"\r\nimport { clamp, sign, easingFns } from \"@utils/math\"\r\nimport getTestFn from \"@lib/components/Collision/helpers/getTestFn\"\r\n\r\nconst hitbox = Object.freeze({ x: 9, y: 0, width: 93, height: 200 })\r\nclass Gate extends TexRegion {\r\n    constructor({ endY, uSound, dSound, speed=150, pos, player, ...rest }) {\r\n        super({ frame: \"gate\", pos, ...rest })\r\n        this.endY = endY\r\n        this.startY = pos.y\r\n        this.initDir = sign(this.endY - this.startY)\r\n        this.dir = this.initDir\r\n        this.dist = Math.abs(this.endY - this.startY)\r\n        this.period = this.dist / speed\r\n        this.t = 0\r\n        this.uSound = uSound\r\n        this.dSound = dSound\r\n        this.player = player\r\n        this.testCol = getTestFn(this, player)\r\n        this.hitbox = hitbox\r\n    }\r\n    updatePos(dt) {\r\n        this.t += dt\r\n        const dp = this.dist * easingFns.cubicIn(this.t / this.period)\r\n        this.pos.y = (this.dir === this.initDir ? this.startY: this.endY) + dp * this.dir\r\n        const newPosY = this.startToEndDir === 1 ? clamp(this.startY, this.endY, this.pos.y): clamp(this.endY, this.startY, this.pos.y)\r\n        if (newPosY !== this.pos.y) { // if the gate has gone beyond extremes\r\n            this.t = 0\r\n            this.dir *= -1\r\n            this.pos.y = newPosY\r\n            const dPX = this.pos.x + this.w / 2 - this.player.pos.x\r\n            const dPY = this.pos.y + this.h / 2 - this.player.pos.y\r\n            if (dPX * dPX + dPY * dPY > 160000) return // if the distance is greater than 400px return\r\n            if (this.dir === 1) { // just collided with ceiling\r\n                return this.uSound.play()\r\n            }\r\n            this.dSound.play()\r\n        }\r\n    }\r\n    reset() {\r\n        this.pos.Y = this.startY\r\n        this.velY = this.velY0\r\n    }\r\n    update(dt) {\r\n        this.updatePos(dt)  \r\n        if (this.testCol(this, this.player)) {\r\n            this.player.visible && this.player.explode()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Gate","import { Node, TexRegion } from \"@lib\"\r\nimport config from \"@config\"\r\nimport getTestFn from \"@lib/components/Collision/helpers/getTestFn\"\r\nimport { randf, rand, easingFns, sqLen } from \"@utils/math\"\r\n\r\nconst PI = Math.PI\r\nconst period = [ 1.5, 2 ]\r\nconst amp = [ 16, 36 ]\r\nconst height = [ 180, 180 ] \r\nconst swirlOffset = [ 0, PI]\r\nclass WindParticle extends TexRegion {\r\n    forceUpdate = true\r\n    constructor() {\r\n        super({ frame: \"wind\" })\r\n        this.period = randf(period[0], period[1])\r\n        this.amp = rand(amp[0], amp[1])\r\n        this.height = rand(height[0], height[1])\r\n        this.swirlOffset = randf(swirlOffset[0], swirlOffset[1])\r\n\r\n        this.t = 0\r\n    }\r\n    update(dt) {\r\n        this.t += dt\r\n        const norm = this.t / this.period\r\n        this.pos.y = - this.height * easingFns.linear(norm)\r\n        this.pos.x = this.amp * Math.sin(this.swirlOffset + 4 * PI * norm)\r\n        this.alpha = 1 - easingFns.quadOut(norm)\r\n        if (norm > 1) {\r\n            this.t = 0\r\n        }\r\n    }\r\n}\r\n\r\nclass Wind extends Node {\r\n    constructor(data, x, y, player) {\r\n        super(data)\r\n        // this.rotation = -Math.PI / 2\r\n        this.pos.x = x - 6\r\n        this.pos.y = y - 9\r\n        this.player = player\r\n        // this.sound = sound\r\n        this.hitbox = { x: -25, y: -200, width: 50, height: 200}\r\n        this.testCol = getTestFn(this, player)\r\n\r\n\r\n        for (let i = 0; i < 60; i++) {\r\n            this.add(new WindParticle())\r\n        }\r\n        this.feed(240, 1 / 60)\r\n    }\r\n    feed(iterations, dt) {\r\n        for (let i = iterations - 1; i > -1; i--) {\r\n            for (let j = this.children.length - 1; j > -1; j--) {\r\n                this.children[j].update(dt)\r\n            }\r\n        }\r\n    }\r\n    update(dt) {\r\n        if (this.testCol(this, this.player) && this.player.visible) {\r\n            const dPosX = this.player.pos.x + this.player.width / 2 - this.pos.x\r\n            const dPosY = this.player.pos.y + this.player.width / 2 - this.pos.y\r\n            const sqDist = sqLen(dPosX, dPosY)\r\n            if (sqDist < 4096) { return }\r\n            this.player.controls.switchState(\"jumping\", this.player)\r\n            this.player.velY -= config.gravity * (sqDist / 32400) * dt\r\n        }\r\n    }\r\n    reset() { }\r\n    onRemove() {\r\n        this.parent = null\r\n    }\r\n}\r\n\r\nexport default Wind","import { TexRegion } from \"@lib\"\r\nclass Magnet extends TexRegion {\r\n    constructor(props) {\r\n        super(props)\r\n        this.tint = [ 0, 0, 0, 0 ]\r\n        this.vel = 1\r\n        this.tintVal = 0\r\n        this.forceUpdate = true\r\n    }\r\n    update(dt) {\r\n        this.tintVal += dt * 0.2 * this.vel\r\n        if (this.tintVal > 0.16) {\r\n            this.vel = -1\r\n            this.tintVal = 0.16\r\n        } else if (this.tintVal < 0) {\r\n            this.vel = 1\r\n            this.tintVal = 0\r\n        }\r\n        this.tint[0] = this.tintVal\r\n        this.tint[1] = this.tintVal\r\n        this.tint[2] = this.tintVal\r\n    }\r\n}\r\n\r\n// const makeFlashMixin = cycle => ({\r\n//     tint: [ 0, 0, 0, 0 ],\r\n//     elapsed: 0,\r\n//     TIME: cycle,\r\n//     bright: false,\r\n//     brighten() {\r\n//         this.bright = true\r\n//         this.tint[0] = 0.1\r\n//         this.tint[1] = 0.1\r\n//         this.tint[2] = 0.1\r\n//     },\r\n//     resetTint() {\r\n//         this.bright = false\r\n//         this.tint[0] = 0\r\n//         this.tint[1] = 0\r\n//         this.tint[2] = 0\r\n//     },\r\n//     update(dt) {\r\n//         this.elapsed += dt\r\n//         if (this.elapsed > this.TIME) {\r\n//             this.elapsed = 0\r\n//             switch(this.bright) {\r\n//                 case true:\r\n//                     this.resetTint()\r\n//                 break\r\n//                 case false:\r\n//                     this.brighten()\r\n//             }\r\n//         }\r\n//     }\r\n// })\r\n\r\nexport default Magnet","import { Node } from \"@lib\"\r\n\r\nclass Timer extends Node {\r\n    static attachedTo(node) {\r\n        return props => {\r\n            return node.add(new Timer(props))\r\n        }\r\n    }\r\n    constructor(duration, onTick, onDone, delay = 0) {\r\n        super()\r\n        this.invisible = true\r\n        this.delay = delay\r\n        this.duration = duration\r\n        this.elapsed = 0\r\n        this.onTick = onTick\r\n        this.onDone = onDone\r\n    }\r\n    update(dt) {\r\n        if (this.delay > 0) {\r\n            this.delay -= dt\r\n            return\r\n        }\r\n        this.elapsed += dt\r\n        if (this.elapsed > this.duration) {\r\n            this.onDone && this.onDone()\r\n            this.remove()\r\n            return\r\n        }\r\n        this.onTick && this.onTick(this.elapsed / this.duration) // pass in progress as an argument\r\n    }\r\n}\r\n\r\nexport default Timer","const { TexRegion } = require(\"@lib/entities\");\r\nimport Movement from \"@lib/components/Movement\";\r\nimport config from \"@config\"\r\nimport { sign } from \"@utils/math\"\r\nimport getTestFn from \"@lib/components/Collision/helpers/getTestFn\";\r\nimport { fadeOut } from \"@utils/functions\"\r\n\r\n// seq \r\n// `\r\n// [\r\n//     {\r\n//         \"rollTo\": 536,\r\n//         \"speed\": 118\r\n//     },\r\n//     {\r\n//         \"jumpTo\": 1238,\r\n//         \"speed\": 0,\r\n//         \"velX\": 20\r\n//     },\r\n//     {\r\n//         \"jumpTo\": 1200,\r\n//         \"speed\": 200,\r\n//         \"velX\": 100\r\n//     }\r\n// ]\r\n// `\r\n\r\n// tutorial ball\r\nclass Ball extends TexRegion {\r\n    constructor(x, y, seq, player) {\r\n        super({ frame: \"ball\", pos: { x, y } })\r\n        this.pos0 = { x, y }\r\n        this.player = player\r\n        this.tint = [ 0.05, 0, -0.05, 0 ]\r\n        this.anchor = { x: this.width / 2, y: this.height / 2 }\r\n        this.radius = this.width / 2\r\n        this.alpha = 0.6\r\n        Object.assign(this, makeFlashMixin(1))\r\n        Movement.makeMovable(this, { roll: true })\r\n        this.seqs = JSON.parse(seq)\r\n        this.seqIdx = -1\r\n        this.seq = null\r\n        this.initiated = false\r\n        this.dead = false\r\n        this.testCol = getTestFn(this, player)\r\n        this.nextSeq()\r\n    }\r\n    reset() {}\r\n    nextSeq() {\r\n        this.seqIdx++\r\n        if (this.seqIdx > this.seqs.length - 1) {\r\n            // this.seqIdx = 0\r\n            // this.pos.x = this.pos0.x\r\n            // this.pos.y = this.pos0.y\r\n            this.dead = true\r\n            return fadeOut(this, this.alpha, 0.6, () => this.remove())\r\n        }\r\n        this.seq = this.seqs[this.seqIdx]\r\n        if (this.seq.jumpTo) {\r\n            this.velSign = sign(this.seq.jumpTo - this.pos.y)\r\n            this.velY = this.velSign * this.seq.speed\r\n            this.velX = this.seq.velX || 0\r\n            this.accY = this.seq.acc || config.gravity\r\n        } else if (this.seq.rollTo) {\r\n            this.velSign = sign(this.seq.rollTo - this.pos.x)\r\n            this.accY = 0\r\n            this.velX = this.velSign * this.seq.speed\r\n            this.velY = 0\r\n        }\r\n    }\r\n    checkSeq() {\r\n        if (this.seq.jumpTo) {\r\n            if (this.pos.y * this.velSign > this.seq.jumpTo * this.velSign) {\r\n                this.pos.y = this.seq.jumpTo\r\n                this.nextSeq()\r\n            }\r\n        } else if (this.seq.rollTo) {\r\n            if (this.pos.x * this.velSign > this.seq.rollTo * this.velSign) {\r\n                this.pos.x = this.seq.rollTo\r\n                this.nextSeq()\r\n            }\r\n        }\r\n    }\r\n    update(dt) {\r\n        if (this.dead) {\r\n            return\r\n        }\r\n        this.updateFlash(dt)\r\n        if (this.initiated) { // sequence initiated (triggered by player touch)\r\n            Movement.update(this, dt)\r\n            this.checkSeq()\r\n            return\r\n        }\r\n        this.initiated = this.testCol(this, this.player)\r\n    }\r\n}\r\n\r\nconst makeFlashMixin = period => ({\r\n    alpha: 0.7,\r\n    elapsed: 0,\r\n    period: period || 0.6,\r\n    updateFlash(dt) {\r\n        this.elapsed += dt\r\n        if (this.elapsed > this.period) {\r\n            this.elapsed = 0\r\n            switch(this.alpha) {\r\n                case 0.7:\r\n                    this.alpha = 0.6\r\n                break\r\n                case 0.6:\r\n                    this.alpha = 0.7\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport default Ball","import Timer from \"./Timer\"\r\nexport const fadeOut = (entity, alpha0, duration, onDone) => {\r\n    entity.add(new Timer( \r\n        duration, \r\n        nt => { // normalized time (elapsed)\r\n            entity.alpha = alpha0 * (1 - nt)\r\n        }, \r\n        onDone\r\n    ))\r\n}\r\nexport const fadeIn = (entity, alpha, duration, onDone) => {\r\n    entity.add(new Timer({ \r\n        duration, \r\n        onTick: nt => { // normalized time (elapsed)\r\n            console.log(entity.alpha)\r\n            entity.alpha = Math.min(alpha, nt)\r\n        }, \r\n        onDone\r\n    }))\r\n}","import { TexRegion } from \"@lib\"\r\nimport { clamp, sign } from \"@utils/math\"\r\n\r\nclass MovableEnt extends TexRegion {\r\n    constructor(x, y, frame, toX=x, toY=y, speed=100) {\r\n        super({ frame, pos: { x, y } })\r\n        this.fromX = x\r\n        this.fromY = y\r\n        this.toX = toX\r\n        this.toY = toY\r\n        this.velX = (toX - x) === 0 ? 0: sign(toX - x) * speed\r\n        this.velY = (toY - y) === 0 ? 0: sign(toY - y) * speed\r\n        this.clampX0 = this.fromX < this.toX ? this.fromX: this.toX\r\n        this.clampX1 = this.toX > this.fromX ? this.toX: this.fromX\r\n        this.clampY0 = this.fromY < this.toY ? this.fromY: this.toY\r\n        this.clampY1 = this.toY > this.fromY ? this.toY: this.fromY\r\n    }\r\n    update(dt) {\r\n        const newPosX = this.pos.x + this.velX * dt\r\n        const newPosY = this.pos.y + this.velY * dt\r\n        this.pos.x = clamp(this.clampX0, this.clampX1, newPosX)\r\n        this.pos.y = clamp(this.clampY0, this.clampY1, newPosY)\r\n\r\n        ;(this.pos.x !== newPosX) && (this.velX *= -1) // in case the entity moved beyond it's x bounds, reverse it's x-velocity\r\n        ;(this.pos.y !== newPosY) && (this.velY *= -1) // same with the y-velocity\r\n    }\r\n}\r\n\r\nexport default MovableEnt","import getTestFn from \"@lib/components/Collision/helpers/getTestFn\"\r\nimport MovableEnt from \"./MovableEnt\"\r\n\r\nconst ANG_VEL = Math.PI\r\nclass SawBlade extends MovableEnt {\r\n    constructor(x, y, frame, toX=x, toY=y, speed=100, player) {\r\n        super(x, y, frame, toX, toY, speed)\r\n        this.anchor = {\r\n            x: this.width / 2,\r\n            y: this.height / 2\r\n        }\r\n        this.player = player\r\n        this.radius = this.width / 2\r\n        this.hitCirc = this.hitCirc ?? { x: 0, y: 0, radius: this.radius - 2 }\r\n        this.rotation = 0\r\n        this.testCol = getTestFn(this, player)\r\n        if (this.velX || this.velY) { this.forceUpdate = true }\r\n    }\r\n    update(dt) {\r\n        const dRot = (this.velX  - this.velY) * dt / (2 * this.radius)\r\n        super.update(dt)\r\n        this.rotation += dRot || ANG_VEL * dt\r\n        if (this.testCol(this, this.player)) {\r\n            this.player.visible && this.player.explode()\r\n        }\r\n    }\r\n}\r\n\r\nexport default SawBlade","import { TexRegion } from \"@lib/entities\"\r\nimport getTestFn from \"@lib/components/Collision/helpers/getTestFn\"\r\nimport MovableEnt from \"./MovableEnt\"\r\n\r\nconst offset = 2\r\nconst hheight = 24 // laser head height\r\nconst bLen = 48 // laser body length\r\nconst bWidth = 12 // laser body width\r\nclass Laser extends MovableEnt {\r\n    startX\r\n    startY\r\n    constructor(x, y, toX = x, toY = y, speed = 100, num = 2, vert, period, delay=0, on = true, player, sounds) {\r\n        const frame = vert ? \"vlhd\" : \"hlhd\"\r\n        const bFrame = vert ? \"vlbod\" : \"hlbod\" // body frame\r\n        const xOffset = vert ? offset : hheight\r\n        const yOffset = vert ? hheight : hheight - offset - bWidth\r\n        const xStep = vert ? 0 : bLen\r\n        const yStep = vert ? bLen : 0\r\n        super(x, y, frame, toX, toY, speed)\r\n        this.startX = x\r\n        this.startY = y\r\n        this.player = player\r\n        for (let i = 0; i < num; i++) {\r\n            const body = new TexRegion({ frame: bFrame })\r\n            body.pos.x += xOffset + xStep * i\r\n            body.pos.y += yOffset + yStep * i\r\n            body.alpha = on ? 1 : 0\r\n            this.add(body)\r\n        }\r\n        this.hitbox = {\r\n            x: vert ? offset : 0,\r\n            y: vert ? 0 : offset,\r\n            width: vert ? bWidth : hheight + bLen * num,\r\n            height: vert ? hheight + bLen * num : hheight\r\n        }\r\n        this.testCol = getTestFn(this, this.player)\r\n        this.on = on\r\n        if (!!period) {\r\n            this.period = period\r\n            this.t = 0\r\n            this.sounds = sounds\r\n        }\r\n        this.delay = delay\r\n    }\r\n    update(dt) {\r\n        super.update(dt)\r\n        if (this.delay > 0) {\r\n            this.delay -= dt\r\n            return\r\n        }\r\n        this.elapsed += dt\r\n        if (this.testCol(this, this.player) && this.player.visible && this.on) {\r\n            this.player.explode()\r\n        }\r\n        \r\n        if (!this.period) return\r\n\r\n        this.t += dt\r\n\r\n        if (this.t <= this.period) return\r\n\r\n        this.on = !this.on\r\n        this.t = 0\r\n        for (let child of this.children) {\r\n            child.alpha = this.on ? 1 : 0\r\n        }\r\n        const dPX = this.pos.x - this.player.pos.x\r\n        const dPY = this.pos.y - this.player.pos.y\r\n        if (dPX * dPX + dPY * dPY > 90000) return // if the player is farther than 300px return\r\n        if (this.on) {\r\n            this.sounds.on.play()\r\n            return\r\n        }\r\n        this.sounds.off.play()\r\n    }\r\n    reset() {\r\n        this.pos.x = this.startX\r\n        this.pos.y = this.startY\r\n        this.t = 0\r\n    }\r\n}\r\n\r\nexport default Laser","import getTestFn from \"@components/Collision/helpers/getTestFn\"\r\nimport ParticleEmitter from \"@lib/utils/ParticleEmitter\"\r\n\r\nclass Fire extends ParticleEmitter { // it's no ordinary fire, it's an end-marker fire\r\n    _player = null\r\n    testCol = null\r\n    constructor(supProps, onTouch) {\r\n        super(supProps)\r\n        ParticleEmitter.feed(this, 120, 0.02) // feed 2.4 (120 iterations * 0.02 second time step ) seconds worth of update to stabilize the fire\r\n        this.hitbox = {\r\n            x: -20, width: 40, \r\n            y: -15, height: 17\r\n        }\r\n        this.onTouch = onTouch\r\n    }\r\n    get player() {\r\n        return this._player\r\n    }\r\n    set player(val) {\r\n        if (this._player) { return }\r\n        this._player = val\r\n        this.testCol = getTestFn(this, val)\r\n    }\r\n    reset() { }\r\n    update() {\r\n        if (!this.player) { return }\r\n        if (this.testCol(this, this.player)) {\r\n            this.pos.x - 32\r\n            this.pos.y - 64\r\n            this.remove()\r\n            this.onTouch()\r\n        }\r\n    }\r\n    onRemove() {\r\n        this.parent = null\r\n    }\r\n}\r\n\r\nexport default Fire","import { TexRegion, Node } from \"@lib\"\r\nimport { objLayerId } from \"@lib/constants\"\r\nimport { clamp } from \"@utils/math\"\r\nimport Timer from \"@utils/Timer\"\r\n\r\nconst initFrame = \"lcr1\"\r\nconst dmgToFrame = [\r\n    \"lcr2\",\r\n    \"lcr3\"\r\n]\r\nclass Crate extends TexRegion { // breakable crate class\r\n    constructor(x, y, dmgFacs, orbPool, sounds, luck=75, dmg=0, temp=false, player) {\r\n        super({ frame: initFrame, pos: { x, y }})\r\n        this.dmgFacs = dmgFacs\r\n        this.orbPool = orbPool\r\n        this.player = player\r\n        this.sounds = sounds\r\n        this.luck = luck\r\n        this.temp = temp\r\n        this.setDamage(dmg)\r\n        this.reset = () => {\r\n            this.alpha = 1\r\n            this.setDamage(dmg)\r\n        }\r\n    }\r\n    setDamage(dmg) {\r\n        this.damage = clamp(0, dmgToFrame.length, dmg)\r\n        if (this.damage > 0) {\r\n            return  this.frame = dmgToFrame[this.damage - 1]\r\n        } \r\n        this.frame = initFrame\r\n    }\r\n    takeDamage(vy) {\r\n        if (Math.abs(vy) < 300) { return }\r\n        \r\n        this.damage++\r\n        this.sounds.crack.play()\r\n        if (this.damage > dmgToFrame.length) {\r\n            this.break(vy)\r\n            return\r\n        }\r\n        this.frame = dmgToFrame[this.damage - 1]\r\n    }\r\n    break(vy) {\r\n        if (this.temp) {\r\n            this.remove()\r\n        } else {\r\n            this.alpha = 0\r\n        }\r\n        const dir = vy > 0 ? \"down\": \"up\" \r\n        const particle = this.dmgFacs[dir].create()\r\n        particle.pos.x = this.pos.x\r\n        particle.pos.y = this.pos.y\r\n        this.sounds.snap.play()\r\n        if (Math.random() < this.luck / 100) { // chance of spawning is determined by luck factor\r\n            const orb = this.orbPool.create(this.pos.x - 6 + this.width / 2, this.pos.y -6 + this.height / 2, null,  this.player )\r\n            orb.active = false\r\n            orb.add(new Timer(0.6, null, () => {\r\n                orb.active = true\r\n            }))\r\n            Node.get(objLayerId).add(orb)\r\n        }\r\n        Node.get(objLayerId).add(particle)\r\n    }\r\n}\r\n\r\nexport default Crate","class Pool {\r\n    constructor({ factory, size, free, reset }) {\r\n        this.factory = factory\r\n        this.size = size\r\n        this.free = free\r\n        this.reset = reset\r\n        this.list = Array(size).fill(false)\r\n        this.lastIdx = 0\r\n    }\r\n    create(...params) {\r\n        this.lastIdx = (this.lastIdx + 1) % this.list.length\r\n        if (!this.list[this.lastIdx]) { \r\n            this.list[this.lastIdx] = this.factory(...params)\r\n        } else { \r\n            this.reset && this.reset(this.list[this.lastIdx], ...params)\r\n            this.free && this.free(this.list[this.lastIdx])\r\n        }\r\n        const obj = this.list[this.lastIdx]\r\n        \r\n        return obj\r\n    }\r\n}\r\n\r\nexport default Pool","import { TexRegion } from \"@lib\"\r\nimport { easingFns } from \"@utils/math\"\r\n\r\nclass Bus extends TexRegion {\r\n    hitbox = {\r\n        x: 2,\r\n        y: 0,\r\n        width: 86,\r\n        height: 88\r\n    }\r\n    constructor(x, y, toX, toY, period) { // spawn points for movable collidable entities have to be on midground layer (on tiled layer should be set to mg)\r\n        super({ pos: { x, y }, frame: \"crane\" })\r\n        this.prevPosY = this.pos.y\r\n        this.prevPosX = this.pos.x\r\n        this.mat = \"metal\"\r\n        this.movable = true\r\n\r\n        this.dispY = toY - y\r\n        this.distX = toX - x\r\n        this.meanX = x\r\n        this.meanY = y\r\n        this.period = period\r\n        this.t = 0\r\n\r\n    }\r\n    update(dt) {\r\n        this.t += dt\r\n        this.pos.y = this.meanY + easingFns.smoothStep(this.t / this.period) * this.dispY\r\n        if (this.t > this.period) {\r\n            this.meanY = this.meanY + this.dispY\r\n            this.pos.y = this.meanY\r\n            this.dispY *= -1\r\n            this.t = 0\r\n        }\r\n        this.velY = (this.pos.y - this.prevPosY) / dt\r\n    }\r\n}\r\n\r\nexport default Bus","import ParticleEmitter from \"@lib/utils/ParticleEmitter\"\r\nimport Orb from \"@entities/Orb\"\r\nimport Gate from \"@entities/Gate\"\r\nimport Wind from \"@entities/Wind\"\r\nimport Magnet from \"@entities/Magnet\"\r\nimport Ball from \"@entities/Ball\"\r\nimport SawBlade from \"@entities/SawBlade\"\r\nimport Laser from \"@entities/Laser\"\r\nimport Fire from \"@entities/Fire\"\r\nimport Crate from \"@entities/Crate\"\r\nimport Pool from \"@utils/Pool\"\r\nimport Bus from \"@entities/Bus\"\r\nimport levels from \"@config/levels\"\r\n\r\nimport particlesId from \"@assets/particles/all.cson\"\r\n\r\nexport default ({ soundSprite, assetsCache, storage, player, state }) => { // using sound sprite to create and pass objects and (cached) pools so that objects can just consume sound in ready-to-use form rather than by creating them on their own. This helps me make sound creation parameters changes at one place, making code more scalable.\r\n    const gateUSound = soundSprite.create(\"gate_u\") // collision with ceiling\r\n    const gateDSound = soundSprite.create(\"gate_d\")\r\n    const orbSound = soundSprite.createPool(\"orb\")\r\n    const endSound = soundSprite.create(\"end\")\r\n    const lasSounds = {\r\n        on: soundSprite.createPool(\"las_on\"),\r\n        off: soundSprite.createPool(\"las_off\")\r\n    }\r\n    \r\n    const particles = assetsCache.get(particlesId)\r\n    const createOrbPool = (temp, size, orbSound, storage) => {\r\n        const orbFac = (x, y, props, player) => { // factory for creating orbs at orb spawn points in the map\r\n            return new Orb(Object.assign(\r\n                { },\r\n                particles.orb,\r\n                { player, pos: { x, y }, sound: orbSound, storage, temp },\r\n            ))\r\n        }\r\n        const orbPool = new Pool({\r\n            factory: orbFac,\r\n            size,\r\n            free(obj) {\r\n                obj.chasing = false\r\n                obj.remove() // remove the object from it's parent\r\n            },\r\n            reset(obj, x, y) {\r\n                obj.chasing = false\r\n                obj.pos.x = x\r\n                obj.pos.y = y\r\n            }\r\n        })\r\n        return orbPool\r\n    }\r\n    const orbPool = createOrbPool(false, 5, orbSound, storage)\r\n    const tempOrbPool = createOrbPool(true, 2, orbSound, storage)\r\n    const windPool = new Pool({\r\n        factory: (x, y, props, player) => {\r\n            return new Wind(\r\n                particles.wind,\r\n                x, y, player\r\n            )\r\n        },\r\n        size: 2,\r\n        free(obj) {\r\n            obj.remove()\r\n        },\r\n        reset(obj, x, y) {\r\n            obj.pos.x = x\r\n            obj.pos.y = y - 10\r\n        },\r\n    })\r\n\r\n    const onFireTouch = () => {\r\n        const bestTime = storage.getHiscore(state.level) || 0\r\n        const curTime = state.elapsed\r\n        if (state.level === storage.getCurLevel() && state.level < levels.length) {\r\n            storage.setCurLevel(state.level + 1)\r\n        }\r\n        if (bestTime === 0 || curTime < bestTime) {\r\n            storage.setHiscore(state.level, curTime)\r\n        }\r\n        endSound.play()\r\n        state.complete(curTime, bestTime)\r\n    }\r\n    const fire = new Fire(particles.fire, onFireTouch)\r\n    const crateDmgFacs = Object.freeze({\r\n        up: new Pool({\r\n            factory: () => {\r\n                const particle = new ParticleEmitter(particles.crateUp)\r\n                particle.onRemove = () => { // clear reference for garbage collector\r\n                    particle.parent = null\r\n                }\r\n                return particle\r\n            },\r\n            size: 2\r\n        }),\r\n        down: new Pool({\r\n            factory: () => {\r\n                const particle = new ParticleEmitter(particles.crateDown)\r\n                particle.onRemove = () => { // clear reference for garbage collector\r\n                    particle.parent = null\r\n                }\r\n                return particle\r\n            },\r\n            size: 2\r\n        }),\r\n    })\r\n    const wSounds = { // wood sounds\r\n        snap: soundSprite.createPool(\"w_snap\"),\r\n        crack: soundSprite.createPool(\"w_crack\")\r\n    }\r\n    const playerFac = (x, y, props) => {\r\n        player.reset = () => {\r\n            player.pos.x = x\r\n            player.pos.y = y\r\n            player.alpha = 1\r\n            player.velY = player.velX = 0\r\n            player.controls.switchState(\"jumping\", player, true) // revert to jumping state\r\n        }\r\n        player.rotation = props.slide === true ? NaN: 0\r\n        player.reset()\r\n        return player\r\n    }\r\n    return ({\r\n        player: playerFac,\r\n        gate: (x, y, props, player) => {\r\n            return new Gate({\r\n                pos: { x, y },\r\n                colSound: null,\r\n                uSound: gateUSound,\r\n                dSound: gateDSound,\r\n                player,\r\n                ...props\r\n            })\r\n        },\r\n        orb: orbPool.create.bind(orbPool),\r\n        wind: windPool.create.bind(windPool),\r\n        fire: (x, y, _, player) => {\r\n            fire.parent && fire.remove()\r\n            fire.player = player\r\n            fire.pos.x = x\r\n            fire.pos.y = y\r\n            return fire\r\n        },\r\n        magnet: (x, y) => {\r\n            return new Magnet({ pos: { x, y }, frame: \"magnet\" })\r\n        },\r\n        ball: (x, y, props, player) => {\r\n            return new Ball(x, y, props.seq, player)\r\n        },\r\n        sb1: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb1\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        sb2: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb2\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        sb3: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb3\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        sb4: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb4\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        sb5: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb5\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        sb6: (x, y, props, player) => {\r\n            return new SawBlade(x, y,  \"sb6\", props.toX, props.toY, props.speed, player)\r\n        },\r\n        lcr1: (x, y, props, player) => {\r\n            return new Crate(x, y, crateDmgFacs, tempOrbPool, wSounds, props.luck, props.dmg, props.temp, player)\r\n        },\r\n        vlhd: (x, y, props, player) => {\r\n            return new Laser(x, y, props.toX, props.toY, props.speed, props.num, true, props.period, props.delay, props.on, player, lasSounds)\r\n        },\r\n        hlhd: (x, y, props, player) => {\r\n            return new Laser(x, y, props.toX, props.toY, props.speed, props.num, false, props.period,props.delay, props.on, player, lasSounds)\r\n        },\r\n        bus: (x, y, props) => {\r\n            return new Bus(x, y, props.toX, props.toY, props.period)\r\n        }\r\n    })\r\n}","import { rectBounds, getHitbox, setLocalPosX, setLocalPosY } from \"@lib/utils/entity\"\r\n\r\nexport default  Object.freeze({\r\n    oneOff: false, // indicating the collison resolution happens component-wise\r\n    resolveX: (entity, block, movementX, movable) => {\r\n        const blockBounds = rectBounds(block)\r\n        const hb = getHitbox(entity)\r\n        entity.velX = movable ? entity.velX: 0\r\n        movable && (block.unduePosXUpdate = movementX * 0.5)\r\n        if (movementX > 0) { // collision with the left edge\r\n            setLocalPosX(entity, blockBounds.x - hb.width - hb.x)\r\n            return\r\n        }\r\n        // collision with the right edge\r\n        setLocalPosX(entity, blockBounds.x + blockBounds.width - hb.x)\r\n    },\r\n    resolveY: (entity, block, movementY) => {\r\n        const blockBounds = rectBounds(block)\r\n        const hb = getHitbox(entity)\r\n        entity.velY = 0\r\n        if (movementY > 0) { // collision with the top edge\r\n            setLocalPosY(entity, blockBounds.y - hb.height - hb.y)\r\n            return\r\n        }\r\n        // collision with the bottom edge\r\n        setLocalPosY(entity, blockBounds.y + blockBounds.height - hb.y )\r\n    }\r\n})\r\n","import { clamp, sign, atan } from \"@utils/math\"\r\nimport { rectBounds, circBounds, setLocalPosX, setLocalPosY } from \"@lib/utils/entity\"\r\nimport { offLeftThreshold, offRightThreshold, offEdgeReboundSpeed } from \"@lib/constants\"\r\n\r\nexport default  Object.freeze({\r\n    oneOff: false,\r\n    resolveX: (entity, block, movementX) => {\r\n        // debugger\r\n        if (entity.offEdge) { return }\r\n        const blockBounds = rectBounds(block)\r\n        const entBounds = circBounds(entity)\r\n        const hc = entity.hitCirc\r\n        const nearestBlockYFromEntCenter = clamp(blockBounds.y, blockBounds.y + blockBounds.height, entBounds.y + entBounds.radius)\r\n        let xOffset = 0\r\n        if (nearestBlockYFromEntCenter === blockBounds.y || nearestBlockYFromEntCenter === blockBounds.y + blockBounds.height) { // if the circle is off edge\r\n            const offedge = Math.abs(nearestBlockYFromEntCenter - (entBounds.y + entBounds.radius))\r\n            xOffset = entBounds.radius - Math.sqrt(entBounds.radius * entBounds.radius - offedge * offedge)\r\n        }\r\n        \r\n        const prevPosX = entity.pos.x\r\n        const relMovX = movementX - (block.movable ? block.pos.x - block.prevPosX: 0) // taking into consideration movement of block relative to block rather than just plain block \r\n        if (relMovX > 0) { // collision with the left edge\r\n            setLocalPosX(entity, blockBounds.x - hc.x - 2 * entBounds.radius + xOffset)\r\n        } else {\r\n            // collision with the right edge\r\n            setLocalPosX(entity, blockBounds.x + blockBounds.width - hc.x - xOffset)\r\n        }\r\n        \r\n        const dPosX = entity.pos.x - prevPosX\r\n        const normalizedNetMovement = (relMovX + dPosX) / relMovX\r\n        entity.velX = xOffset ? sign(entity.velX): 0 // if there is xOffset, the ball is trying to penetrate the sides through offEdge position; in that case velocity direction has to be left intact so that the sebsequent y-collision logic can know off which edge to set on entity \r\n        entity.rotation = entity.prevRot + normalizedNetMovement * (entity.rotation - entity.prevRot)\r\n    },\r\n    resolveY: (entity, block, movementY) => { // returns a boolean indicating whether the entity is falling\r\n        if (entity.offEdge) { return }\r\n        const blockBounds = rectBounds(block)\r\n        const hc = entity.hitCirc\r\n        const entBounds = circBounds(entity)\r\n        const nearestBlockXFromEntCenter = clamp(blockBounds.x, blockBounds.x + blockBounds.width, entBounds.x + entBounds.radius)\r\n        const relMovY = movementY - (block.movable ? block.pos.y - block.prevPosY: 0)\r\n        let yOffset = 0\r\n        if (nearestBlockXFromEntCenter === blockBounds.x || nearestBlockXFromEntCenter === blockBounds.x + blockBounds.width) { // if the circle is off edge\r\n            const offedge = Math.abs(nearestBlockXFromEntCenter - (entBounds.x + entBounds.radius))\r\n            yOffset = entBounds.radius - Math.sqrt(entBounds.radius * entBounds.radius - offedge * offedge)\r\n        }\r\n        entity.velY = !!block.movable && block.velY > 0 ? block.velY: 0 \r\n        if (relMovY > 0) { // collision with the top edge\r\n            let falling = false\r\n            if (yOffset) {\r\n                const offWhichEdge = nearestBlockXFromEntCenter === blockBounds.x ? -1: 1\r\n                const movingAway = sign(entity.velX) === offWhichEdge\r\n                if (movingAway) { \r\n                    entity.velX += offWhichEdge * 2 // prevent the ball from sticking to the corner                                                 \r\n                    falling = true\r\n                } else { // if the entity isn't moving away from the corner\r\n                    entity.offEdge = offWhichEdge\r\n                    entity.offCorner = block\r\n                    const angle = atan(blockBounds.y - (entBounds.y + entBounds.radius), blockBounds.x + (offWhichEdge === 1 ? blockBounds.width: 0) - (entBounds.x + entBounds.radius))\r\n                    // if far enough off-edge to topple, move the entity to non-colliding state\r\n\r\n                    if (offWhichEdge === -1 && angle < offLeftThreshold || offWhichEdge === 1 && angle > offRightThreshold) { \r\n                        entity.velX = offWhichEdge * Math.max(offEdgeReboundSpeed, Math.abs(entity.velX))\r\n                    }\r\n                }\r\n            }\r\n            setLocalPosY(entity, blockBounds.y - hc.y - 2 * entBounds.radius + yOffset)\r\n            return falling\r\n        }\r\n        // collision with the bottom edge\r\n        setLocalPosY(entity, blockBounds.y + blockBounds.height - hc.y - yOffset)\r\n    }\r\n})\r\n","import { Node } from \"@lib\"\r\nimport getTestFn from \"./helpers/getTestFn\"\r\nimport getUpdateHandler from \"./helpers/getUpdateHandler\"\r\n\r\nclass Collision {\r\n    constructor({ entity, block, blocks, onHit = () => {}, rigid=false, movable=true }) { // block and blocks are both optional, but one of them must be passed\r\n        /**\r\n         * ------------------------------------\r\n         *  rigid  | movable | instance | testFn\r\n         * ------------------------------------\r\n         *  true   |  true  |   crate  | normal\r\n         *  true   |  false |   wall   | fixed\r\n         *  false  |  true  |   enemy  | normal\r\n         *  false  |  false |   zone   | normal\r\n         */\r\n        this.entity = entity\r\n        this.oneToOne = Boolean(block)  && !Boolean(blocks)\r\n        this.onHit = onHit\r\n        this.block = block\r\n        this.blocks = blocks\r\n        this.evaluateUpdateFn = () => { \r\n            const blocks = Node.get(this.blocks)\r\n            const block = Node.get(this.block)\r\n            const sampleBlock = this.oneToOne ? block : blocks && blocks.children[0]\r\n            if (!sampleBlock) { return }\r\n            // inferring collision test and update functions automatically\r\n            this.testFn = getTestFn(this.entity, sampleBlock, { rigid, movable }) \r\n            return getUpdateHandler(this.entity, sampleBlock, { rigid, movable, collision: this, })\r\n        }\r\n    }\r\n    resolve(block, resolveFn, checkFalsePositive) {\r\n        const yUndoneBy = checkFalsePositive && block.movable ? block.pos.y - block.prevPosY: 0\r\n        block.pos.y -= yUndoneBy\r\n        block.alpha !== 0 && this.testFn(this.entity, block) && resolveFn(block)\r\n        block.pos.y += yUndoneBy\r\n    }\r\n    test(resolveFn, checkFalsePositive) {\r\n        if (this.oneToOne) {\r\n            const block = Node.get(this.block)\r\n            this.resolve(block, resolveFn, checkFalsePositive)\r\n            return\r\n        }\r\n\r\n        /**\r\n         * if the block is movable we might get a false positive (or false negative) on x-collision test\r\n         * setting checkFalsePositive param to true during x-collison test (after undoing entity y movement) allows us\r\n         * to resolve that; we need to undo block y movement too so we know it's indeed movementX (or movementY)\r\n         * that is responsible for collision\r\n         */\r\n        const blocks = Node.get(this.blocks)\r\n        if (!blocks) { return }\r\n        for (let i = blocks.children.length - 1; i > -1; i--) {\r\n            const block = blocks.children[i]\r\n            this.resolve(block, resolveFn, checkFalsePositive)\r\n        }\r\n    }\r\n    update() { \r\n        const updateFn = this.evaluateUpdateFn() // deferring the evaluation of update function until collision block(s) materialize\r\n        if (updateFn) { \r\n            this.update = updateFn\r\n            this.evaluateUpdateFn = null // clearing reference to this function so it can be garbage collected\r\n            updateFn()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Collision","import getResolver from \"./getResolver\"\r\n\r\nexport default (entity, block, { rigid, collision }) => {\r\n    if (!rigid) { // default update handler\r\n        return () => collision.test(collision.onHit)\r\n    }\r\n    const resolver = getResolver(entity, block)\r\n    if (resolver.oneOff) { // if collsion resolution happens one-off rather than component-wise\r\n        return () => {\r\n            collision.test(block => {\r\n                resolver.resolve(entity, block)\r\n                collision.onHit(block)\r\n            })\r\n        }\r\n    }\r\n    return () => { // update handler with collison resolution logic\r\n        const movementX = entity.pos.x - entity.prevPosX\r\n        const movementY = entity.pos.y - entity.prevPosY\r\n        let xResolved = false\r\n        \r\n        entity.pos.y = entity.prevPosY // undoing y movement so we can test x collision first\r\n        collision.test(block => {\r\n            // if (block.movable) {\r\n            //     /**\r\n            //      * if the block is movable we might get a false positive on collision test\r\n            //      * to resolve that, we need to undo block y movement so we know it's indeed movementX (or movementY)\r\n            //      * that is responsible for collision\r\n            //      */\r\n            //     const blockPosY = block.pos.y\r\n            //     block.pos.y = block.prevPosY  // undo y movement\r\n            //     const stillColliding = collision.testFn(entity, block)\r\n            //     block.pos.y = blockPosY // redo y movement\r\n            //     if (!stillColliding) return\r\n            // }\r\n            const velX = entity.velX\r\n            resolver.resolveX(entity, block, movementX)\r\n            collision.onHit(block, velX, 0, !(entity.pos.x === entity.prevPosX)) // last argument is a flag indicating whether the ball (moved) collided from non colliding position\r\n            xResolved = true\r\n        }, true)\r\n\r\n        entity.pos.y += movementY // redoing y movement\r\n        collision.test(block => {\r\n            /**\r\n             * imprecise floating point calculation is responsible for this weird glitch\r\n             * because of this, the collision is resolved to an imprecise position, off by just a factor of about 10^-12\r\n             * in this case, even after the code resoves x collision, the entity still tests positive for aabb test\r\n             * and as a result y movement gets falsely blamed responsible for collision. This, in turn, teleports our entity from the left to the top of the block \r\n             * All this is the result of calculating global pos with camera as the root node. Since camera itself moves, it has a floating point coordinates,\r\n             * so when performing global block bounds calculation, x and y values get rounded off. thus the collision sometimes resolves to imprecise local coordinates, \r\n             * hence resulting in this messy situation.\r\n             * \r\n             * Besides, movable objects usually have extremely precise floating point coordinates (because movement parameters calculations depend on very precise dt given by request anim frame)\r\n             * when adding an integer to this number (movableEntity.pos.x + movableEntity.width), occasionally one or more final digits get inconsistently rounded off, which often fools our\r\n             * collision detection test. That way, we again end up with a buggy system.\r\n             * \r\n             * to address these issues:\r\n             * 1. to avoid the first bug, movable entities must not have parents with floating point coordinates. For this, the following should hold true:\r\n             *      movable entities's parent should preferably be static \r\n             *      or their movement must be constrained to integer coordinates \r\n             *      or the movable entities should be direct decendants of the root node\r\n             *      and the camera position (or the root node) must be an integer\r\n             *    besides, entity dimensions cannot be floats\r\n             * 2. to avoid the second bug, while performing collision test with a movable rigid body, the floating point coordinates should be stripped to low enough precision (in most cases, up to 4 decimal places) \r\n             */\r\n            const velY = entity.velY\r\n            const falling = resolver.resolveY(entity, block, movementY)\r\n            if (falling) {\r\n                return entity.onFall && entity.onFall()\r\n            }\r\n            collision.onHit(block, 0, velY, !(entity.pos.y === entity.prevPosY))\r\n        }, false)\r\n    }\r\n}","import { shapes, detectShape } from \"@lib/utils/entity\"\r\nimport aabbResolver from \"./resolvers/aabb\"\r\nimport circAabbResolver from \"./resolvers/circAabb\"\r\n\r\nexport default (entity, block, movable) => {\r\n    const entityShape = detectShape(entity)\r\n    const blockShape = detectShape(block)\r\n    if (entityShape === shapes.RECT && blockShape === shapes.RECT) {\r\n        return aabbResolver\r\n    }\r\n    if (entityShape === shapes.CIRC && blockShape === shapes.RECT) {\r\n        return circAabbResolver\r\n    } \r\n    throw new Error(`No resolver found for shapes ${entityShape} and ${blockShape}`)\r\n}","const getKeyCode = e => {\r\n    const keyCode = e.which || e.keyCode\r\n    if (typeof keyCode === \"number\") {\r\n        return keyCode\r\n    }\r\n    switch(e.key) {\r\n        case \"Left\": // for IE and Older Versions of Edge\r\n        case \"ArrowLeft\": // Standard\r\n            return 37\r\n        case \"Right\":\r\n        case \"ArrowRight\":\r\n            return 39        \r\n        case \"Up\":\r\n        case \"ArrowUp\":\r\n            return 38\r\n        case \"A\":\r\n        case \"a\":\r\n            return 65\r\n        case \"D\":\r\n        case \"d\":\r\n            return 68\r\n        case \"W\":\r\n        case \"w\":\r\n            return 87\r\n        case \" \":\r\n            return 32\r\n        default:\r\n            return -1\r\n    }\r\n}\r\n\r\nclass KeyControls {\r\n    constructor(mappings) {\r\n        this.mappings = mappings\r\n        this.keys = { }\r\n        for (const keyAlias in mappings) {\r\n            const key = mappings[keyAlias]\r\n            if (Array.isArray(key)) {\r\n                for (const k of key) {\r\n                    this.keys[k] = { pressed: false, held: false }\r\n                }\r\n                continue\r\n            }\r\n            this.keys[key] = { pressed: false, held: false }\r\n        }\r\n        this.keysArr = Object.values(this.keys)\r\n        this.keysLen = this.keysArr.length\r\n\r\n        document.addEventListener(\"keydown\", e => {\r\n            const keyCode = getKeyCode(e)\r\n            const key = this.keys[keyCode]\r\n            if (!!key) {\r\n                key.held = true\r\n                key.pressed = true\r\n            }\r\n        })\r\n\r\n        document.addEventListener(\"keyup\", e => {\r\n            const keyCode = getKeyCode(e)\r\n            const key = this.keys[keyCode]\r\n            if (!!key) {\r\n                key.held = false\r\n            }\r\n        })\r\n\r\n        document.addEventListener(\"blur\", this.resetAll.bind(this))\r\n        window.addEventListener(\"blur\", this.resetAll.bind(this))\r\n    }\r\n    get(keyAlias, attrib = \"held\") {\r\n        const key = this.mappings[keyAlias]\r\n        if (Array.isArray(key)) {\r\n            return key.find(code => this.keys[code][attrib] === true)\r\n        }\r\n        return this.keys[key][attrib]\r\n    }\r\n    reset() {\r\n        for (let i = this.keysLen - 1; i > -1; i--) {\r\n            this.keysArr[i].pressed = false\r\n        }\r\n    }\r\n    resetAll() {\r\n        for (let i = this.keysLen - 1; i > -1; i--) {\r\n            this.keysArr[i].pressed = false\r\n            this.keysArr[i].held = false\r\n        }\r\n    }\r\n}\r\n\r\nexport default KeyControls","class TouchControls {\r\n    constructor(mappings) {\r\n        this.mappings = mappings\r\n        this.btns = { }\r\n        for (let btnAlias in mappings) {\r\n            this.btns[btnAlias] = { pressed: false, held: false }\r\n            const btn = mappings[btnAlias]\r\n            btn.on(\"touchstart\", () => {\r\n                const m = this.btns[btnAlias] // button meta\r\n                m.pressed = true\r\n                m.held = true\r\n            })\r\n            btn.on(\"touchend\", () => {\r\n                const m = this.btns[btnAlias] // button meta\r\n                m.pressed = false\r\n                m.held = false\r\n            })\r\n        }\r\n        this.btnsArr = Object.values(this.btns)\r\n        this.btnsLen = this.btnsArr.length\r\n    }\r\n    get(btnAlias, attrib = \"held\") {\r\n        return this.btns[btnAlias][attrib]\r\n    }\r\n    reset() {\r\n        for (let i = this.btnsLen - 1; i > -1; i--) {\r\n            this.btnsArr[i].pressed = false\r\n        }\r\n    }\r\n}\r\n\r\nexport default TouchControls","import KeyControls from \"@lib/components/controls/KeyControls\"\r\nimport TouchControls from \"@lib/components/controls/TouchControls\"\r\nimport { clamp } from \"@utils/math\"\r\n\r\nconst extendPalyerControls = S => class extends S {\r\n    stateSwitched = false // a helper flag for preventing multiple state updates every frame making sure the first one gets the precendence \r\n    constructor(speed=100, mappings, onJump=() => {}, gameState) {\r\n        super(mappings)\r\n        this.gameState = gameState\r\n        this.speed = speed\r\n        this.states = {\r\n            offEdge: new OffEdge(this),\r\n            jumping: new Jumping(this, onJump),\r\n            rolling: new Rolling(this),\r\n        }\r\n        this.state = this.states.jumping\r\n        this.state.limitReached = true\r\n    }\r\n    cleanup() {\r\n        this.reset() // reset pressed attribute on all keys\r\n        this.stateSwitched = false // reset stateSwitched for the next frame\r\n    }\r\n    switchState(name, ...params) {\r\n        if (this.stateSwitched || name === this.state.name) { return } // disallow state switching more than once every frame\r\n        this.state.onExit && this.state.onExit() // execute previous state's onExit hook, in case there's one\r\n        this.state = this.states[name]\r\n        this.state.onEnter && this.state.onEnter(...params)\r\n        this.stateSwitched = true\r\n    }\r\n    update(entity, dt) {\r\n        if (!this.gameState.is(\"playing\")) return\r\n        this.state.update(entity, dt)\r\n        this.cleanup()\r\n    }\r\n}\r\n\r\n\r\nclass Rolling {\r\n    name = \"rolling\"\r\n    constructor(controls) {\r\n        this.controls = controls\r\n    }\r\n    onEnter() {\r\n    }\r\n    update(entity, dt) {\r\n        if (this.controls.get(\"left\")) {\r\n            entity.velX -= (entity.velX > 0 ? 3 : 1) * this.controls.speed * dt \r\n        }\r\n        if (this.controls.get(\"right\")) {\r\n            entity.velX += (entity.velX < 0 ? 3 : 1) * this.controls.speed * dt \r\n        }\r\n        if (this.controls.get(\"axn\")) {\r\n            this.controls.switchState(\"jumping\", entity)\r\n        }\r\n    }\r\n}\r\n\r\nclass Jumping {\r\n    name = \"jumping\"\r\n    jmpVel = -260\r\n    maxJvelInc = 5.5\r\n    minJmpVel = -375\r\n    mxJmpVel = 150\r\n    first = false // whether it is the first frame since last\r\n    constructor(controls, onJump) {\r\n        this.controls = controls\r\n        this.onJump = onJump\r\n    }\r\n    onEnter(entity, limReached=false) {\r\n        if (limReached || entity.velY > this.mxJmpVel) { \r\n            // if jump state begins from peak height (like when falling off the edge of a wall)\r\n            // or if the player is not fast enough to press jump after floor underneath has collapsed\r\n            // no more height can be gained\r\n            this.limitReached = true\r\n            return\r\n        }\r\n        this.limitReached = false\r\n        entity.velY += this.jmpVel\r\n        this.first = true // indicating whether this is the first \"Jump\" state frame\r\n    }\r\n    onHalt() { // obstruct jump prematurely (mostly by collision with bottom edge of a rect)\r\n        this.limitReached = true\r\n    }\r\n    update(entity, dt) {\r\n        if (this.first && entity.velY < 0) { // if the jump is actually possible (there's nothing above blocking the player) and the player isn't falling down\r\n            this.onJump()\r\n        }\r\n        this.first = false\r\n        if (this.controls.get(\"left\")) {\r\n            entity.velX -= (entity.velX > 0 ? 3 : 1) * this.controls.speed * dt \r\n        }\r\n        if (this.controls.get(\"right\")) {\r\n            entity.velX += (entity.velX < 0 ? 3 : 1) * this.controls.speed * dt \r\n        }\r\n        if (this.controls.get(\"axn\")) {\r\n            if (entity.velY < this.minJmpVel || entity.velY > this.mxJmpVel) { this.limitReached = true }\r\n            if (this.limitReached) { return }\r\n            entity.velY += this.jmpVel * ( Math.min(this.maxJvelInc, (entity.velY * entity.velY) / 100)) * dt \r\n        } else { this.limitReached = true } // if the player has stopped pressing \"axn\" key, player won't gain anymore velocity in this jump\r\n    }\r\n}\r\n\r\nclass OffEdge {\r\n    name = \"offEdge\"\r\n    constructor(controls) {\r\n        this.controls = controls\r\n    }\r\n    update(entity, dt) {\r\n        if (this.controls.get(\"left\")) { // off the right edge\r\n            entity.velX -= this.controls.speed * dt\r\n        }\r\n        if (this.controls.get(\"right\")) { // off the left edge \r\n            entity.velX += this.controls.speed * dt\r\n        }\r\n        entity.velX = clamp(-100, 100, entity.velX) \r\n    }\r\n}\r\n\r\nexport const PlayerKeyControls = extendPalyerControls(KeyControls)\r\nexport const PlayerTouchControls = extendPalyerControls(TouchControls)","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { Node } from \"@lib\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport config from \"@config\"\r\nimport Collision from \"@components/Collision\"\r\nimport Movement from \"@components/Movement\"\r\nimport UI from \"@utils/UI\"\r\nimport { PlayerKeyControls, PlayerTouchControls } from \"./PlayerControls\"\r\nimport { colRectsId, objLayerId } from \"@lib/constants\"\r\n\r\nimport arrowImgId from \"@assets/images/ui/arrow.png\"\r\nimport resumeImgId from \"@assets/images/ui/resume.png\"\r\nimport styles from \"./style.css\"\r\n\r\nconst getTouchMappings = () => {\r\n    const data = [\r\n        { name: \"left\", style: `background: url(${arrowImgId}); transform: scale(-1, 1);`, width: 65, height: 55 },\r\n        { name: \"right\", style: `background: url(${arrowImgId});`, width: 65, height: 55 },\r\n        { name: \"axn\", style: `background: url(${resumeImgId}); transform: rotate(270deg);`, width: 64, height: 64 },\r\n    ]\r\n    return Object.freeze(\r\n        data.reduce((acc, x) => {\r\n            const el = UI.create(\"div\")\r\n            el.classList.add(styles.ctrlBtn)\r\n            el.domNode.style = x.style\r\n            el.domNode.style.width = `${x.width}px`\r\n            el.domNode.style.height = `${x.height}px`\r\n            el.width = x.width\r\n            el.height = x.height\r\n            acc[x.name] = el\r\n\r\n            return acc\r\n        }, {})\r\n    )\r\n}\r\n\r\nconst getKeyMappings = () => Object.freeze({\r\n    left: [ 37, 65 ],\r\n    right: [ 39, 68 ],\r\n    axn: [ 32, 87, 38 ]\r\n})\r\n\r\nconst PlayerControlsClass = config.isMobile ? PlayerTouchControls: PlayerKeyControls\r\nconst getControlsMapping = config.isMobile ? getTouchMappings: getKeyMappings\r\n\r\nclass Player extends TexRegion {\r\n    static sounds = [ \"player_din\", \"concrete\", \"wood\", \"metal\", \"jump\", \"player_exp\" ]\r\n    remDt = 0 // remnant dt\r\n    smooth = true\r\n    constructor({ speed = 48, width = 64, height = 64, fricX=4, shard, cinder, controls, sounds, state, ...rest }) {\r\n        super({ frame: \"ball\", ...rest })\r\n        this.width = width\r\n        this.height = height\r\n        this.radius = width / 2\r\n        this.hitCirc = { x: 0, y: 0, radius: this.radius }\r\n        this.rotation = 0\r\n        this.anchor = {\r\n            x: width / 2,\r\n            y: height / 2\r\n        }\r\n        this.pos.y = 100\r\n        this.shard = shard\r\n        this.cinder = cinder\r\n        this.sounds = sounds\r\n        this.fricX0 = fricX\r\n        this.state = state\r\n\r\n        // this.shard.onDead = () => { // what should happen upon player explosion\r\n        //     /**\r\n        //      * implicit assumptions: \r\n        //      * 1. both cinder and shard should have same \"lifetime\"\r\n        //      * 2. ParticleEmitters with finite \"lifetime\" (loop set to false) remove themselves from the parent once they're dead \r\n        //      */\r\n        //     state.over()\r\n        //     // Node.get(curLevelId).resetRecursively() // this also sets player's alpha field to 1\r\n        // }\r\n  \r\n        this.controls = controls || new PlayerControlsClass(speed, getControlsMapping(), () => {\r\n            sounds.jump.play()\r\n        }, this.state)\r\n        this.wallCollision = new Collision({ entity: this, blocks: colRectsId, rigid: true, movable: false, onHit: this.onWallCol.bind(this) })\r\n        this.spikeCollision = new Collision({ entity: this, blocks: \"spikes\", rigid: false, movable: false, onHit: this.explode.bind(this) })\r\n        this.magnetCollision = new Collision({ entity: this, blocks: \"magnets\", rigid: true, movable: false, onHit: this.onMagnetCol.bind(this) })\r\n        this.crateCollision = new Collision({ entity: this, blocks: \"crates\", rigid: true, movable: false, onHit: this.onCrateCol.bind(this) })\r\n        // this.gateCollision = new Collision({ entity: this, blocks: \"gates\", rigid: false, movable: false, onHit: this.explode.bind(this) })\r\n        \r\n        Movement.makeMovable(this, { accY: config.gravity, roll: true, fricX })\r\n    }\r\n    get visible() {\r\n        return this.alpha !== 0 && this._visible\r\n    }\r\n    set offEdge(which) {\r\n        this.controls.switchState(\"offEdge\", which)\r\n        this._offEdge = which\r\n    }\r\n    get offEdge() {\r\n        return this._offEdge\r\n    }\r\n    onFall() {\r\n        this.controls.switchState(\"jumping\", this, true)\r\n    }\r\n    getCtrlBtns() {\r\n        if (!config.isMobile) {\r\n            throw new Error(`control buttons are not defined for non-touch/desktop devices`)\r\n        }\r\n        return this.controls.mappings\r\n    }\r\n    onWallCol(block, velX, velY, moved) {\r\n        if (moved) { // hardcoding palyer collision audio threshold speed to 100\r\n            const colSpeed = Math.abs(velY || velX) || 0\r\n            const colThres = !!block.movable ? 200: 100\r\n            if (colSpeed > colThres) {\r\n                this.sounds[block.mat || \"concrete\"].play(Math.min(1, colSpeed / 800)) // hardcoding palyer collision audio cutoff speed to 600\r\n            }\r\n        }\r\n        // if (velX && this.controls.get(\"axn\")) {\r\n        //     this.velY = this.controls.states.jumping.minJmpVel\r\n        //     if (velX < 0) {\r\n        //         this.velX = 30\r\n        //     } else {\r\n        //         this.velX = -30\r\n        //     }\r\n        // }\r\n        if (velY) {\r\n            if (velY > 0) {\r\n                this.fricX = this.fricX0\r\n                return this.controls.switchState(\"rolling\")\r\n            }\r\n            // collision with the bottom edge\r\n            if (this.controls.state && this.controls.state.name === \"jumping\") {\r\n                this.controls.state.onHalt()\r\n            }\r\n        }\r\n    }\r\n    onMagnetCol(block, velX, velY, moved) {\r\n        if (moved) { // hardcoding palyer collision audio threshold speed to 100\r\n            const colSpeed = Math.abs(velY || velX) || 0\r\n            if (colSpeed > 100) {\r\n                this.sounds.metal.play(Math.min(1, colSpeed / 3000)) // hardcoding collision audio cutoff speed to 1200\r\n            }\r\n        }\r\n        if (velY && velY < 0) {\r\n            this.velY = -100\r\n            if (this.controls.state.name === \"jumping\") {\r\n                this.fricX = this.fricX0 * 2\r\n                this.controls.state.onHalt()\r\n            }\r\n        }\r\n    } \r\n    onCrateCol(block, velX, velY, moved) {\r\n        if (velY) {\r\n            block.takeDamage(velY)\r\n            if (velY > 0) {\r\n                this.fricX = this.fricX0\r\n                return this.controls.switchState(\"rolling\")\r\n            }\r\n            // collision with the bottom edge\r\n            if (this.controls.state && this.controls.state.name === \"jumping\") {\r\n                this.controls.state.onHalt()\r\n            }\r\n        }\r\n    } \r\n    explode() {\r\n        if (this.state.is(\"completed\")) return\r\n        this.cinder.pos.x = this.shard.pos.x = this.pos.x + this.width / 2\r\n        this.cinder.pos.y = this.shard.pos.y = this.pos.y + this.height / 2\r\n        \r\n        this.alpha = 0  // forces off the visibility (ensuring no update or rendering)\r\n        Node.get(objLayerId).add(this.cinder) // particle emitters have to be manually inserted into the scene graph, since it doesn't implicitly know where it should be located\r\n        Node.get(objLayerId).add(this.shard)\r\n        this.state.over(this.pos.x)\r\n        this.sounds.player_exp.play()\r\n        this.sounds.player_din.play(0.8)\r\n        this.velX = this.velY = 0\r\n    }\r\n    update(dt) {\r\n        if (this.state.is(\"game-over\") || this.state.is(\"paused\")) return\r\n        this.controls.update(this, dt)\r\n        Boolean(this.offEdge) ? Movement.updateOffEdge(this, dt): Movement.update(this, dt)\r\n        this.wallCollision.update()\r\n        this.magnetCollision.update()\r\n        this.spikeCollision.update()\r\n        this.crateCollision.update()\r\n    }\r\n    onRemove() {\r\n        this.parent = null // free-up the reference for garbage collector\r\n    }\r\n}\r\n\r\nexport default Player","class Checkpoint {\r\n    maxX=0\r\n    constructor(checkpoints = []) {\r\n        this.checkpoints = checkpoints.sort((a, b) => a.x - b.x) // sorting in ascending order of x-coordinates\r\n    }\r\n    updateX(val) {\r\n        this.maxX = Math.max(this.maxX, val)\r\n    }\r\n    reset() {\r\n        this.maxX = 0\r\n    }\r\n    get() {\r\n        if (this.checkpoints.length === 0) return\r\n        const checkpoint = this.checkpoints.findLast(point => {\r\n            return this.maxX >= point.x\r\n        })\r\n        return checkpoint\r\n    }\r\n}\r\n\r\nexport default Checkpoint","import { Node } from \"@lib\"\r\nimport { webAudioSupported } from \"@utils/Sound\"\r\nimport ParallaxCamera from \"@lib/entities/ParallaxCamera\"\r\nimport SoundSprite from \"@utils/Sound/SoundSprite\"\r\nimport ParticleEmitter from \"@lib/utils/ParticleEmitter\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport State from \"./State\"\r\nimport initUI from \"./initUI\"\r\nimport { LEVEL } from \"../names\"\r\nimport * as rendApis  from \"@lib/renderer/apis\"\r\nimport moonImg from \"@assets/images/background.png\"\r\nimport config from \"@config\"\r\nimport levels from \"@config/levels\"\r\nimport Level from \"./Level\"\r\nimport makeFactories from \"./makeFactories\"\r\nimport Player from \"@entities/Player\"\r\nimport soundSpriteId from \"@assets/audio/sprite.mp3\"\r\nimport soundMetaId from \"@assets/audio/sprite.cson\"\r\nimport particlesUrl from \"@assets/particles/all.cson\"\r\nimport bgDataId from \"@assets/levels/background.cson\"\r\n\r\nimport resumeImgId from \"@assets/images/ui/resume.png\"\r\nimport pauseImgId from \"@assets/images/ui/pause.png\"\r\nimport crossImgId from \"@assets/images/ui/cross.png\"\r\nimport resetImgId from \"@assets/images/ui/reset.png\"\r\nimport orbImgId from \"@assets/images/ui/orb.png\"\r\nimport soundOnImgId from \"@assets/images/ui/sound_on.png\"\r\nimport soundOffImgId from \"@assets/images/ui/sound_off.png\"\r\nimport rvaImgId from \"@assets/images/ui/rva.png\" // rewarded video add icon\r\nimport { hexToNorm } from \"@lib/utils/math\"\r\nimport Checkpoint from \"./Checkpoint\"\r\n\r\nclass GameScreen extends Node { // can only have cameras as children\r\n    // background = \"rgb(181 24 24)\"\r\n    initialized = false\r\n    soundPools = [ \"gate\" ]\r\n    constructor({ game, uiRoot, storage, sdk }) {\r\n        super()\r\n        const { assetsCache } = game\r\n        this.storage = storage\r\n        this.sdk = sdk\r\n        this.game = game\r\n        this.uiRoot = uiRoot\r\n        this.state = new State()\r\n        this.state.on(\"pause\", () => {\r\n            game.pause()\r\n        })\r\n        this.state.on(\"play\", () => {\r\n            game.resume()\r\n        })\r\n        storage.on(\"sound-update\", state => {\r\n            state ? game.turnOnSound(): game.turnOffSound()\r\n        })\r\n        assetsCache.once(\"load\", () => {\r\n            const soundSprite = new SoundSprite({ \r\n                resource: assetsCache.get(soundSpriteId), \r\n                resourceId: soundSpriteId, \r\n                meta: assetsCache.get(soundMetaId)\r\n            })\r\n            const particles = assetsCache.get(particlesUrl)\r\n            const shard = new ParticleEmitter(particles.shard)\r\n            const cinder = new ParticleEmitter(particles.cinder)\r\n            const playerSounds = Player.sounds.reduce((spritemap, frame) => {\r\n                spritemap[frame] = soundSprite.create(frame)\r\n                return spritemap\r\n            }, {})\r\n            \r\n            shard.onRemove = () => {\r\n                shard.parent = null\r\n            }\r\n            cinder.onRemove = () => {\r\n                cinder.parent = null\r\n            }\r\n\r\n            this.soundSprite = soundSprite\r\n            this.btnSound = soundSprite.create(\"btn\")\r\n            this.errSound = soundSprite.createPool(\"err_alt\")\r\n            this.contSound = soundSprite.create(\"continue\")\r\n            this.music = {\r\n                \"music1\": soundSprite.create(\"music1\")\r\n            }\r\n            this.player = new Player({ width: 64, height: 64, fill: \"brown\", speed: 350, fricX: 3, pos: { x: 300, y: 0 }, shard, cinder, sounds: playerSounds, state: this.state })\r\n            this.factories = makeFactories({ soundSprite, assetsCache, storage, player: this.player, state: this.state })\r\n            if (game.renderer.api === rendApis.WEBGL && !config.isMobile) {\r\n                const bgData = assetsCache.get(bgDataId)\r\n                const dataToTile = tile => new TexRegion({ frame: tile.name, pos: { x: tile.x, y: tile.y }})\r\n                this.bg = new ParallaxCamera({ z: 2.5, zAtop: 1, viewport: config.viewport, subject: this.player, entYOffset: 0, tiles: bgData.map(dataToTile) }) // parallax bg\r\n                this.add(this.bg)\r\n            }\r\n            this.uiImages = {\r\n                cross: assetsCache.get(crossImgId),\r\n                resume: assetsCache.get(resumeImgId),\r\n                pause: assetsCache.get(pauseImgId),\r\n                orb: assetsCache.get(orbImgId),\r\n                reset: assetsCache.get(resetImgId),\r\n                soundOn: assetsCache.get(soundOnImgId),\r\n                soundOff: assetsCache.get(soundOffImgId),\r\n                rva: assetsCache.get(rvaImgId)\r\n            }\r\n        })\r\n    }\r\n    setLevel(data, music) {\r\n        const level = new Level({ player: this.player, data, viewport: config.viewport, subject: this.player, factories: this.factories, music, gameState: this.state })\r\n        this.add(level)\r\n        this.game.renderer.changeBackground(config.isMobile || this.game.renderer.api === rendApis.CNV_2D ? data.mob_bg: data.bg, moonImg)\r\n        this.game.renderer.canvas.style.backgroundPosition = data.bgPos ?? \"-50%\"\r\n        this.game.renderer.gTint = data.tint && data.tint.split(\",\")\r\n        level.parent = null // sever the child to parent link (necessary for correct collision detection when camera isn't the root node)\r\n        if (this.bg) {\r\n            this.bg.overlay = data.pxbg && hexToNorm(data.pxbg)\r\n            this.bg.layoutTiles(level.world)\r\n        }\r\n        return level\r\n    }\r\n    unsetLevel() {\r\n        if (this.children) {\r\n            const lastIdx = this.children.length - 1\r\n            lastIdx > -1 && Node.removeChild(this, this.children[lastIdx])\r\n        }\r\n    }\r\n    onEnter(l) {\r\n        const levelIdx = Math.min(l - 1, levels.length - 1)\r\n        const levelDataId = levels[levelIdx].id\r\n        const music = levels[levelIdx].music\r\n\r\n        const data = Object.assign(this.game.assetsCache.get(levelDataId), levels[levelIdx])\r\n        const level = this.setLevel(data, music && this.music[music])\r\n        const onClose = advance => this.game.switchScreen(LEVEL, false, advance)\r\n        const checkpoint = new Checkpoint(data.checkpoints)\r\n        this.checkpoint = checkpoint\r\n        const resetLevel = () => {\r\n            window.Node = Node\r\n            window.level = level\r\n            level.resetRecursively()\r\n            checkpoint.reset()\r\n        }\r\n        const focusInst = () => {\r\n            level.focusInst()\r\n            this.bg && this.bg.focusInst()\r\n        }\r\n        \r\n        focusInst()\r\n        level.idx = levelIdx\r\n        const getCheckpoint = checkpoint.get.bind(checkpoint)\r\n        const { teardownUI, updateTimer } = initUI(this.uiRoot, this.player, this.uiImages, this.storage, this.state, onClose, resetLevel, focusInst, getCheckpoint, this.btnSound, this.errSound, this.contSound, webAudioSupported, this.game, this.sdk)\r\n        this.state.level = levelIdx + 1\r\n        this.teardownUI = teardownUI\r\n        this.updateTimer = updateTimer\r\n        this.state.play()\r\n    }\r\n    onExit() {\r\n        this.unsetLevel()\r\n        this.teardownUI && this.teardownUI()\r\n        this.game.reset()\r\n        this.state.halt()\r\n        this.state.elapsed = 0\r\n    }\r\n    update(dt, t) {\r\n        this.checkpoint.updateX(this.player.pos.x)\r\n        this.state.elapsed += dt\r\n        this.children.forEach(child => {\r\n            Node.updateRecursively(child, dt, t, child) // out-of-view culling on a per-camera basis\r\n        })\r\n        this.updateTimer(this.state.elapsed)\r\n    }\r\n}\r\n\r\nexport default GameScreen","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { calcAligned, calcStacked } from \"@lib/utils/entity\"\r\nimport config from \"@config\"\r\nimport levels from \"@config/levels\"\r\nimport imgBtn from \"@screens/ui/imgBtn\"\r\nimport loadingDot from \"@screens/ui/loadingDot\"\r\nimport styles from \"./style.css\"\r\nimport btn from \"@screens/ui/btn\"\r\n\r\nconst PREV = \"prev-btn\"\r\nconst NEXT = \"next-btn\"\r\nconst START = \"start-btn\"\r\nconst INFO = \"lev-info\"\r\nconst LOCK = \"lock\"\r\nconst LOADING = \"loading\"\r\nconst BEST_TIME = \"best-time\"\r\nconst ERROR = \"err\"\r\nconst RETRY = \"retry\"\r\n\r\nconst paddingX = config.isMobile ? 20: 60\r\nconst iconDims = Object.freeze({ width: 24, height: 24 })\r\nconst lock = `\r\n<div id=\"${LOCK}\" class=\"${styles.icon}\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#ffe6d5\" width=\"${iconDims.width}\" height=\"${iconDims.height}\" viewBox=\"0 0 24 24\"><path d=\"M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-5 7.723v2.277h-2v-2.277c-.595-.347-1-.984-1-1.723 0-1.104.896-2 2-2s2 .896 2 2c0 .738-.404 1.376-1 1.723zm-5-7.723v-4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v4h-8z\"/></svg>\r\n</div>\r\n`\r\nconst renderErr = (id, retryId, msg) => `\r\n<div id=\"${id}\" class=\"${styles.error} ${styles.hidden}\">\r\n    ${msg}\r\n</div>\r\n<div id=\"${retryId}\" class=\"${styles.retry} ${styles.hidden}\">\r\n    RETRY\r\n</div>\r\n`\r\nconst renderBest = val => {\r\n    return `Best Time: ${!!val ? val.toFixed(2) + \"s\": \"n/a\"}`\r\n}\r\nconst render = (images, level, time) => {\r\n    return `\r\n        ${imgBtn(PREV, images.arrow, styles.prevBtn)}\r\n        ${lock}\r\n        <div class=\"${styles.infoTitle}\" id=\"${INFO}\">${\"Level \" + level}</div> \r\n        <div class=\"${styles.infoTitle} ${styles.infoSub}\" id=\"${BEST_TIME}\">${renderBest(time)}</div>\r\n        ${imgBtn(NEXT, images.arrow)}\r\n        ${btn(START, \"START\")}\r\n    `\r\n}\r\n\r\nexport default ({ onStart, uiRoot, storage, level, maxLevel, images, assetsCache, contSound, chSound, errSound, syncColor }) => {\r\n    let levelState = level, loading = false\r\n    uiRoot.content = render(images, level, storage.getHiscore(levelState))\r\n    syncColor(level)\r\n    const prevBtn = uiRoot.get(`#${PREV}`)\r\n    const nextBtn = uiRoot.get(`#${NEXT}`)\r\n    const startBtn = uiRoot.get(`#${START}`)\r\n    const levelInfo = uiRoot.get(`#${INFO}`)\r\n    const lockInd = uiRoot.get(`#${LOCK}`)\r\n    const bestTime = uiRoot.get(`#${BEST_TIME}`)\r\n\r\n    const realignTxt = viewport => {\r\n        const { width: tWidth, height: tHeight } = levelInfo.domNode.getBoundingClientRect()\r\n        const { width: sWidth, height: sHeight } = bestTime.domNode.getBoundingClientRect()\r\n\r\n        levelInfo.width = tWidth\r\n        levelInfo.height = tHeight\r\n        bestTime.width = sWidth\r\n        bestTime.height = sHeight\r\n        \r\n        levelInfo.pos = calcAligned(viewport, levelInfo, \"center\", \"center\", 0, -10)\r\n        bestTime.pos = calcStacked(levelInfo, bestTime, \"bottom\", 0, 8)\r\n        lockInd.pos = calcStacked(bestTime, iconDims, \"bottom\", 0, 20)\r\n    }\r\n    const realign = viewport => {\r\n        realignTxt(viewport)\r\n        prevBtn.pos = calcAligned(viewport, prevBtn, \"left\", \"center\", paddingX)\r\n        nextBtn.pos = calcAligned(viewport, nextBtn, \"right\", \"center\", -paddingX)\r\n        startBtn.pos = calcStacked(bestTime, startBtn, \"bottom\", 0,  64)\r\n    }\r\n    const updateBtnVis = (level, maxLevel) => {\r\n        lockInd.domNode.style.opacity = level <= maxLevel || level > levels.length ? 0: 1\r\n        startBtn.domNode.style.opacity = level <= maxLevel ? 1: 0\r\n    }\r\n\r\n    const onPrevBtnClick = () => {\r\n        if (loading) return\r\n        if (levelState === 1) return errSound.play()\r\n        levelState = Math.max(levelState - 1, 1)\r\n        const best = storage.getHiscore(levelState)\r\n        bestTime.content = renderBest(best)\r\n        levelInfo.content = `Level ${levelState}`\r\n        updateBtnVis(levelState, maxLevel)\r\n        realignTxt(config.viewport)\r\n        chSound.play()\r\n        syncColor(levelState)\r\n    }\r\n    const onNextBtnClick = () => {\r\n        if (loading) return\r\n        if (levelState > levels.length) return errSound.play()\r\n        levelState = Math.min(levelState  + 1, levels.length + 1)\r\n        const best = storage.getHiscore(levelState)\r\n        levelInfo.content = levelState <= levels.length ? `Level ${levelState}`: \"Coming Soon\"\r\n        bestTime.content = levelState <= levels.length ? renderBest(best): \"more coming soon\"\r\n        updateBtnVis(levelState, maxLevel)\r\n        realignTxt(config.viewport)\r\n        chSound.play()\r\n        syncColor(levelState)\r\n    }\r\n    const loadAndStart = () => {\r\n        loading = true\r\n        uiRoot.clear()\r\n        const levelId = levels[levelState - 1].id\r\n        if (!assetsCache.get(levelId)) { // if level data doesn't exist in the cache\r\n            uiRoot.content = loadingDot(LOADING)\r\n\r\n            const loadingInd = uiRoot.get(`#${LOADING}`)\r\n\r\n            const onLoad = () => {\r\n                onStart(levelState)\r\n                assetsCache.off(\"error\")\r\n            }\r\n\r\n            loadingInd.pos = calcAligned(config.viewport, loadingInd, \"center\", \"center\")\r\n\r\n            levels.forEach(level => {\r\n                assetsCache.unload(level.id)\r\n            })\r\n\r\n            assetsCache.load([ levelId ])\r\n\r\n            assetsCache.once(\"load\", onLoad)\r\n            \r\n            assetsCache.once(\"error\", () => {\r\n                assetsCache.off(\"load\", onLoad)\r\n                uiRoot.content = renderErr(ERROR, RETRY, \"Connection Problem\")\r\n                const errMsg = uiRoot.get(`#${ERROR}`)\r\n                const retryIcon = uiRoot.get(`#${RETRY}`)\r\n\r\n                errMsg.pos = calcAligned(config.viewport, errMsg, \"center\", \"center\")\r\n                retryIcon.pos = calcStacked(errMsg, retryIcon, \"bottom\", 0, 10)\r\n\r\n                retryIcon.show()\r\n                errMsg.show()\r\n\r\n                retryIcon.on(\"click\", loadAndStart)\r\n            })\r\n            return\r\n        }\r\n        onStart(levelState)\r\n    }\r\n    const onStartBtnClick = () => {\r\n        if (loading) return\r\n        if (levelState > maxLevel) { return  errSound.play() }\r\n        config.viewport.off(\"change\", realign)\r\n        contSound.play()\r\n        loadAndStart()\r\n    }\r\n    const onKeyDown = e => {\r\n        const keyCode = e.which || e.keyCode\r\n        if (!!keyCode) {\r\n            switch(keyCode) {\r\n                case 37: // left arrow\r\n                case 65: // A\r\n                    onPrevBtnClick()\r\n                break\r\n                case 39: // right arrow\r\n                case 68: // D\r\n                    onNextBtnClick()\r\n                break\r\n                case 32: // on one of enter and space the keys\r\n                case 13:\r\n                    onStartBtnClick()\r\n                break\r\n            }\r\n            return\r\n        }\r\n\r\n        switch(e.key) {\r\n            case \"Left\": // for IE and Older Versions of Edge\r\n            case \"ArrowLeft\": // Standard\r\n            case \"A\":\r\n            case \"a\":\r\n                onPrevBtnClick()\r\n            break\r\n            case \"Right\":\r\n            case \"ArrowRight\":\r\n            case \"D\":\r\n            case \"d\":\r\n                onNextBtnClick()\r\n            break\r\n            case \" \":\r\n            case \"Enter\":\r\n                onStartBtnClick()\r\n            break\r\n        }\r\n    }\r\n    \r\n    if (config.isMobile === false) document.addEventListener(\"keydown\", onKeyDown)\r\n    prevBtn.on(\"click\", onPrevBtnClick)\r\n    nextBtn.on(\"click\", onNextBtnClick)\r\n    startBtn.on(\"click\", onStartBtnClick)\r\n    config.viewport.on(\"change\", realign)\r\n    realign(config.viewport)\r\n    return () => {\r\n        if (config.isMobile === false) document.removeEventListener(\"keydown\", onKeyDown)\r\n        prevBtn.off(\"click\", onPrevBtnClick)\r\n        nextBtn.off(\"click\", onNextBtnClick)\r\n        startBtn.off(\"click\", onStartBtnClick)\r\n    }\r\n}","import styles from \"./style.css\"\r\nexport default (id) => {\r\n    return `\r\n        <div id=\"${id}\" style=\"width: 44px; height:  12px;\" >\r\n            <div class=\"${styles.loadingDot} ${styles.dotA}\"></div>\r\n            <div class=\"${styles.loadingDot} ${styles.dotB}\"></div>\r\n            <div class=\"${styles.loadingDot} ${styles.dotC}\"></div>\r\n        </div>\r\n    `\r\n}","import { Node } from \"@lib\"\r\nimport { GAME } from \"@screens/names\"\r\nimport resumeImgId from \"@assets/images/ui/resume.png\"\r\nimport arrowImgId from \"@assets/images/ui/arrow.png\"\r\nimport SoundSprite from \"@utils/Sound/SoundSprite\"\r\nimport soundSpriteId from \"@assets/audio/sprite.mp3\"\r\nimport soundMetaId from \"@assets/audio/sprite.cson\"\r\nimport levels from \"@config/levels\"\r\nimport config from \"@config\"\r\nimport { calcAligned } from \"@lib/utils/entity\"\r\nimport atlasmetaId from \"@assets/images/atlasmeta.cson\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport bgDataId from \"@assets/levels/background.cson\"\r\nimport initUI from \"./initUI\"\r\nimport { hexToNorm } from \"@lib/utils/math\"\r\nconst levelColors = [\r\n    { \"bg\":\"#121228\",\"mob_bg\":\"#121228\", \"pxbg\":\"0.058, 0.058, 0.133\" },\r\n    { \"bg\":\"#121228\",\"mob_bg\":\"#000000\", \"pxbg\":\"0.058, 0.058, 0.133\" },\r\n    { \"bg\":\"#2e2e3d\",\"mob_bg\":\"#2e2e3d\",\"pxbg\":\"0.129, 0.129\" },\r\n    { \"bg\":\"#10103a\",\"mob_bg\":\"#0b0b25\", \"pxbg\":\"0.043, 0.043, 0.145\" },\r\n    { \"bg\":\"#2e2e3d\",\"mob_bg\":\"#2e2e3d\", \"pxbg\":\"0.129, 0.129, 0.184\" },\r\n    { \"bg\":\"#171025\",\"mob_bg\":\"#0f0f22\", \"pxbg\":\"0.066, 0.043, 0.109\" },\r\n    { \"bg\":\"#0f0f22\",\"mob_bg\":\"#0f0f22\", \"pxbg\":\"0.039, 0.039, 0.090\" },\r\n    { \"bg\":\"#0f0f22\",\"mob_bg\":\"#0f0f22\", \"pxbg\":\"0.039, 0.039, 0.090\" },\r\n    { \"bg\":\"#132b27\",\"mob_bg\":\"#132b27\", \"pxbg\": \"#0a1614\" },\r\n    { \"bg\":\"rgb(18 18 18)\", \"mob_bg\":\"rgb(18 18 18)\", \"pxbg\":\"0.090, 0.090, 0.090\" }\r\n]\r\nclass LevelScreen extends Node {\r\n    background = \"#000000\"\r\n    curLevel = 0\r\n    constructor({ game, uiRoot, storage }) {\r\n        super()\r\n        this.game = game\r\n        this.storage = storage\r\n        this.uiRoot = uiRoot\r\n        game.assetsCache.once(\"load\", () => {\r\n            const { assetsCache } = game\r\n            const soundSprite = new SoundSprite({ \r\n                resource: assetsCache.get(soundSpriteId), \r\n                resourceId: soundSpriteId, \r\n                meta: assetsCache.get(soundMetaId)\r\n            })\r\n            this.contSound = soundSprite.createPool(\"continue\")\r\n            this.chSound = soundSprite.createPool(\"change\") \r\n            this.errSound = soundSprite.createPool(\"error\")\r\n\r\n            if (config.isMobile) {\r\n                return\r\n            }\r\n            const bgData = assetsCache.get(bgDataId)\r\n            this.container = new Node()\r\n            bgData.forEach(tile => {\r\n                this.container.add(new TexRegion({ frame: tile.name, pos: { x: tile.x, y: tile.y }}))\r\n            })\r\n            this.container.pos.y = -1016\r\n            console.log(this.container)\r\n            const atlasMeta = assetsCache.get(atlasmetaId)\r\n            const height = bgData.reduce((max, tile) => Math.max(max, tile.y + atlasMeta[tile.name].height), 0) + this.container.pos.y\r\n            this.container.overlay = [0.03529411764705882, 0.03529411764705882, 0.03529411764705882]\r\n            this.add(this.container)\r\n\r\n            const realignBg = viewport => {\r\n                const aligned = calcAligned(viewport, { width: config.viewport.width, height: height },\"center\", \"bottom\")\r\n                this.container.pos.y = aligned.y - 1016\r\n            }\r\n\r\n            realignBg(config.viewport)\r\n            config.viewport.on(\"change\", () => realignBg(config.viewport))\r\n        })\r\n    }\r\n    onEnter(fromMenu, advance) { // second level tells whether to advance to the next level (relative to the current one)\r\n        const { game, storage, uiRoot, contSound, chSound, errSound } = this\r\n        if (fromMenu) {\r\n            this.contSound.play()\r\n            this.curLevel = storage.getCurLevel()\r\n        } else if (advance) {\r\n            this.curLevel = Math.min(this.curLevel + 1, levels.length)\r\n        }\r\n        this.teardownUI = initUI({\r\n            onStart: level => {\r\n                game.switchScreen(GAME, level)\r\n                this.curLevel = level\r\n            },\r\n            uiRoot,\r\n            images: {\r\n                arrow: game.assetsCache.get(arrowImgId),\r\n                resume: game.assetsCache.get(resumeImgId)\r\n            },\r\n            assetsCache: game.assetsCache,\r\n            storage,\r\n            level: this.curLevel,\r\n            maxLevel: storage.getCurLevel(),\r\n            contSound,\r\n            chSound,\r\n            errSound,\r\n            syncColor: level => {\r\n                const data = levelColors[level-1]\r\n                game.renderer.changeBackground(data.bg)\r\n                if (!config.isMobile) {\r\n                    this.container.overlay = data.pxbg && hexToNorm(data.pxbg)\r\n                }\r\n            }\r\n        })\r\n    }\r\n    onExit() {\r\n        this.teardownUI()\r\n    }\r\n}\r\n\r\nexport default LevelScreen","import \"@lib/polyfills.js\"\r\nimport Game from \"@utils/Game\"\r\nimport UI from \"@utils/UI\"\r\nimport createRenderer from \"@lib/renderer/create\"\r\nimport AssetsCache from \"@utils/AssetsCache\"\r\nimport TexRegion from \"@lib/entities/TexRegion\"\r\nimport Storage from \"./helpers/Storage\"\r\nimport SDK from \"./helpers/SDK\"\r\n\r\nimport config from \"@config\"\r\nimport levels from \"@config/levels\"\r\nimport * as screenNames from \"@screens/names\"\r\nimport LoadingScreen from \"@screens/Loading\"\r\nimport MainMenuScreen from \"@screens/MainMenu\"\r\nimport GameScreen from \"@screens/Game\"\r\nimport LevelScreen from \"@screens/Level\"\r\n\r\nimport backgroundTiles from \"@assets/levels/background.cson\"\r\nimport soundSprite from \"@assets/audio/sprite.mp3\"\r\nimport soundMeta from \"@assets/audio/sprite.cson\"\r\nimport texatlasId from \"@assets/images/texatlas.png\"\r\nimport atlasmetaId from \"@assets/images/atlasmeta.cson\"\r\nimport bgDataId from \"@assets/levels/background.cson\"\r\nimport particlesId from \"@assets/particles/all.cson\"\r\nimport arrowImgId from \"@assets/images/ui/arrow.png\"\r\nimport crossImgId from \"@assets/images/ui/cross.png\"\r\nimport orbImgId from \"@assets/images/ui/orb.png\"\r\nimport pauseImgId from \"@assets/images/ui/pause.png\"\r\nimport resetImgId from \"@assets/images/ui/reset.png\"\r\nimport resumeImgId from \"@assets/images/ui/resume.png\"\r\nimport soundOnImgId from \"@assets/images/ui/sound_on.png\"\r\nimport soundOffImgId from \"@assets/images/ui/sound_off.png\"\r\nimport rvaImgId from \"@assets/images/ui/rva.png\" // rewarded video add icon\r\nconst { viewport } = config\r\nconst renderer = createRenderer({ cnvQry: \"#arena\", scene: null, background: \"#000000\", viewport }) // scene will be injected by game\r\nconst assetsCache = new AssetsCache()\r\nconst storageStrat = new config.StorageStrat(config.storageId)\r\nconst storage = new Storage(storageStrat)\r\nconst uiRoot = UI.query(\"#ui-layer\")\r\nconst curLevel = storage.getCurLevel()\r\nconst assets = [\r\n    { url: particlesId, msg: \"loading particles\" },\r\n    crossImgId,\r\n    orbImgId,\r\n    pauseImgId,\r\n    resetImgId,\r\n    resumeImgId,\r\n    soundOnImgId,\r\n    soundOffImgId,\r\n    rvaImgId,\r\n    { url: levels[curLevel - 1].id, msg: \"loading level data\" }, // pre-load the current level\r\n    { url: backgroundTiles, msg: \"loading background tiles\" }, // pre-load the current level\r\n    { url: arrowImgId, msg: \"loading ui assets\" },\r\n    { url: soundSprite, msg: \"loading audio sprite\" },\r\n    { url: soundMeta, msg: \"loading audio sprite metadata\"},\r\n    { url: texatlasId, msg: \"loading images\" },\r\n    { url: atlasmetaId, msg: \"loading texture atlas\" },\r\n]\r\n\r\nassets.push(bgDataId)\r\n\r\nconst sdkStrat = !!config.SDKStrat ? new config.SDKStrat(): false\r\nconst sdk = new SDK(sdkStrat)\r\nconst screenFactories = {\r\n    [screenNames.LOADING]: game => new LoadingScreen({ game, uiRoot, assets, sdk }),\r\n    [screenNames.MAIN_MENU]: game => new MainMenuScreen({ game, uiRoot, sdk }),\r\n    [screenNames.GAME]: game => new GameScreen({ game, uiRoot, storage, sdk }),\r\n    [screenNames.LEVEL]: game => new LevelScreen({ game, uiRoot, storage }),\r\n}\r\nconst game = new Game({\r\n    renderer,\r\n    assetsCache,\r\n    storage,\r\n    screenFactories,\r\n})\r\n\r\nsdk.setOnPause(() => game.pause())\r\nsdk.setOnResume(() => game.resume())\r\n\r\nif (!storage.getSound()) {\r\n    game.turnOffSound()\r\n}\r\n\r\nassetsCache.once(\"prog-end\", () =>  { // listening to \"progress-end\" instead of \"load\" to ensure critical engine setup tasks happen before emission of load event\r\n    const atlasmeta = assetsCache.get(atlasmetaId)\r\n    const texatlas = assetsCache.get(texatlasId)\r\n    // texatlas.setAttribute(\"crossorigin\", \"anonymous\")\r\n    renderer.setTexatlas(\r\n        texatlas,\r\n        atlasmeta\r\n    )\r\n    TexRegion.injectAtlasmeta(atlasmeta)\r\n})\r\ngame.switchScreen(screenNames.LOADING)\r\ngame.start()","import Canvas2dRenderer from \"./Canvas2D\"\r\nimport Webgl2Renderer from \"./Webgl2\"\r\n\r\nexport default params => {\r\n    let renderer\r\n    try {\r\n        renderer = new Webgl2Renderer(params)\r\n    } catch(e) {\r\n        console.log(e)\r\n        console.log(\"Webgl 2 not supported.. resorting to Canvas2D\")\r\n        renderer = new Canvas2dRenderer(params)\r\n    }\r\n    return renderer\r\n}"],"sourceRoot":""}