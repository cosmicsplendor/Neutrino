(()=>{var t={232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(32),i=n(529),a=n(146);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,c,y=(r=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(c){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function d(t){var e,n=t.subject,r=t.viewport,o=t.world,i=t.z,c=void 0===i?1:i,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["subject","viewport","world","z"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=y.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l))).z=c,e.pF=1/c,e.bounds={x:0,y:0,width:r.width,height:r.height},e.world=o||{width:r.width,height:r.height},e.onViewportChange=function(t){e.bounds.width=t.width*a.Z.devicePixelRatio,e.bounds.height=t.height*a.Z.devicePixelRatio,e.focusInst()},e.viewport=r,e.setSubject(n),r.on("change",e.onViewportChange),e.onViewportChange(r),e.focus(),e}return e=d,(n=[{key:"intersects",value:function(t){return t===this||!(t.width||t.height||t.hitbox)||(0,o.ex)((0,i.SF)(t),this.bounds)}},{key:"setSubject",value:function(t){t&&(this.subject=t,this.offset=(0,i.LP)(t),this.focus())}},{key:"focusInst",value:function(){this.subject&&(this.pos.x=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),this.pos.y=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2))}},{key:"focus",value:function(t){if(this.subject){var e=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),n=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2);this.pos.x+=12*(e-this.pos.x)*t,this.pos.y+=12*(n-this.pos.y)*t}}},{key:"update",value:function(t){this.focus(t)}},{key:"onRemove",value:function(){this.viewport.off(this.onViewportChange)}}])&&l(e.prototype,n),d}(r.Z)},571:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,{Z:()=>f});var c,s,u,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pos,r=void 0===n?{x:0,y:0}:n,i=e.rotation,a=e.scale,c=e.anchor,s=e.pivot,u=e.id,l=e.alpha;o(this,t),this.pos=r,this._visible=!0,a&&(this.scale=a),i&&(this.rotation=i),c&&(this.anchor=c),s&&(this.pivot=s),l&&(this.alpha=l),Boolean(u)&&(this.id=u,t.addRef(u,this))}return a(t,null,[{key:"addRef",value:function(t,e){this.__entities[t]=e}},{key:"removeRef",value:function(t){this.__entities[t]=null}},{key:"get",value:function(t){return this.__entities[t]}},{key:"cleanupRecursively",value:function(e){if(e.onRemove&&e.onRemove(),e.id&&this.removeRef(e.id),e.children){var n,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.cleanupRecursively(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"updateRecursively",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(e.movable&&(e.prevPosX=e.pos.x,e.prevPosY=e.pos.y,e.unduePosXUpdate&&(e.pos.x+=e.unduePosXUpdate,e.unduePosXUpdate=0),e.roll&&(e.prevRot=e.rotation)),e._visible=0!==e.alpha&&(!o.intersects||o.intersects(e)),(e._visible||e.forceUpdate)&&e.update&&e.update(n,r),e.children)for(var i=e.children,a=0,c=i.length;a<c;a++)t.updateRecursively(i[a],n,r,o)}},{key:"removeChild",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t.children=t.children.filter((function(t){return t!==e})),e.parent=null,n&&this.cleanupRecursively(e))}}]),a(t,[{key:"add",value:function(t){t.parent=this,this.children?this.children.push(t):this.children=[t]}},{key:"remove",value:function(e){t.removeChild(this.parent,this,e)}}]),t}();u={},(s="__entities")in(c=l)?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u;const f=l},379:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)});function i(t){var e,n=t.width,s=t.height,u=t.fill,l=t.stroke,f=t.strokeWidth,h=t.alpha,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["width","height","fill","stroke","strokeWidth","alpha"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p))).width=n,e.height=s,e.fill=u,e.stroke=l,e.strokeWidth=f,e.alpha=h,e.type=o.JA,e}return i}(r.Z)},739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function i(t){var e,n,c=t.frame,s=t.isCustom,u=void 0!==s&&s,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["frame","isCustom"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l));var f=i._meta[c];return f.hitbox&&(n.hitbox=f.hitbox),n.hitCirc=null!==(e=f.hitCirc)&&void 0!==e?e:void 0,n.type=o.ey,n.initialRotation=f.rotation?-f.rotation*Math.PI/180:null,n.width=f.width,n.height=f.height,n.w=n.initialRotation?n.height:n.width,n.h=n.initialRotation?n.width:n.height,n.frame=u?[f.x,f.y,n.w,n.h]:c,n.initialRotation&&(n.initialPivotX=-n.height),n}return s(i,null,[{key:"injectAtlasmeta",value:function(t){this._meta=t}}]),s(i,[{key:"setAnchor",value:function(t){this.anchor=this.initialRotation?{x:t.y,y:t.x}:t}}]),i}(r.Z);h(p,"_assetsCache",null);const y=p},674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,r,i,h=(r=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e,n=t.imgId,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["imgId"]);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r))).img=p._assetsCache.get("crate"),!e.img)throw new Error("Image with imgId ".concat(n," can't be found in the assets cache"));return e.type=o.hY,e}return e=p,n=[{key:"injectAssetsCache",value:function(t){this._assetsCache=t}}],null&&c(e.prototype,null),n&&c(e,n),p}(r.Z);f(h,"_assetsCache",null)},391:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Camera:()=>Z.Z,Circle:()=>d,IsoCube:()=>X,Node:()=>r.Z,Rect:()=>o.Z,TexRegion:()=>v.Z,Text:()=>k,Texture:()=>b.Z});var r=n(571),o=n(379),i=n(915);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.radius,a=void 0===n?30:n,c=e.fill,u=e.stroke,h=void 0===u?"red":u,p=l(e,["radius","fill","stroke"]);return f(this,o),(t=r.call(this,s({},p))).radius=a,t.fill=c,t.stroke=h,t.type=i.Xw,t}return o}(r.Z);var b=n(674),v=n(739);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return P(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color,i=void 0===n?"white":n,a=e.size,c=void 0===a?"20pt":a,s=(e.value,A(e,["color","size","value"]));return j(this,o),(t=r.call(this,w({},s))).color=i,t.size=c,t}return o}(r.Z);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=M(e);if(n){var o=M(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return D(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.length,a=void 0===n?20:n,c=e.width,s=void 0===c?40:c,u=e.frontColor,l=void 0===u?"dimgrey":u,f=e.topColor,h=void 0===f?"#B97A57":f,p=e.sideColor,y=void 0===p?"#880015":p,d=I(e,["length","width","frontColor","topColor","sideColor"]);return B(this,o),(t=r.call(this,R({},d))).length=a,t.width=s,t.frontColor=l,t.topColor=h,t.sideColor=y,t.type=i.SE,t.hitbox={x:a/2,y:-a/2,width:s,height:s},t}return o}(r.Z);var Z=n(232)},915:(t,e,n)=>{"use strict";n.d(e,{hY:()=>r,ey:()=>o,JA:()=>i,SE:()=>a,Xw:()=>c});var r="TEXTURE",o="TEXREGION",i="RECT",a="ISOCUBE",c="CIRCLE"},282:(t,e,n)=>{"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>c});const c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.events=e.reduce((function(t,e){return t[e]=[],t}),{}),Object.assign(this,n)}var e,n;return e=t,(n=[{key:"on",value:function(t,e){if(!this.events[t])throw new Error('attempting to listen to an unknown event: "'.concat(t,'"'));this.events[t].push(e)}},{key:"once",value:function(t,e){e.once=!0,this.on(t,e)}},{key:"off",value:function(t,e){if(!e)return this.events[t]=[];this.events[t]=this.events[t].filter((function(t){return t!==e}))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=r(this.events[t]);a.forEach((function(n){n.apply(void 0,o),n.once&&e.off(t,n)}))}}])&&a(e.prototype,n),t}()},529:(t,e,n)=>{"use strict";n.d(e,{LP:()=>u,qj:()=>w,EJ:()=>O,EO:()=>A,$e:()=>j,SF:()=>x,mn:()=>P,Uz:()=>S,uF:()=>k,aZ:()=>C,vD:()=>I});var r,o,i,a=(r=[0,0].map((function(){return{x:0,y:0,width:0,height:0}})),o=0,function(t,e,n,i){return r[o=0===o?1:0].x=t,r[o].y=e,r[o].width=n,r[o].height=i,r[o]}),c=(i={x:0,y:0},function(t,e){return i.x=t,i.y=e,i}),s=function(){var t=[0,0].map((function(){return{x:0,y:0,radius:0}})),e=0;return function(n,r,o){return t[e=0===e?1:0].x=n,t[e].y=r,t[e].radius=o,t[e]}}();function u(t){var e=t.hitbox,n=t.hitcirc;return t.hitbox?{x:e.x+e.width/2,y:e.y+e.height/2}:t.hitcirc?{x:n.x,y:n.y}:{x:t.width/2,y:t.height/2}}var l=function(t){return t.x},f=function(t,e){return t.x-e.width},h=function(t,e){return t.x+(t.width-e.width)},p=function(t){return t.x+t.width},y=function(t,e){return t.x+(t.width-e.width)/2},d=function(t){return t.y},b=function(t,e){return t.y-e.height},v=function(t,e){return t.y+(t.height-e.height)},m=function(t){return t.y+t.height},g=function(t,e){return t.y+(t.height-e.height)/2};function w(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=c(o,i);switch(n){case"left":a.x+=l(t);break;case"center":a.x+=y(t,e);break;case"right":a.x+=h(t,e);break;default:throw new Error("Invalid x-alignment parameter: ".concat(n))}switch(r){case"top":a.y+=d(t);break;case"center":a.y+=g(t,e);break;case"bottom":a.y+=v(t,e);break;default:throw new Error("Invalid y-alignment parameter: ".concat(r))}return a}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=c(r,o);switch(n){case"top-start":i.x+=l(t),i.y+=b(t,e);break;case"top":i.x+=y(t,e),i.y+=b(t,e);break;case"top-end":i.x+=h(t,e),i.y+=b(t,e);break;case"right-start":i.x+=p(t),i.y+=d(t);break;case"right":i.x+=p(t),i.y+=g(t,e);break;case"right-end":i.x+=p(t),i.y+=v(t,e);break;case"bottom-start":i.x+=l(t),i.y+=m(t);break;case"bottom":i.x+=y(t,e),i.y+=m(t);break;case"bottom-end":i.x+=h(t,e),i.y+=m(t);break;case"left-start":i.x+=f(t,e),i.y+=d(t);break;case"left":i.x+=f(t,e),i.y+=g(t,e);break;case"left-end":i.x+=f(t,e),i.y+=v(t,e);break;default:throw new Error("Invalid stacking direction: ".concat(n))}return i}var A=function(t){for(var e=t[0],n=e.x,r=e.y,o=e.width,i=e.height,c=a(n,r,o,i),s=1;s<t.length;s++){var u=t[s],l=Math.max(c.x+c.width,u.x+u.width),f=Math.max(c.y+c.height,u.y+u.height);c.x=Math.min(c.x,u.x),c.y=Math.min(c.y,u.y),c.width=l-c.x,c.height=f-c.y}return c},j=function(t,e,n){switch(n){case"x":return{width:t.width+e.width,height:Math.max(t.height,e.height)};case"y":return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)};default:throw new Error("Invalid combine direction: ".concat(n))}};function x(t){var e=_(t);return t.hitbox?a(e.x+t.hitbox.x,e.y+t.hitbox.y,t.hitbox.width,t.hitbox.height):a(e.x,e.y,t.width,t.height)}function P(t){return t.hitbox?t.hitbox:a(0,0,t.width,t.height)}function S(t){var e=_(t);return s(e.x+t.hitCirc.x,e.y+t.hitCirc.y,t.hitCirc.radius)}function k(t,e){for(var n,r=t.parent;r;)n=e-r.pos.x,r=r.parent;t.pos.x=n}function C(t,e){for(var n,r=t.parent;r;)n=e-r.pos.y,r=r.parent;t.pos.y=n}function _(t){for(var e=t.pos.x,n=t.pos.y;t.parent;)e+=(t=t.parent).pos.x,n+=t.pos.y;return c(e,n)}var R=function(t){return t.w?t.w:t.width},E=function(t){return t.h?t.h:t.height};function I(t){if(!t.children)return{width:0,height:0};var e=t.children[0],n={minX:e.pos.x,minY:e.pos.y,maxX:e.pos.x+R(e),maxY:e.pos.y+E(e)},r=t.children.reduce((function(t,e){return{minX:Math.min(t.minX,e.pos.x),minY:Math.min(t.minY,e.pos.y),maxX:Math.max(t.maxX,e.pos.x+R(e)),maxY:Math.max(t.maxY,e.pos.y+E(e))}}),n);return{width:r.maxX-r.minX,height:r.maxY-r.minY}}},32:(t,e,n)=>{"use strict";n.d(e,{TN:()=>r,QC:()=>o,d4:()=>i,uZ:()=>a,Xx:()=>c,nP:()=>u,bh:()=>l,Ht:()=>f,ex:()=>h,ge:()=>p,rA:()=>y,z4:()=>d,t:()=>v});var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+Math.floor((t-e+1)*Math.random())},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+(t-e)*Math.random()},i=function(t){return t[r(t.length-1)]},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return Math.min(e,Math.max(t,n))},c=function(t){return 0===t?1:t/Math.abs(t)},s=function(t,e){return Math.floor(t*e)/e},u=function(t,e){return t*t+e*e},l={linear:function(t){return t},quadIn:function(t){return t*t},quadOut:function(t){return 1-this.quadIn(t-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return 1-this.cubicIn(1-t)},smoothStep:function(t){return t*t*(3-2*t)}},f=function(t,e){return!(s(t.x+t.width,1e4)<=s(e.x,1e4)||s(t.x,1e4)>=s(e.x+e.width,1e4)||s(t.y+t.height,1e4)<=s(e.y,1e4)||s(t.y,1e4)>=s(e.y+e.height,1e4))},h=function(t,e){return!(t.x+t.width<=e.x||t.x>=e.x+e.width||t.y+t.height<=e.y||t.y>=e.y+e.height)},p=function(t,e){var n=t.radius+e.radius,r=t.x+t.radius/2-(e.x+e.radius/2),o=t.y+t.radius/2-(e.y+e.radius/2);return r*r+o*o<=n*n},y=function(t,e){var n=e.x+e.radius-a(t.x,t.x+t.width,e.x+e.radius),r=e.y+e.radius-a(t.y,t.y+t.height,e.y+e.radius),o=n*n+r*r;return Math.round(o)<e.radius*e.radius},d=function(t,e){var n=Math.abs(Math.atan(t/e));return e>0&&t<0?-n:e<0&&t<0?Math.PI+n:e<0&&t>0?Math.PI-n:e>0&&t>0?n:0===t&&e>0?0:0===t&&e<0?Math.PI:0===e&&t>0?Math.PI/2:0===e&&t<0?-Math.PI/2:void 0},b={short:new RegExp("[0-9a-f]","g"),long:new RegExp("[0-9a-f]{2}","g")},v=function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000",e=4===t.length?"short":"long",n=b[e];return t.replace("#","").match(n).map((function(t){return parseInt(t.concat("short"===e?t:""),16)}))}(t).map((function(t){return t/255}))}},43:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},921:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,o=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],a=o[3];if("function"==typeof btoa){var c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),u="/*# ".concat(s," */"),l=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[i].concat(l).concat([u]).join("\n")}return[i].join("\n")}},146:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>d});const u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=c(e);if(n){var o=c(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s(a(e=r.call(this,["change"],t())),"x",0),s(a(e),"y",0),window.addEventListener("resize",(function(){var n=t();Object.assign(a(e),n),e.emit("change",a(e))})),e}return u}(n(282).Z);var l=1980,f=1024,h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p={viewport:new u((function(){var t=window.innerWidth,e=window.innerHeight,n=e>t;if(h)return{width:n?t:Math.max(.7*t,e),height:n?Math.max(.7*e,t):e};var r=n?f:l,o=n?l:f;return{width:Math.min(t,r),height:Math.min(e,o)}})),storageId:"jshdf190",worldWidth:1e3,worldHeight:window.innerHeight,gravity:1700,isMobile:h,scale:!1,get devicePixelRatio(){return Math.min(h?1.5:1,window.devicePixelRatio)},orientation:"portrait"};function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const d=(b={SDKStrat:null,StorageStrat:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,n;return e=t,(n=[{key:"get",value:function(){return localStorage.getItem(this.key)}},{key:"set",value:function(t){localStorage.setItem(this.key,t)}}])&&y(e.prototype,n),t}(),showAdOnRestart:0,showAdOnResume:0,prerollAd:!1},Object.assign(p,b));var b},661:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._1ABys8-8-_OHSD1WgNfrCA {\r\n    transition: opacity 0.25s linear;\r\n}","",{version:3,sources:["webpack://./src/entities/Player/style.css"],names:[],mappings:"AAAA;IACI,gCAAgC;AACpC",sourcesContent:[".ctrlBtn {\r\n    transition: opacity 0.25s linear;\r\n}"],sourceRoot:""}]),a.locals={ctrlBtn:"_1ABys8-8-_OHSD1WgNfrCA"};const c=a},1:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,'.kBnvNgbdaWjN1JUPehZVl {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr {\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n._1ggU-0hgNAcU2DVOMJWQLZ {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.lc0jbG1_QuFCjZS3-gers {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.fqfOAOxskjZ7CSpKGysjL {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n._2cCNjRBGCgpzkmR8i4dm_7 {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.eI9EvLtxVH2HaEV7XABKr {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n._1niWA6rwv5zoeCHQyf8yAz {\r\n    color: #e0c6e0;\r\n}\r\n._2chNllMXrIThEnxJvtvvow {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.Z2wV4tFi4P3HcME7xm0vV {\r\n    display: none;\r\n}\r\n._3Z4Q7kHHX6KEBKSpcobAx4 {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n',"",{version:3,sources:["webpack://./src/screens/Game/initUI/style.css"],names:[],mappings:"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,iBAAiB;IACjB,gCAAgC;AACpC;AACA;IAEI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,kBAAkB;IAClB,mBAAmB;IACnB,uDAAuD;AAC3D;AACA;IACI,sBAAsB;IACtB,cAAc;IACd,eAAe;IACf,mBAAmB;IACnB,iBAAiB;IACjB,gCAAgC;IAChC,kBAAkB;AACtB;AACA;IACI,UAAU;IACV,gCAAgC;AACpC;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;IACV,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;AAClB;AACA;IACI,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,aAAa;AACjB;AACA;IACI,6BAA6B;IAC7B,UAAU;IACV,aAAa;AACjB",sourcesContent:['.txt {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.tooltip {\r\n    composes: txt;\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n.tooltip:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n.timer {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.overlay {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n.time {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.timeVal {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.recTimeVal {\r\n    color: #e0c6e0;\r\n}\r\n.continue {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.dead {\r\n    display: none;\r\n}\r\n.blurOverlay {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n'],sourceRoot:""}]),a.locals={txt:"kBnvNgbdaWjN1JUPehZVl",tooltip:"_2lHPVtCDOcovWkCo9WuhBr kBnvNgbdaWjN1JUPehZVl",timer:"_1ggU-0hgNAcU2DVOMJWQLZ",hidden:"lc0jbG1_QuFCjZS3-gers",overlay:"fqfOAOxskjZ7CSpKGysjL",time:"_2cCNjRBGCgpzkmR8i4dm_7",timeVal:"eI9EvLtxVH2HaEV7XABKr",recTimeVal:"_1niWA6rwv5zoeCHQyf8yAz",continue:"_2chNllMXrIThEnxJvtvvow",dead:"Z2wV4tFi4P3HcME7xm0vV",blurOverlay:"_3Z4Q7kHHX6KEBKSpcobAx4"};const c=a},806:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._2dxZo1LuY05qYQk5cWBGAj {\r\n    transform: scale(-1, 1);\r\n}\r\n._3vdgYio4yaebTL7u79N62v {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n._22uFm83qwojCfg8hmv6Yql {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n._34sI9l4leBq2HWmVtVKMz5 {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n._33T254Eh2ILhm_nusDbjXu {\r\n    transition: opacity linear 0.250s;\r\n}\r\n._3H227XjaA5OSILiuNsLx2P:hover {\r\n    opacity: 1;\r\n}\r\n.aA9CxtPMIYcN-bXcV3l_i {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n._1B0xVLXoPlp_en5mM907su {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.UbeNJHa88KANlX_8vZHCY {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/Level/style.css"],names:[],mappings:"AAAA;IACI,uBAAuB;AAC3B;AACA;IACI,cAAc;IACd,cAAc;IACd,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;IACnB,UAAU;IACV,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,cAAc;AAClB;AACA;IACI,iCAAiC;IACjC,UAAU;AACd;AACA;IACI,iCAAiC;AACrC;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;IACtB,mBAAmB;AACvB;AACA;IACI,UAAU;IACV,+BAA+B;AACnC;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;AAC1B",sourcesContent:[".prevBtn {\r\n    transform: scale(-1, 1);\r\n}\r\n.infoTitle {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n.infoSub {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n.icon {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n.startBtn {\r\n    transition: opacity linear 0.250s;\r\n}\r\n.playBtn:hover {\r\n    opacity: 1;\r\n}\r\n.error {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.retry {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n"],sourceRoot:""}]),a.locals={prevBtn:"_2dxZo1LuY05qYQk5cWBGAj",infoTitle:"_3vdgYio4yaebTL7u79N62v",infoSub:"_22uFm83qwojCfg8hmv6Yql",icon:"_34sI9l4leBq2HWmVtVKMz5",startBtn:"_33T254Eh2ILhm_nusDbjXu",playBtn:"_3H227XjaA5OSILiuNsLx2P",error:"aA9CxtPMIYcN-bXcV3l_i",hidden:"_1B0xVLXoPlp_en5mM907su",retry:"UbeNJHa88KANlX_8vZHCY"};const c=a},673:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._2jdDmJpB0m2pgCwnQXkXp0 {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n._3jHrN0bUvMonJnX0kLE_H5 {\r\n    letter-spacing: 0;\r\n}","",{version:3,sources:["webpack://./src/screens/Loading/style.css"],names:[],mappings:"AAAA;IACI,eAAe;IACf,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IACnB,mBAAmB;AACvB;AACA;IACI,iBAAiB;AACrB",sourcesContent:[".txt {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n.info {\r\n    letter-spacing: 0;\r\n}"],sourceRoot:""}]),a.locals={txt:"_2jdDmJpB0m2pgCwnQXkXp0",info:"_3jHrN0bUvMonJnX0kLE_H5"};const c=a},731:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._35YmgIRdM1rGTagRZdiMWH {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n._5nb22jczr2iRQl6GzsxhG {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: uP3_D0Wi7V8GXgXu0IENq;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n._3lEQuyyX-I9YTwqE1mHS1o {\r\n    animation-delay: 0s;\r\n}\r\n._1h3b1j-Uhme2WBBixZS7-Z {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.bancwqSaH-c4kiW34bN3V {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes uP3_D0Wi7V8GXgXu0IENq {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.-P5MQXKbIsmfEcxD8zhki:hover, .-P5MQXKbIsmfEcxD8zhki:active, .-P5MQXKbIsmfEcxD8zhki:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}","",{version:3,sources:["webpack://./src/screens/ui/style.css"],names:[],mappings:"AAAA;IACI,6BAA6B;IAC7B,eAAe;IACf,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;IACnB,qCAAuB;IACvB,yBAAyB;IACzB,mCAAmC;AACvC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,iBAAiB;AACrB;AACA;IACI,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,KAAK,WAAW;IAChB,OAAO,WAAW;AACtB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;IAChB,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;AACrB;AACA;IACI,mCAAmC;AACvC",sourcesContent:[".imgBtn {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n.loadingDot {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: loading;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n.dotA {\r\n    animation-delay: 0s;\r\n}\r\n.dotB {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.dotC {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes loading {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.playBtn {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.playBtn:hover, .playBtn:active, .playBtn:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}"],sourceRoot:""}]),a.locals={imgBtn:"_35YmgIRdM1rGTagRZdiMWH",loadingDot:"_5nb22jczr2iRQl6GzsxhG",loading:"uP3_D0Wi7V8GXgXu0IENq",dotA:"_3lEQuyyX-I9YTwqE1mHS1o",dotB:"_1h3b1j-Uhme2WBBixZS7-Z",dotC:"bancwqSaH-c4kiW34bN3V",playBtn:"-P5MQXKbIsmfEcxD8zhki"};const c=a},562:(t,e,n)=>{t.exports=n.p+"assets/372dc952be4e3949ea766f9a3cc16e4c.cson"},284:(t,e,n)=>{t.exports=n.p+"assets/1c14c948068ce72052c2f5c76b83ac7a.mp3"},343:(t,e,n)=>{t.exports=n.p+"assets/5ea22db127bf58d7edacd4e27de15128.cson"},716:(t,e,n)=>{t.exports=n.p+"assets/cd3cbf8f37bcd08c3cbc8ab297c0dfd9.png"},126:(t,e,n)=>{t.exports=n.p+"assets/8d5b69f4aa3fb86a73b9adac5fc89c68.png"},987:(t,e,n)=>{t.exports=n.p+"assets/48b0df5de1822d037c3e0da1056d5ea0.png"},524:(t,e,n)=>{t.exports=n.p+"assets/2a19667466be46c7b96d969d0f68f723.png"},399:(t,e,n)=>{t.exports=n.p+"assets/ec8b65d405f50357bf99224c24ad7e2e.png"},210:(t,e,n)=>{t.exports=n.p+"assets/3c92faa2a2f84dc5a4a752de743a7521.png"},976:(t,e,n)=>{t.exports=n.p+"assets/6d20d50c4325d374f53558afe76267a1.png"},229:(t,e,n)=>{t.exports=n.p+"assets/74d1202a0fc2f45361702ef9520989af.png"},73:(t,e,n)=>{t.exports=n.p+"assets/667305c7749f4cc363a07c4cedcc4e58.png"},315:(t,e,n)=>{t.exports=n.p+"assets/e864417a5cd342b1fe190beed41cd2f3.png"},224:(t,e,n)=>{t.exports=n.p+"assets/0ca9736dc31ac025b4a21bf7942a86fc.png"},102:(t,e,n)=>{t.exports=n.p+"assets/80b7b67277fabe5881e19db3ae8d119a.cson"},942:(t,e,n)=>{t.exports=n.p+"assets/629a0261aa38809f626b97c75c2cd20d.cson"},184:(t,e,n)=>{t.exports=n.p+"assets/0a5c7ff70d42b9e8d5ef0ab8acd287f5.cson"},559:(t,e,n)=>{t.exports=n.p+"assets/2ab079ae3be2650c6b6ecc57f34ce603.cson"},867:(t,e,n)=>{t.exports=n.p+"assets/1db215397ce4431cbba8cbecd2c00849.cson"},671:(t,e,n)=>{t.exports=n.p+"assets/e7043f79214f629e8df091157cf1368c.cson"},799:(t,e,n)=>{t.exports=n.p+"assets/3e6ada5a8b0bc5f97b91808d80f07e0a.cson"},235:(t,e,n)=>{t.exports=n.p+"assets/237fdf5291631726096a3395d7de5bef.cson"},818:(t,e,n)=>{t.exports=n.p+"assets/1b8fc2b7508e99db2348de7c84f498cb.cson"},508:(t,e,n)=>{t.exports=n.p+"assets/98d1121390135652ce1243461363d583.cson"},579:(t,e,n)=>{t.exports=n.p+"assets/c7e44ba8b1dec2b016af516370db1071.cson"},644:(t,e,n)=>{t.exports=n.p+"assets/f728efa8df13fb51278b6bf604a4e975.cson"},994:(t,e,n)=>{"use strict";var r,o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function a(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],o=0;o<t.length;o++){var c=t[o],s=e.base?c[0]+e.base:c[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var f=a(l),h={css:c[1],media:c[2],sourceMap:c[3]};-1!==f?(i[f].references++,i[f].updater(h)):i.push({identifier:l,updater:d(h,e),references:1}),r.push(l)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,y=0;function d(t,e){var n,r,o;if(e.singleton){var i=y++;n=p||(p=s(e)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(e),r=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var s=c(t,e),u=0;u<n.length;u++){var l=a(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=s}}}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(571);function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const r=function(n){var r,o,i=n.mainUpdateFn,a=void 0===i?function(){}:i,c=n.renderer,s=n.step,u=void 0===s?100:s,l=(r=[30,60].map((function(t){return 1e3/t})),o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(r,o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=l[0],h=l[1],p=h/1e3,y=0,d=0,b=1,v=!1;return requestAnimationFrame((function e(n){var r=b*Math.min(n-y,u),o=n-d,i=n/1e3;if(v)return requestAnimationFrame(e);for(;r>=h;)c.scene.update?c.scene.update(p,i):t.Z.updateRecursively(c.scene,p,i,c.scene),a(p,i),r-=h;o>=f?(c.renderRecursively(),d=n-(o-f)):d=n-o,y=n-r,requestAnimationFrame(e)})),{pause:function(){v=!0},resume:function(){v=!1},setSpeed:function(t){b=t},get meta(){return{elapsed:y/1e3}}}};var o=n(674),i="col-rects",a=Math.PI/4,c=3*Math.PI/4,s="obj-layer",u="offline";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=void 0!==AudioContext&&null!==AudioContext;const b=d?function(){var t=new AudioContext,e=function(){function e(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.loop,a=void 0!==i&&i,c=o.volume,s=void 0===c?1:c,u=o.pan,f=void 0===u?0:u,h=o.speed,p=void 0===h?1:h;l(this,e),this.buffer=n,this.panNode=t.createStereoPanner(),this.volumeNode=t.createGain(),this.panNode.pan.value=f,this.volumeNode.gain.value=s,this._speed=p,this._loop=a,this.playedFrom=0,this.offset=0,this.playTill=n.duration,this.lastPlayedAt=0,this.playing=!1,this.onEnded=function(){return r.playing=!1},e.onCreated(this)}return h(e,null,[{key:"getPaused",value:function(){return this._on}},{key:"off",value:function(){this._on=!1}},{key:"on",value:function(){this._on=!0}},{key:"onCreated",value:function(){}},{key:"onDestroyed",value:function(){}},{key:"destroy",value:function(t){e.onDestroyed(t)}}]),h(e,[{key:"pause",value:function(){if(this.playing){var e=t.currentTime-this.lastPlayedAt,n=this.offset+e,r=this.playTill-this.playedFrom;this.offset=this.loop?n%r:Math.min(n,r),this._stop()}}},{key:"resume",value:function(){if(!this.playing&&e._on){var t=this.playedFrom+this.offset,n=this.playTill-t;this._play(t,n)}}},{key:"play",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(!this.playing&&e._on){o&&(this.volume=o);var i=r||this.buffer.duration;this.playedFrom=n,this.offset=0,this.playTill=n+i,this.lastPlayedAt=t.currentTime,this._play(n,i)}}},{key:"_stop",value:function(){var t=this.sourceNode;t&&t.stop(0)}},{key:"_play",value:function(e,n){var r,o=this.buffer,i=this.panNode,a=this.volumeNode,c=this._loop,s=this._speed,u=t.createBufferSource(),l=(r=u,function(t,e,n){if(r.loop)return r.loopStart=e,r.loopEnd=e+n,r.start(t,e);r.start(t,e,n)});this.sourceNode=u,this.lastPlayedAt=t.currentTime,u.buffer=o,u.loop=c,u.playbackRate.value=s,u.connect(i),i.connect(a),a.connect(t.destination),l(t.currentTime,e,n),u.onended=this.onEnded,this.playing=!0}},{key:"speed",set:function(t){this._speed=t,this.sourceNode&&this.sourceNode.playbackRate.setValueAtTime(t,0)}},{key:"volume",set:function(t){this.volumeNode.gain.setValueAtTime(t,0)}},{key:"pan",set:function(t){this.panNode.pan.setValueAtTime(t,0)},get:function(){this.panNode.pan.value}}]),e}();return p(e,"_on",!0),p(e,"loadResource",(function(e){return new Promise((function(n,r){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(e){return function(e){return new Promise((function(n,r){t.decodeAudioData(e,n,r)}))}(e)})).then((function(t){return n(t)})).catch((function(){return r({message:u})}))}))})),e}():(m=v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"off",value:function(){}},{key:"on",value:function(){}},{key:"destroy",value:function(){}}],(n=[{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"play",value:function(){}}])&&y(e.prototype,n),r&&y(e,r),t}(),O=function(t){return Promise.resolve(t)},(w="loadResource")in(g=v)?Object.defineProperty(g,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[w]=O,m);var v,m,g,w,O;function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const x=function(){function t(e){var n=this,r=e.renderer,i=e.assetsCache,a=e.screenFactories,c=e.activeScreen;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"_activeScreen",null),j(this,"_sounds",[]),j(this,"paused",!1),j(this,"pausedSounds",[]),this._assetsCache=i,this.renderer=r,Object.keys(a).forEach((function(t){var e=a[t];n[t]=e(n),n[t].name=t})),o.Z.injectAssetsCache(i),b.onCreated=function(t){n._sounds.push(t)},b.onDestroyed=function(t){n._sounds=n._sounds.filter((function(e){return e!==t}))},c&&this.switchScreen(c)}var e,n;return e=t,(n=[{key:"switchScreen",value:function(t){var e;this._activeScreen&&this._activeScreen.onExit(),this._activeScreen=this[t],this.renderer.scene=this._activeScreen,this._activeScreen.background&&this.renderer.changeBackground(this._activeScreen.background);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this._activeScreen).onEnter.apply(e,r)}},{key:"disposeScreen",value:function(t){this[t.name]=null}},{key:"_update",value:function(t,e){this._activeScreen.update&&this._activeScreen.update(t,e)}},{key:"start",value:function(){this.loopControls=r({mainUpdateFn:function(){},renderer:this.renderer})}},{key:"stopSounds",value:function(){this._sounds.forEach((function(t){t.pause()}))}},{key:"pauseSounds",value:function(){this.pausedSounds=this._sounds.filter((function(t){return t.playing})),this._sounds.forEach((function(t){t.pause()}))}},{key:"turnOffSound",value:function(){this.stopSounds(),b.off()}},{key:"turnOnSound",value:function(){b.on()}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.loopControls.pause(),this.pauseSounds())}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this.loopControls.resume(),this.pausedSounds.forEach((function(t){t.resume()})))}},{key:"reset",value:function(){this.paused=!1,this.loopControls.resume(),this.pausedSounds=null}},{key:"assetsCache",get:function(){return this._assetsCache}}])&&A(e.prototype,n),t}();function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}const C=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(P(this,t),this.domNode=e||r.querySelector(n),!this.domNode)throw new Error("one or more invalid constructor parameters");if(this.domNode.getBoundingClientRect&&(this.x=0,this.y=0,!e)){var o=this.domNode.getBoundingClientRect(),i=o.width,a=o.height;this.width=i,this.height=a}}return k(t,null,[{key:"query",value:function(e,n){return new t(null,e,n)}},{key:"create",value:function(e){return new t(document.createElement(e))}},{key:"bounds",value:function(t){return t.domNode.getBoundingClientRect()}}]),k(t,[{key:"get",value:function(e){return t.query(e,this.domNode)}},{key:"hide",value:function(){this.domNode.style.opacity=0}},{key:"show",value:function(){this.domNode.style.opacity=1}},{key:"clear",value:function(){this.content=""}},{key:"on",value:function(t,e){this.domNode.addEventListener(t,e)}},{key:"off",value:function(t,e){this.domNode.removeEventListener(t,e)}},{key:"add",value:function(t){return this.domNode.appendChild(t.domNode||t),this}},{key:"classList",get:function(){return this.domNode.classList}},{key:"pos",set:function(t){var e=t.x,n=t.y;e&&(this.x=e,this.domNode.style.left="".concat(e,"px")),n&&(this.y=n,this.domNode.style.top="".concat(n,"px"))}},{key:"content",set:function(t){this.domNode.innerHTML=t}}]),t}();var _=n(915),R=n(379),E=n(146),I=n(529),B="canvas",T="webgl";function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Y=function(){function t(e){var n=e.cnvQry,r=e.scene,o=e.viewport,i=e.background,a=void 0===i?"#ffffff":i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"api",B);var c=document.querySelector(n);this.canvas=c,this.scene=r,this.ctx=c.getContext("2d"),this.changeBackground(a),this.resize(o),o.on("change",this.resize.bind(this))}var e,n;return e=t,(n=[{key:"changeBackground",value:function(t){this.canvas.style.background=t}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.canvas.setAttribute("width",e*E.Z.devicePixelRatio),this.canvas.setAttribute("height",n*E.Z.devicePixelRatio),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px")}},{key:"setTexatlas",value:function(t,e){this.img=t,this.meta=e}},{key:"render",value:function(t){switch(t.smooth=!0,this.ctx.translate(t.smooth?t.pos.x:Math.round(t.pos.x),t.smooth?t.pos.y:Math.round(t.pos.y)),t.initialRotation&&(this.ctx.rotate(t.initialRotation),this.ctx.translate(t.initialPivotX,0)),t.anchor&&this.ctx.translate(t.anchor.x,t.anchor.y),t.rotation&&this.ctx.rotate(t.rotation),t.anchor&&this.ctx.translate(-t.anchor.x,-t.anchor.y),t.pivot&&this.ctx.translate(t.pivot.x,t.pivot.y),t.scale&&this.ctx.scale(t.scale.x,t.scale.y),t.type){case _.ey:var e=this.meta[t.frame];this.ctx.drawImage(this.img,e.x,e.y,t.w,t.h,0,0,t.w,t.h);break;case _.hY:this.ctx.drawImage(t.img,0,0);break;case _.JA:t.fill&&(this.ctx.fillStyle=t.fill,this.ctx.fillRect(0,0,t.width,t.height)),t.stroke&&(this.ctx.strokeStyle=t.stroke,this.ctx.lineWidth=t.strokeWidth,this.ctx.strokeRect(0,0,t.width,t.height))}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),t.alpha&&(this.ctx.globalAlpha=t.alpha),t.blendMode&&(this.ctx.globalCompositeOperation=t.blendMode),this.render(t),t.debug){var e=t.hitbox||(0,I.mn)(t);this.ctx.save(),this.render(new R.Z(M(M({pos:M({},e)},e),{},{stroke:"red",strokeWidth:1}))),this.ctx.restore()}if(t.children)for(var n=0,r=t.children.length;n<r;n++)this.renderRecursively(t.children[n]);this.ctx.restore()}}}])&&X(e.prototype,n),t}(),N=function(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Couldn't compile shader: ".concat(t.getShaderInfoLog(r)));return r};var U="undefined"!=typeof Float32Array?Float32Array:Array;function L(){var t=new U(2);return U!=Float32Array&&(t[0]=0,t[1]=0),t}function z(t,e,n){return t[0]=e,t[1]=n,t}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),L();var H=function(){function t(){V(this,t),this.tMat=t.create(),this.sMat=t.create(),this.rMat=t.create()}return F(t,null,[{key:"create",value:function(){return t=new U(9),U!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t;var t}},{key:"identity",value:function(t){var e;return(e=t)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,t}}]),F(t,[{key:"scaled",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=t.identity(this.sMat);return r[0]=e,r[4]=n,r}},{key:"rotated",value:function(e){var n=t.identity(this.rMat),r=Math.sin(e),o=Math.cos(e);return n[0]=o,n[1]=r,n[3]=-r,n[4]=o,n}},{key:"translated",value:function(e,n){var r=t.identity(this.tMat);return r[6]=e,r[7]=n,r}}]),t}();const W=function(){function t(){V(this,t),this.iMat=new H,this.temp=H.create(),this.vec=L()}return F(t,[{key:"create",value:function(){return H.create()}},{key:"identity",value:function(t){return H.identity(t)}},{key:"multiply",value:function(t,e){var n=this.temp;n[0]=t[0]*e[0]+t[1]*e[3]+t[2]*e[6],n[1]=t[0]*e[1]+t[1]*e[4]+t[2]*e[7],n[2]=t[0]*e[2]+t[1]*e[5]+t[2]*e[8],n[3]=t[3]*e[0]+t[4]*e[3]+t[5]*e[6],n[4]=t[3]*e[1]+t[4]*e[4]+t[5]*e[7],n[5]=t[3]*e[2]+t[4]*e[5]+t[5]*e[8],n[6]=t[6]*e[0]+t[7]*e[3]+t[8]*e[6],n[7]=t[6]*e[1]+t[7]*e[4]+t[8]*e[7],n[8]=t[6]*e[2]+t[7]*e[5]+t[8]*e[8];for(var r=0;r<9;r++)e[r]=n[r]}},{key:"rotate",value:function(t,e){!function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);t[0]=p*r+h*a,t[1]=p*o+h*c,t[2]=p*i+h*s,t[3]=p*a-h*r,t[4]=p*c-h*o,t[5]=p*s-h*i,t[6]=u,t[7]=l,t[8]=f}(t,t,e)}},{key:"scale",value:function(t,e,n){z(this.vec,e,n),function(t,e,n){var r=n[0],o=n[1];t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(t,t,this.vec)}},{key:"translate",value:function(t,e,n){z(this.vec,e,n),function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=n[0],p=n[1];t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=c,t[5]=s,t[6]=h*r+p*a+u,t[7]=h*o+p*c+l,t[8]=h*i+p*s+f}(t,t,this.vec)}}]),t}();function J(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=G(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function G(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tt=function(){function t(e){var n,r=e.image,o=e.cnvQry,i=e.viewport,a=e.scene,c=e.clearColor,s=void 0===c?[0,0,0,0]:c,u=e.background,l=void 0===u?"#000000":u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,"api",T),$(this,"defBlend","source-over"),$(this,"defTint",[0,0,0,0]),this.canvas=document.querySelector(o),this.gl=function(t){var e=document.querySelector(t).getContext("webgl2");if(!e)throw new Error("Webgl support not available");return e}(o),this.program=this.initProgram(),this.image=r,this.scene=a,this.clearColor=s,this.initBuffers(),this.initUniforms(),this.matrixUtil=new W,this.setupGlSettings(),this.initViewport(i),this.changeBackground(l),Object.assign(this,((n={mStack:[]}).mStack.push(H.create()),n.curMatIdx=0,n.curMat=n.mStack[0],n.firstMat=n.mStack[0],n.getCurMat=function(){return this.curMat},n.save=function(){this.curMatIdx+=1,this.mStack[this.curMatIdx]=this.mStack[this.curMatIdx]||H.create(),this.curMat=this.mStack[this.curMatIdx];for(var t=this.mStack[this.curMatIdx-1],e=0;e<9;e++)this.curMat[e]=t[e]},n.restore=function(){if(0===this.curMatIdx)throw new Error("couldn't restore state: no save point could be found");this.curMatIdx-=1,this.curMat=this.mStack[this.curMatIdx]},n)),this.resize(i)}var e,n;return e=t,(n=[{key:"initProgram",value:function(){var t=this.gl,e=function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error("Couldnt link shaders: ".concat(t.getProgramInfoLog(r)));return r}(t,N(t,"   #version 300 es\n\n    in vec2 vert_pos;\n    \n    uniform mat3 mat;\n    uniform mat3 tex_mat;\n\n    out vec2 tex_coords;\n\n    void main() {\n        \n        tex_coords = (tex_mat * vec3(vert_pos, 1)).xy;\n        \n        gl_Position = vec4((mat * vec3(vert_pos, 1)).xy, 0, 1);\n    }\n",t.VERTEX_SHADER),N(t,"   #version 300 es\n    precision highp float;\n    \n    in vec2 tex_coords;\n    \n    uniform sampler2D tex_unit;\n    uniform bool overlay;\n    uniform vec3 overlay_col;\n    uniform vec4 g_tint;\n    uniform vec4 tint;\n    uniform float alpha;\n\n    out vec4 out_color;\n    void main() {\n        vec4 px_col = texture(tex_unit, tex_coords);\n        if (overlay) {\n            out_color = vec4(overlay_col, px_col.a * alpha);\n            return;\n        } \n        out_color = vec4((px_col + g_tint + tint).rgb, px_col.a * alpha);\n    }\n",t.FRAGMENT_SHADER));return t.useProgram(e),e}},{key:"initBuffers",value:function(){var t=this.gl;this.vao=t.createVertexArray(),t.bindVertexArray(this.vao);var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),t.STATIC_DRAW);var n=t.getAttribLocation(this.program,"vert_pos");t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bindVertexArray(null)}},{key:"initUniforms",value:function(){var t=this.gl;this.uMat=t.getUniformLocation(this.program,"mat"),this.uTexMat=t.getUniformLocation(this.program,"tex_mat"),this.uOverlay=t.getUniformLocation(this.program,"overlay"),this.uOverlayCol=t.getUniformLocation(this.program,"overlay_col"),this.uTint=t.getUniformLocation(this.program,"tint"),this.uGTint=t.getUniformLocation(this.program,"g_tint"),this.uAlpha=t.getUniformLocation(this.program,"alpha")}},{key:"setupGlSettings",value:function(){var t=this.gl;t.enable(t.BLEND),this.setDefaultSettings()}},{key:"setDefaultSettings",value:function(){this.overlay=!1,this.alpha=1,this.gTint=this.defTint,this.blendMode=this.defBlend}},{key:"initViewport",value:function(t){t.on("change",this.resize.bind(this))}},{key:"setTexatlas",value:function(t,e){var n=this.gl,r=n.createTexture(),o=n.getUniformLocation(this.program,"tex_unit");this.meta=e,this.image=t,n.activeTexture(n.TEXTURE0+0),n.uniform1i(o,0),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)}},{key:"translate",value:function(t,e){this.matrixUtil.translate(this.getCurMat(),t,e)}},{key:"rotate",value:function(t){this.matrixUtil.rotate(this.getCurMat(),t)}},{key:"scale",value:function(t,e){this.matrixUtil.scale(this.getCurMat(),t,e)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"changeBackground",value:function(t,e){this.canvas.setAttribute("style","background-image:url("+e+"); background-color: ".concat(t," !important;"))}},{key:"resize",value:function(t){var e=t.width,n=t.height,r=Math.round(e*E.Z.devicePixelRatio),o=Math.round(n*E.Z.devicePixelRatio);this.canvas.setAttribute("width",r),this.canvas.setAttribute("height",o),this.gl.viewport(0,0,r,o),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.matrixUtil.identity(this.firstMat),this.matrixUtil.scale(this.firstMat,1,-1),this.matrixUtil.translate(this.firstMat,-1,-1),this.matrixUtil.scale(this.firstMat,2/r,2/o)}},{key:"render",value:function(t){var e=t.rotation,n=t.anchor;if(this.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.initialRotation&&(this.rotate(t.initialRotation),this.translate(t.initialPivotX,0)),e&&(n&&this.translate(n.x,n.y),this.rotate(e),n&&this.translate(-n.x,-n.y)),t.scale&&this.scale(t.scale.x,t.scale.y),t.blendMode&&(this.blendMode=t.blendMode),t.frame){var r=this.meta[t.frame],o=r.x,i=r.y,a=t.w,c=t.h;this.scale(a,c),t.texMatFrame!==t.frame&&(t.texMat=this.matrixUtil.create(),t.texMatFrame=t.frame,this.matrixUtil.translate(t.texMat,o/this.image.width,i/this.image.height),this.matrixUtil.scale(t.texMat,a/this.image.width,c/this.image.height)),this.gl.uniformMatrix3fv(this.uMat,!1,this.getCurMat()),this.gl.uniformMatrix3fv(this.uTexMat,!1,t.texMat),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.bindVertexArray(null),this.scale(1/a,1/c)}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.clear(),this.save(),this.setAlphaAndBlendMode(t),this.render(t),t.children){var e,n=J(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.renderRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}this.resetAlphaAndBlendMode(t),this.restore()}}},{key:"setAlphaAndBlendMode",value:function(t){t.blendMode&&(this.blendMode=t.blendMode),t.alpha&&(this.alpha=t.alpha),t.overlay&&(this.overlay=t.overlay),t.tint&&(this.tint=t.tint)}},{key:"resetAlphaAndBlendMode",value:function(t){t.overlay&&(this.overlay=!1),t.tint&&(this.tint=this.defTint),t.alpha&&(this.alpha=1),t.blendMode&&(this.blendMode=this.defBlend)}},{key:"clearColor",set:function(t){var e;(e=this.gl).clearColor.apply(e,function(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||G(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}},{key:"alpha",set:function(t){this.gl.uniform1f(this.uAlpha,t)}},{key:"gTint",set:function(t){this.gl.uniform4fv(this.uGTint,t)}},{key:"tint",set:function(t){this.gl.uniform4fv(this.uTint,t)}},{key:"blendMode",set:function(t){var e=this.gl;e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}},{key:"overlay",set:function(t){this.gl.uniform1i(this.uOverlay,t?1:0),t&&this.gl.uniform3fv(this.uOverlayCol,t)}}])&&K(e.prototype,n),t}();var et,nt=n(282);function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot=b.loadResource,it=Object.freeze({SOUND:"SOUND",IMAGE:"IMAGE",DATA:"DATA"}),at=(rt(et={},it.SOUND,ot),rt(et,it.IMAGE,(function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=function(){return n({message:u})}}))})),rt(et,it.DATA,(function(t){return new Promise((function(e,n){fetch(t).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n({message:u})}))}))})),et);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ht(r);if(o){var n=ht(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return lt(this,t)});function a(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r={},(n="assets")in(e=ft(t=i.call(this,["prog","prog-end","load","error"])))?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=a,(n=[{key:"load",value:function(t){var e=this,n=t.length,r=Promise.resolve();t.reduce((function(t,r,o){return t.then((function(){var t="string"==typeof r?r:r.url;return function(t){var e=function(t){return t.match(/.(jpe?g)|(png)$/)?it.IMAGE:t.match(/.(mp3)|(wav)|(ogg)$/)?it.SOUND:t.match(/.(cson|bson)$/)?it.DATA:void 0}(t);return(0,at[e])(t)}(t).then((function(i){e.assets[t]=i,e.emit("prog",(o+1)/n,r.msg)}))}))}),r).then((function(){e.emit("prog-end"),e.emit("load"),e.off("prog")})).catch((function(t){e.emit("error",t)}))}},{key:"unload",value:function(t){this.assets[t]=null}},{key:"get",value:function(t){return this.assets[t]}}])&&st(e.prototype,n),a}(nt.Z);var yt=n(739);function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wt=function(t,e){var n=Number(t);if(0!==n&&!n)throw new Error("Attempting to set invalid ".concat(e,": ").concat(t));return n};const Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gt(r);if(o){var n=gt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return mt(this,t)});function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,["orb-update","music-update","sound-update"])).strat=t;var n=t.get();return e.data=n?JSON.parse(n):{curLevel:1,orbCount:6,hiscores:{},music:!0,sound:!0},e}return e=a,(n=[{key:"setNum",value:function(t,e){var n=wt(e,t);return this.data[t]=n,this.save(this.data),n}},{key:"setCurLevel",value:function(t){this.setNum("curLevel",t)}},{key:"setOrbCount",value:function(t){var e=this.setNum("orbCount",t);this.emit("orb-update",e)}},{key:"setHiscore",value:function(t,e){var n=wt(e,"hiscore");this.data.hiscores[String(t)]=n,this.save(this.data)}},{key:"getCurLevel",value:function(){return this.data.curLevel}},{key:"getOrbCount",value:function(){return this.data.orbCount}},{key:"getHiscore",value:function(t){return this.data.hiscores[String(t)]}},{key:"getMusic",value:function(){return this.data.music}},{key:"setMusic",value:function(t){this.data.music=t,this.emit("music-update",this.data.music),this.save(this.data)}},{key:"getSound",value:function(){return this.data.sound}},{key:"setSound",value:function(t){this.data.sound=t,this.emit("sound-update",this.data.sound),this.save(this.data)}},{key:"save",value:function(t){this.strat.set(JSON.stringify(t))}}])&&bt(e.prototype,n),a}(nt.Z);function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),jt(this,"periodBetweenAds",45e3),jt(this,"adLastPlayedAt",Date.now()-45e3),this.strat=e}var e,n;return e=t,(n=[{key:"rvaSupported",value:function(){return!!this.strat&&this.strat.rva}},{key:"setLoadProg",value:function(t){this.strat&&this.strat.setLoadProg(t)}},{key:"signalLoad",value:function(){return this.strat?this.strat.signalLoad():Promise.resolve()}},{key:"playRva",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.playRva()):Promise.reject()}},{key:"canPlay",value:function(){return Date.now()-this.adLastPlayedAt<this.periodBetweenAds}},{key:"playIntstAd",value:function(){return!this.strat||this.canPlay()?(console.log("Ad throttled: interstitial ad frequency exceeded"),Promise.reject()):(this.adLastPlayedAt=Date.now(),this.strat.playIntstAd())}},{key:"prerollAd",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.prerollAd()):Promise.reject()}},{key:"setOnPause",value:function(t){this.strat&&this.strat.setOnPause(t)}},{key:"setOnResume",value:function(t){this.strat&&this.strat.setOnResume(t)}}])&&At(e.prototype,n),t}();var Pt=n(942),St=n.n(Pt),kt=n(559),Ct=n.n(kt),_t=n(867),Rt=n.n(_t),Et=n(671),It=n.n(Et),Bt=n(799),Tt=n.n(Bt),Dt=n(235),Mt=n.n(Dt),Xt=n(818),Zt=n.n(Xt),Yt=n(508),Nt=n.n(Yt),Ut=n(579),Lt=n.n(Ut),zt=n(184),Vt=n.n(zt);const qt=[{id:St(),music:"music1"},{id:Ct(),bgPos:"15% 75w%"},{id:Rt()},{id:It(),music:"music1"},{id:Tt(),music:""},{id:Mt(),music:"music1",bgPos:"-50%"},{id:Zt(),bgPos:"40% 80%"},{id:Nt(),music:"",bgPos:"40% 32%"},{id:Lt(),music:"music1",bgPos:"75% 30%"},{id:Vt(),music:"",bgPos:"40% 80%"}];var Ft="LOADING",Ht="MAIN_MENU",Wt="LEVEL",Jt="GAME",Gt=n(994),Qt=n.n(Gt),Kt=n(673);Qt()(Kt.Z,{insert:"head",singleton:!1});const $t=Kt.Z.locals||{};var te={width:150,height:25},ee="info",ne="prog-bar",re="prog-ind";function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?se(t):e}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ue(r);if(o){var n=ue(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ce(this,t)});function a(t){var e,n,r,o,c=t.game,s=t.assets,u=t.uiRoot,l=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o="#000000",(r="background")in(n=se(e=i.call(this)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.game=c,e.assets=s,e.uiRoot=u,e.sdk=l,e}return e=a,(n=[{key:"onEnter",value:function(){var t=this,e=this.game.assetsCache;e.load(this.assets);var n=function(t){var e;t.content=(e=ee,"\n        ".concat(function(t,e,n,r){return'\n        <div id="'.concat("prog-bar",'" style="width: ').concat(t,"px; height: ").concat(e,'px; background: #ffe6d5; z-index: 99999;">\n        </div>\n        <div id="').concat("prog-ind",'" style="width: 4px; height: ').concat(e,'px; background: tomato; z-index: 100000;">\n        </div>\n    ')}(te.width,te.height),'\n        <div id="').concat(e,'" class="').concat($t.txt," ").concat($t.info,'">loading</div>\n        <div id="').concat(e,'" class="').concat($t.txt," ").concat($t.info,'"></div>\n    '));var n=t.get("#".concat(ne)),r=t.get("#".concat(re)),o=t.get("#".concat(ee)),i=function(t){n.pos=(0,I.qj)(t,te,"center","center"),r.pos=(0,I.qj)(t,te,"center","center"),o.pos=(0,I.EJ)(n,C.bounds(o),"bottom",0,20)};return E.Z.viewport.on("change",i),i(E.Z.viewport),{teardown:function(){E.Z.viewport.off("change",i),t.clear()},onProg:function(t,e){r.domNode.style.width="".concat(Math.round(t*te.width),"px"),o.content="".concat(Math.round(100*t),"%"),i(E.Z.viewport)},onError:function(t){console.log(t),o.content=t&&t.message===u?"Error: something went wrong":"Error: Unsupported Device",o.domNode.style.color="#d34545",i(E.Z.viewport)},onLoad:function(){t.clear()}}}(this.uiRoot),r=n.teardown,o=n.onProg,i=n.onError,a=n.onLoad;this.teardown=r,this.onProg=o,e.once("load",(function(){a();var e=function(){t.game.switchScreen(Ht)};t.sdk.signalLoad().then(e).catch(e)})),e.on("prog",(function(e){o(e),t.sdk.setLoadProg(Math.round(100*e))})),e.once("error",i)}},{key:"onExit",value:function(){this.game.disposeScreen(this),this.teardown(),this.game.assetsCache.off("prog",this.onProg),this.game.assetsCache.off("error")}}])&&ie(e.prototype,n),a}(t.Z);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?de(t):e}function de(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=be(r);if(o){var n=be(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ye(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).logo=new yt.Z({frame:"logo"}),t.rock1=new yt.Z({frame:"rock1"}),t.rock2=new yt.Z({frame:"rock2"}),t.ball=new yt.Z({frame:"ball"}),t.ball.pos.x=88,t.ball.pos.y=80,t.rock1.pos.x=200,t.rock2.pos.y+=t.rock2.h/2,t.ball.anchor={x:.75*t.ball.w,y:t.ball.h/2},t.ball.rotation=0,t.rock2.anchor={x:.75*t.rock2.w,y:t.rock2.h/2},t.rock2.rotation=-Math.PI/12,t.rock1.anchor={x:t.rock1.w/2,y:t.rock1.h/2},t.rock1.rotation=Math.PI/6,t.add(t.rock1),t.add(t.rock2),t.add(t.ball),t.add(t.logo),t.alpha=.01,Object.assign(de(t),(0,I.vD)(de(t))),t}return e=a,(n=[{key:"update",value:function(t){this.ball.rotation+=t*Math.PI/12,this.alpha=Math.min(1,this.alpha+.5*t)}}])&&he(e.prototype,n),a}(t.Z);var me=n(731);Qt()(me.Z,{insert:"head",singleton:!1});const ge=me.Z.locals||{},we=function(t,e){return'\n        <div id="'.concat(t,'" class="').concat(ge.playBtn,'">').concat(e,"</div>\n    ")};var Oe="play-btn";function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pe(t,e){return(Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Se(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?ke(t):e}function ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ce(r);if(o){var n=Ce(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Se(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),_e(ke(e=i.call(this)),"background","#000000"),e.game=n,e.uiRoot=r,e.sdk=o,n.assetsCache.once("load",(function(){var t=E.Z.viewport;e.gameTitle=new ve,e.realign=function(t){var n=E.Z.devicePixelRatio;e.gameTitle.pos=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){_e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,I.qj)({x:0,y:0,width:t.width*n,height:t.height*n},{width:e.gameTitle.width,height:e.gameTitle.height},"center","top",15,80))},t.on("change",e.realign),e.realign(t),e.add(e.gameTitle)})),e}return e=a,(n=[{key:"onEnter",value:function(){var t=this.uiRoot,e=this.game,n=this.sdk;this.teardownUI=function(t){var e=t.uiRoot,n=t.onPlay;e.content=we(Oe,"PLAY");var r=e.get("#".concat(Oe)),o=function(t){r.pos=(0,I.qj)(t,r,"center","center",0,0)};return r.on("click",n),E.Z.viewport.on("change",o),o(E.Z.viewport),function(){r.off("click",n),e.clear(),E.Z.viewport.off("change",o)}}({uiRoot:t,onPlay:function(){var r=function(){return e.switchScreen(Wt,!0)};if(t.clear(),!E.Z.prerollAd)return r();n.prerollAd().then(r).catch(r)}})}},{key:"onExit",value:function(){this.teardownUI(),E.Z.viewport.off("change",this.realign)}}])&&xe(e.prototype,n),a}(t.Z);var Ee=n(32),Ie=n(232);function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(n),!0).forEach((function(e){Le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xe(t,e,n){return(Xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ue(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ye(t,e){return!e||"object"!==Be(e)&&"function"!=typeof e?Ne(t):e}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ue(r);if(o){var n=Ue(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ye(this,t)});function a(t){var e,n=t.entYOffset,r=void 0===n?0:n,o=t.tiles,c=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["entYOffset","tiles"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Le(Ne(e=i.call(this,De({},c))),"_layoutTiles",(function(){})),Le(Ne(e),"_tiles",null),e.entYOffset=r,e.tiles=o,e.prevPos={x:0,y:0},e}return e=a,(n=[{key:"setWorld",value:function(t){var e=this,n=t.worldWidth,r=t.worldHeight,o=Math.min(r-this.baseline,(this.bounds.height-this.subject.height)/2),i=this.baseline-this.subject.height/2,a=(0,Ee.uZ)(0,r-this.bounds.height,i-this.bounds.height/2)*this.pF+this.bounds.height-o,c=o*(1-1/this.z);this.world.width=n,this.world.height=r,this.tiles.forEach((function(t){var n=De({},t);n.pos={x:t.pos.x,y:a+c-(e.baseline-t.pos.y)+e.entYOffset},e.add(n)}))}},{key:"layoutTiles",value:function(t){var e=this,n=t.width,r=void 0===n?this.world.width:n,o=t.height,i=void 0===o?this.world.height:o,a=t.tiles,c=void 0===a?this.tiles:a;if(i===this.world.height&&c===this.tiles)return this.world.width=r;c!==this.tiles&&(this.tiles=c),this.viewport.off("change",this._layoutTiles),this._layoutTiles=function(){e.children=[],e.setWorld({worldWidth:r,worldHeight:i})},this.viewport.on("change",this._layoutTiles),this._layoutTiles()}},{key:"onRemove",value:function(){Xe(Ue(a.prototype),"onRemove",this).call(this),this.viewport.off("change",this._layoutTiles)}},{key:"tiles",get:function(){return this._tiles},set:function(t){t&&(this._tiles=t,this.baseline=t.reduce((function(t,e){return Math.max(t,e.pos.y+e.height)}),0))}}])&&Me(e.prototype,n),a}(Ie.Z);function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const qe=function(){function t(e){var n=e.resource,r=e.start,o=e.duration,i=e.size,a=void 0===i?1:i,c=e.loop,s=e.volume,u=e.pan,l=e.speed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=n,this.start=r,this.duration=o,this.instances=Array(a).fill(new b(n,{loop:c,volume:s,pan:u,speed:l}))}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=function(t){for(var e=t.length-1;e>-1;e--)if(!t[e].playing)return t[e]}(this.instances);if(e)e.play(this.start,this.duration,t);else{var n=new b(this.resource);this.instances.push(n),n.play(this.start,this.duration,t)}}},{key:"pause",value:function(){this.instances.forEach((function(t){t.pause()}))}},{key:"resume",value:function(){this.instances.forEach((function(t){t.resume()}))}}])&&Ve(e.prototype,n),t}();function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const He=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mutations=e,this.accessIdx=0}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=this.mutations,n=this.accessIdx;e[n].play(t),this.accessIdx=(n+1)%e.length}},{key:"pause",value:function(){this.mutations((function(t){t.pause()}))}},{key:"resume",value:function(){this.mutations((function(t){t.resume()}))}}])&&Fe(e.prototype,n),t}();function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(Object(n),!0).forEach((function(e){Ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ke=function(){function t(e){var n=e.resource,r=e.resourceID,o=e.meta;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("Null audio resource: ".concat(r));this.meta=o,this.resource=n}var e,n;return e=t,(n=[{key:"create",value:function(t,e){var n=this.meta,r=this.resource,o=new b(r,e);return o.play=o.play.bind(o,n[t].start,n[t].duration),o}},{key:"createPool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new qe(Je(Je({resource:this.resource},this.meta[t]),e));return n}},{key:"createGroup",value:function(t,e){var n=this,r=t.map((function(t){return n.createPool(t,e)}));return new He(r)}}])&&Qe(e.prototype,n),t}();function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"makeMovable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.velX,r=void 0===n?0:n,o=e.velY,i=void 0===o?0:o,a=e.accX,c=e.accY,s=e.fricX,u=e.fricY,l=e.roll;Object.assign(t,{movable:!0,velX:r,velY:i,accX:a,accY:c,fricX:s,fricY:u,roll:l}),l&&(t.rotation=0)}},{key:"updateOffEdge",value:function(t,e){var n=t.offCorner;n.movable&&(t.pos.x+=n.pos.x-n.prevPosX,t.pos.y+=n.pos.y-n.prevPosY);var r=(0,I.Uz)(t),o=(0,I.SF)(n),i=o.x+(1===t.offEdge?o.width:0),s=(i-(r.x+r.radius))/r.radius,u=(o.y-(r.y+r.radius))/r.radius,l=u,f=-s,h=(0,Ee.z4)(u,s);t.fricX&&(t.velX-=t.fricX*t.velX*e/2);var p=(t.velX*l+20*f)*e/r.radius,y=h+p;switch(t.offEdge){case-1:var d=y>Math.PI/2,b=y<a;(d||b)&&(t.offEdge=0,t.velX*=1.5),b&&(t.velX=-50),d&&(t.pos.y-=.5);break;case 1:var v=y<Math.PI/2;if(v||y>c)return t.offEdge=0,!v&&(t.velX=50),v&&(t.velX*=1.5),v&&(t.pos.y-=.5)}var m=r.radius*(1+Math.cos(y)),g=r.radius*(1+Math.sin(y)),w=t.pos.x;(0,I.uF)(t,i-m),Math.abs(w-t.pos.x),(0,I.aZ)(t,o.y-g),t.rotation+=p}},{key:"update",value:function(t,e){t.accX&&(t.velX+=t.accX*e/2),t.accY&&(t.velY+=t.accY*e/2),t.fricX&&(t.velX+=-t.fricX*t.velX*e/2),t.fricY&&(t.velY*=e/t.fricY),t.roll&&(t.rotation+=t.velX*e/(2*t.radius)),t.pos.x+=t.velX*e,t.pos.y+=t.velY*e}}],null&&$e(e.prototype,null),n&&$e(e,n),t}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach((function(e){on(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function on(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function an(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sn(t,e,n){return e&&cn(t.prototype,e),n&&cn(t,n),t}function un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yn(t);if(e){var o=yn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hn(this,n)}}function hn(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?pn(t):e}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dn=function(t){un(n,t);var e=fn(n);function n(t){var r,o=t.imgId,i=t.metaId,a=t.frame,c=t.pos,s=t.lifetime,u=t.velX,l=void 0===u?0:u,f=t.velY,h=void 0===f?0:f,p=t.accX,y=t.accY,d=t.alpha,b=t.alphaDecayFn,v=t.rotVel,m=t.loop;return an(this,n),(r=e.call(this,{imgId:o,metaId:i,frame:a,pos:c})).lifetime=s,r.velX0=l,r.velY0=h,r.alpha0=d,r.pos0=rn({},c),r.alpha=d,r.alphaDecayFn=b,r.elapsed=0,r.loop=m,v&&(r.rotVel=v,r.rotation=0,r.anchor={x:r.w/2,y:r.h/2}),tn.makeMovable(pn(r),{velX:l,velY:h,accX:p,accY:y}),r}return sn(n,[{key:"_reset",value:function(){this.elapsed=0,this.velX=this.velX0,this.velY=this.velY0,this.alpha=this.alpha0,this.pos.x=this.pos0.x,this.pos.y=this.pos0.y,this.rotVel&&(this.rotation=0)}},{key:"update",value:function(t){if(this.elapsed>this.lifetime){if(!this.loop)return;this._reset()}this.elapsed+=t,tn.update(this,t),this.rotVel&&(this.rotation+=this.rotVel*t),this.alphaDecayFn&&(this.alpha=Math.max(.01,1-Ee.bh[this.alphaDecayFn](this.elapsed/this.lifetime)))}}]),n}(yt.Z);const bn=function(t){un(n,t);var e=fn(n);function n(t){var r,o,i=t.size,a=t.blendMode,c=t.loop,s=void 0!==c&&c,u=t.randomDistribution,l=void 0===u||u,f=t.metaId,h=t.imgId,p=t.params,y=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["size","blendMode","loop","randomDistribution","metaId","imgId","params"]);if(an(this,n),(r=e.call(this,rn({},y))).blendMode=a,l)o=p.reduce((function(t,e,n){return t.concat(Array(e.weight||1).fill(n))}),[]);else{var d=p.reduce((function(t,e){return t+(e.weight||1)}),0);o=p.reduce((function(t,e,n){return t.concat(Array(Math.round(i*(e.weight||1)/d)).fill(n))}),[])}for(var b=0;b<i;b++){var v=p[l?(0,Ee.d4)(o):o[b]],m={metaId:f,imgId:h,frame:v.frame,pos:{x:Array.isArray(v.offsetX)?(0,Ee.TN)(v.offsetX[0],v.offsetX[1]):v.offsetX||0,y:Array.isArray(v.offsetY)?(0,Ee.TN)(v.offsetY[0],v.offsetY[1]):v.offsetY||0},lifetime:Array.isArray(v.lifetime)?(0,Ee.QC)(v.lifetime[0],v.lifetime[1]):v.lifetime,velX:Array.isArray(v.velX)?(0,Ee.TN)(v.velX[0],v.velX[1]):v.velX,velY:Array.isArray(v.velY)?(0,Ee.TN)(v.velY[0],v.velY[1]):v.velY,accX:Array.isArray(v.accX)?(0,Ee.TN)(v.accX[0],v.accX[1]):v.accX,accY:Array.isArray(v.accY)?(0,Ee.TN)(v.accY[0],v.accY[1]):v.accY,alpha:Array.isArray(v.alpha)?(0,Ee.QC)(v.alpha[0],v.alpha[1]):v.alpha,rotVel:Array.isArray(v.rotVel)?(0,Ee.QC)(v.rotVel[0],v.rotVel[1]):v.rotVel,alphaDecayFn:v.alphaDecayFn,loop:s};r.add(new dn(m))}return s||(r.lifetime=p.reduce((function(t,e){return Math.max(t,e.lifetime[1])}),0),r.elapsed=0,r._reset=function(){this.remove(!1),this.onDead&&this.onDead(),this.elapsed=0;for(var t=this.children.length-1;t>-1;t--)this.children[t]._reset()},r.update=function(t){this.elapsed+=t,this.elapsed>this.lifetime&&this._reset()}),r}return sn(n,null,[{key:"feed",value:function(t,e,n){for(var r=0;r<e;r++)for(var o=0,i=t.children.length;o<i;o++)t.children[o].update(n)}}]),n}(t.Z);function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t,e){return!e||"object"!==vn(e)&&"function"!=typeof e?On(t):e}function On(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=An(r);if(o){var n=An(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wn(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),jn(On(t=i.call(this,["pause","over","play","complete","halt"])),"name",null),jn(On(t),"level",1),jn(On(t),"elapsed",0),t}return e=a,(n=[{key:"set",value:function(t){this.name=t}},{key:"is",value:function(t){return t===this.name}},{key:"pause",value:function(){this.is("paused")||(this.emit("pause"),this.set("paused"))}},{key:"play",value:function(){this.is("playing")||(this.emit("play"),this.set("playing"))}},{key:"over",value:function(t){this.is("over")||(this.emit("over",t),this.set("over"))}},{key:"complete",value:function(t,e){this.is("completed")||(this.emit("complete",t,e),this.set("completed"))}},{key:"halt",value:function(){this.is("halted")||(this.set("halted"),this.emit("halt"))}}])&&mn(e.prototype,n),a}(nt.Z),Pn=function(t,e,n){return'\n    <div \n        class="'.concat(ge.imgBtn," ").concat(n||"",'" \n        id="').concat(t,'" \n        style="width: ').concat(e.width,"px; height: ").concat(e.height,"px; background: url(").concat(e.src,');"\n    >\n    </div>\n    ')};var Sn=n(1);Qt()(Sn.Z,{insert:"head",singleton:!1});const kn=Sn.Z.locals||{};function Cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _n=20,Rn="pause-btn",En="resume-btn",In="orb-av",Bn="timer",Tn="orb-ind",Dn="orb-exp",Mn="orb-exp-ind",Xn="cross-btn",Zn="reset-btn",Yn="overlay",Nn="pause-overlay",Un="cur-time-ind",Ln="cur-time",zn="best-time-ind",Vn="best-time",qn="continue";const Fn=function(t,e,n,r,o,i,a,c,s,u,l,f,h,p,y){t.content=function(t,e){return'\n        <div id="'.concat(Nn,'" class="').concat(kn.blurOverlay,'"></div>\n        ').concat(Pn(Tn,t.orb,kn.hidden),'\n        <div id="').concat(Bn,'" class="').concat(kn.timer," ").concat(kn.hidden,'"> 0000:0 </div>\n        <div id="').concat(In,'" class="').concat(kn.txt," ").concat(kn.hidden,'"> ').concat(e," </div>\n        ").concat(Pn(Rn,t.pause,kn.hidden),"\n        ").concat(Pn(En,t.resume,kn.hidden),"\n        ").concat(Pn(Mn,t.orb,kn.hidden),'\n        <div id="').concat(Dn,'" class="').concat(kn.txt," ").concat(kn.hidden,'"> &times; ').concat(2,' </div>\n        <div id="').concat("rva",'" class="').concat(kn.tooltip," ").concat(kn.hidden,'" style="font-size: 1.5em"> watch ad to continue</div>\n        ').concat(Pn(Zn,t.reset,kn.hidden),"\n        ").concat(Pn(Xn,t.cross,kn.hidden),"\n    ")}(n,r.getOrbCount());var d=E.Z.isMobile&&e.getCtrlBtns(),b=t.get("#".concat(Tn)),v=t.get("#".concat(In)),m=t.get("#".concat(Dn)),g=t.get("#".concat(Mn)),w=t.get("#".concat("rva")),O=t.get("#".concat(Rn)),A=t.get("#".concat(En)),j=t.get("#".concat(Zn)),x=t.get("#".concat(Xn)),P=t.get("#".concat(Bn)),S=t.get("#".concat(Nn)),k=function(t,e,n,r,o,i,a,c,s){var u=function(t,e){var n=C.create("div");return n.domNode.setAttribute("class","".concat(ge.imgBtn," ").concat(e||"")),n.domNode.setAttribute("style","width: ".concat(t.width,"px; height: ").concat(t.height,"px; background: url(").concat(t.src,");")),n.width=t.width,n.height=t.height,n}(t[e]()?o:i,c?kn.hidden:kn.dead);return u.on("click",(function(){if(r.is("playing")){var c=!t[e]();t[n](c),u.domNode.style.background="url(".concat(c?o.src:i.src,")"),a.play()}})),u}(r,"getSound","setSound",o,n.soundOn,n.soundOff,f,h);t.add(k),d&&t.add(d.left).add(d.right).add(d.axn);var _,R,B=function(t){v.content=t},T=function(){E.Z.isMobile&&(d.left.hide(),d.right.hide(),d.axn.hide())},D=function(t){b.pos=(0,I.qj)(t,b,"left","top",_n,_n),v.pos=(0,I.EJ)(b,v,"right",10),O.pos=(0,I.qj)(t,O,"right","top",-20,_n),k.pos=(0,I.EJ)(O,k,"left",-12.5),P.pos=(0,I.EJ)(O,P,"bottom",0,10),j.pos=(0,I.qj)(t,j,"center","center"),A.pos=(0,I.EJ)(j,A,"top",0,-10),g.pos=(0,I.EJ)(A,g,"right",_n),m.pos=(0,I.EJ)(g,m,"right",10),w.pos=(0,I.EJ)(A,w,"top",0,-15),x.pos=(0,I.EJ)(j,x,"bottom",0,10),function(t){E.Z.isMobile&&(d.left.pos=(0,I.qj)(t,d.left,"left","bottom",_n,-30),d.right.pos=(0,I.EJ)(d.left,d.right,"right",_n),d.axn.pos=(0,I.qj)(t,d.right,"right","bottom",-20,-35))}(t),S.domNode.style.width="".concat(t.width,"px"),S.domNode.style.height="".concat(t.height,"px")},M=function(){A.hide(),j.hide(),x.hide(),g.hide(),m.hide(),k.show(),O.show(),b.show(),v.show(),P.show(),w.hide(),E.Z.isMobile&&(d.left.show(),d.right.show(),d.axn.show())},X=function(){A.show(),j.show(),x.show(),g.hide(),m.hide(),k.hide(),O.hide(),b.hide(),v.hide(),P.hide(),T(),A.domNode.style.background="url(".concat(n.resume.src,")")},Z=function(){!function(){var t=s(e.pos.x);A.show(),j.show(),x.show(),k.hide(),O.hide(),P.hide(),T();var o=y.rvaSupported(),i=!!t,a=r.getOrbCount(),c=i&&!(a>=2)&&o,u=i&&!c;A.domNode.style.background="url(".concat(c?n.rva.src:n.resume.src,")"),c?w.show():u?(g.show(),m.show()):(b.hide(),v.hide())}()},Y=function(e,r){t.clear(),t.content=function(t,e,n){return'\n        <div class="'.concat(kn.overlay," ").concat(kn.hidden,'" id="').concat(Yn,'">  </div>\n        <div class="').concat(kn.time," ").concat(kn.hidden,'" id="').concat(Un,'">finished in:</div>\n        <div class="').concat(kn.timeVal," ").concat(kn.hidden,'" id="').concat(Ln,'"> ').concat(e.toFixed(2),'s </div>\n        <div class="').concat(kn.time," ").concat(kn.hidden,'" id="').concat(zn,'"> record time: </div>\n        <div class="').concat(kn.timeVal," ").concat(kn.recTimeVal," ").concat(kn.hidden,'" id="').concat(Vn,'"> ').concat(0===n||e<n?"new!":n.toFixed(2)+"s"," </div>\n        ").concat(Pn(qn,t,"".concat(kn.hidden," ").concat(kn.continue)),"\n    ")}(n.resume,e,r);var o=t.get("#".concat(Yn)),a=t.get("#".concat(Un)),c=t.get("#".concat(Ln)),s=t.get("#".concat(zn)),u=t.get("#".concat(Vn)),l=t.get("#".concat(qn));o.domNode.style.width="".concat(E.Z.viewport.width,"px"),o.domNode.style.height="".concat(E.Z.viewport.height,"px"),s.pos=(0,I.qj)(E.Z.viewport,(0,I.$e)(s,u,"x"),"center","center"),u.pos=(0,I.EJ)(s,u,"right",8),a.pos=(0,I.EJ)(s,s,"top-start",0,-8),c.pos=(0,I.EJ)(a,c,"right",8),l.pos=(0,I.EJ)((0,I.EO)([s,u]),l,"bottom",0,16),l.on("click",(function(){var e;l.domNode.remove(),s.domNode.remove(),a.domNode.remove(),u.domNode.remove(),c.domNode.remove(),e=function(){t.clear(),i(!0)},y.playIntstAd().then(e).catch(e)})),o.domNode.style.opacity=.8,a.show(),c.show(),s.show(),u.show(),l.show()},N=(_=function(){var t={_val:!1,setVal:function(t){if(t!==this._val){if(this._val=t,t)return x.domNode.style.display="none",j.domNode.style.display="none",A.domNode.style.display="none",w.domNode.style.display="none",m.domNode.style.display="none",void(g.domNode.style.display="none");x.domNode.style.display="",j.domNode.style.display="",A.domNode.style.display="",w.domNode.style.display="",m.domNode.style.display="none",g.domNode.style.display="none"}},getVal:function(){return this._val}},n=function(t){a(),e.pos.x=t.x,e.pos.y=t.y},i=function(){a(),e.pos.x>1400&&c(),o.elapsed=0,o.play(),u.play(),t.setVal(!1)},f=function(){t.getVal()||(t.setVal(!0),Math.random()<E.Z.showAdOnRestart?y.playIntstAd().then(i).catch(i):i())};return[function(){if(!t.getVal()){var i=s(e.pos.x),a=y.rvaSupported(),c=!!i,h=r.getOrbCount(),p=h>=2,d=c&&!p&&a,b=c&&!d;if(b&&!p)return l.play();if(u.play(),b&&p){t.setVal(!0);var v=function(){r.setOrbCount(h-2),n(i),o.play(),t.setVal(!1)};return Math.random()<E.Z.showAdOnResume&&y.playIntstAd().then(v).catch(v),void v()}if(d){t.setVal(!0);var m=function(){n(i),o.play(),t.setVal(!1)};y.playRva().then(m).catch(m)}else f()}},f]}(),R=2,function(t){if(Array.isArray(t))return t}(_)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(_,R)||function(t,e){if(t){if("string"==typeof t)return Cn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cn(t,e):void 0}}(_,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=N[0],L=N[1],z=function(){o.is("paused")||o.is("completed")||(S.domNode.style.display="block",p.pause())},V=function(){o.is("paused")||o.is("completed")||(S.domNode.style.display="none",p.resume())},q=function(t){return o.is("playing")&&"Escape"===t.key?o.pause():o.is("over")&&"Enter"===t.key?U():o.is("paused")&&"Enter"===t.key?o.play():void 0};return E.Z.isMobile||document.addEventListener("keydown",q),window.addEventListener("focus",V),window.addEventListener("blur",z),document.addEventListener("blur",z),document.addEventListener("focus",V),o.on("play",M),o.on("pause",X),o.on("over",Z),o.on("complete",Y),E.Z.viewport.on("change",D),r.on("orb-update",B),O.on("click",(function(){o.is("playing")&&(o.pause(),u.play())})),A.on("click",(function(){if(!o.is("playing")&&!o.is("completed"))return o.is("paused")?(o.play(),u.play()):void U()})),x.on("click",(function(){o.is("playing")||o.is("completed")||(i(!1),u.play())})),j.on("click",(function(){o.is("playing")||o.is("completed")||L()})),D(E.Z.viewport),{teardownUI:function(){E.Z.isMobile||document.removeEventListener("keydown",q),window.removeEventListener("blur",z),window.removeEventListener("focus",V),document.removeEventListener("blur",z),document.removeEventListener("focus",V),E.Z.viewport.off("change",D),r.off("orb-update",B),o.off("play",M),o.off("pause",X),o.off("over",Z),o.off("complete",Y)},updateTimer:function(t){if(o.is("playing")){var e=Math.floor(t),n=Math.floor(10*(t-e)),r=t<10?"000":t<100?"00":t<1e3?"0":"";P.content="".concat(r).concat(e,":").concat(n)}}}};var Hn=n(716),Wn=n.n(Hn);function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function $n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nr(t,e){return(nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rr(t,e){return!e||"object"!==Jn(e)&&"function"!=typeof e?or(t):e}function or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ar=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nr(t,e)}(u,e);var n,r,o,a,c=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ir(o);if(a){var n=ir(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return rr(this,t)});function u(e){var n,r=e.player,o=e.data,a=e.factories,l=void 0===a?{}:a,f=Kn(e,["player","data","factories"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=c.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(n),!0).forEach((function(e){Qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},f));var h=new t.Z({id:i}),p=new t.Z({id:s}),y=new t.Z,d=new t.Z,b={mg:y,world:p,fg:d},v=function(e){var n=t.Z.get(e);if(!n){var r=new t.Z({id:e});return this.add(r),r}return n};p.getGroup=v,y.getGroup=v,d.getGroup=v;var m=function(t,e){var o=b[e];t.forEach((function(t){var e=t.name,i=t.x,a=t.y,c=t.groupId,s=Kn(t,["name","x","y","groupId"]),u=l[e];if(u)(c?o.getGroup(c):o).add(u(i,a,s,r));else{var f=new yt.Z({frame:e,pos:{x:i,y:a}});(c?o.getGroup(c):or(n)).add(f)}}))};return o.collisionRects.forEach((function(e){var n=e.x,r=e.y,o=e.width,i=e.height,a=Kn(e,["x","y","width","height"]),c=new t.Z({pos:{x:n,y:r}});c.width=o,c.height=i,Object.assign(c,a),h.add(c)})),p.add(h),m(o.mgTiles,"mg"),n.add(y),m(o.tiles,"world"),n.add(p),o.spawnPoints.forEach((function(t){var e=t.name,n=t.x,o=t.y,i=t.groupId,a=t.layer,c=void 0===a?"w":a,s=Kn(t,["name","x","y","groupId","layer"]),u=l[e];if(!u)throw new Error("no factory method provided for ".concat(e));var f="mg"===c?y:"fg"===c?d:p;(i?f.getGroup(i):f).add(u(n,o,s,r))})),m(o.fgTiles,"fg"),n.add(d),n.width=o.width,n.height=o.height,n}return n=u,(r=[{key:"resetRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(t.reset&&t.reset(),t.children){var e,n=$n(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.resetRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&er(n.prototype,r),u}(t.Z);function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(n),!0).forEach((function(e){lr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hr(t,e,n){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function pr(t,e){return(pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yr(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dr(r);if(o){var n=dr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return yr(this,t)});function a(t){var e,n=t.player,r=(t.uiRoot,t.data),o=t.bg,c=t.fbg,s=t.factories,u=(t.levelDataId,t.uiImages,t.onStateChange,t.gameState),l=t.music,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","uiRoot","data","bg","fbg","factories","levelDataId","uiImages","onStateChange","gameState","music"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var h=new ar({data:r,bg:o,fbg:c,player:n,factories:s});return(e=i.call(this,ur(ur({},f),{},{world:{width:h.width,height:h.height}}))).gameState=u,e.player=n,e.music=l,e.add(h),e.resetRecursively=function(){h.resetRecursively()},e}return e=a,(n=[{key:"update",value:function(t){if(hr(dr(a.prototype),"update",this).call(this,t),this.music)return this.gameState.is("completed")?this.music.playing&&this.music.pause():void(!this.music.playing&&this.music.play())}},{key:"onRemove",value:function(){this.music&&this.music.pause()}}])&&fr(e.prototype,n),a}(Ie.Z);var vr=Object.freeze({RECT:"rectangle",CIRC:"circle",PLANK:"plank"});const mr=function(t){var e=t.hitCirc?vr.CIRC:vr.RECT;if(e===vr.RECT&&!t.hitbox&&!t.width&!t.height)throw new Error("Unable to determine entity shape: \n".concat(JSON.stringify(t,null,3)));return e};var gr=function(t,e){var n=(0,I.Uz)(t),r=(0,I.Uz)(e);return(0,Ee.ge)(n,r)},wr=function(t,e){return(0,Ee.rA)((0,I.SF)(e),(0,I.Uz)(t))},Or=function(t,e){return(0,Ee.rA)((0,I.SF)(t),(0,I.Uz)(e))};const Ar=function(t,e,n){var r=mr(t),o=mr(e),i=n&&n.rigid&&n.movable;return r===vr.RECT&&o===vr.RECT?function(t){var e=t?Ee.Ht:Ee.ex;return function(t,n){var r=(0,I.SF)(t),o=(0,I.SF)(n);return e(r,o)}}(i):r===vr.CIRC&&o===vr.CIRC?gr:r===vr.CIRC&&o===vr.RECT?wr:r===vr.RECT&&o===vr.CIRC?Or:void 0};function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sr(t,e){return(Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kr(t,e){return!e||"object"!==jr(e)&&"function"!=typeof e?Cr(t):e}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_r(r);if(o){var n=_r(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return kr(this,t)});function a(t){var e,n=t.player,r=t.sound,o=t.storage,c=t.temp,s=void 0!==c&&c,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","sound","storage","temp"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(n),!0).forEach((function(e){Rr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u)),Rr(Cr(e),"chasing",!1),e.player=n,e.sound=r,e.hitbox={x:5,y:5,width:14,height:14},e.testCol=Ar(Cr(e),n),e.active=!0,e.storage=o,e.temp=s,e}return e=a,(n=[{key:"update",value:function(){if(this.active){var t=this.player.pos.x+this.player.width/2-this.pos.x,e=this.player.pos.y+this.player.width/2-this.pos.y;(0,Ee.nP)(t,e)>14400&&!this.chasing||(this.chasing=!0,this.pos.x+=t/60,this.pos.y+=e/60,this.testCol(this,this.player)&&this.player.visible&&(this.sound.play(),this.storage.setOrbCount(this.storage.getOrbCount()+1),this.remove()))}}},{key:"reset",value:function(){this.chasing=!1,this.temp&&this.remove()}},{key:"onRemove",value:function(){this.parent=null,this.chasing=!1}}])&&Pr(e.prototype,n),a}(bn);function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xr(t,e){return!e||"object"!==Ir(e)&&"function"!=typeof e?Zr(t):e}function Zr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nr=Object.freeze({x:9,y:0,width:93,height:200});const Ur=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yr(r);if(o){var n=Yr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Xr(this,t)});function a(t){var e,n=t.endY,r=t.uSound,o=t.dSound,c=t.speed,s=void 0===c?150:c,u=t.pos,l=t.player,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["endY","uSound","dSound","speed","pos","player"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(n),!0).forEach((function(e){Tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"gate",pos:u},f))).endY=n,e.startY=u.y,e.initDir=(0,Ee.Xx)(e.endY-e.startY),e.dir=e.initDir,e.dist=Math.abs(e.endY-e.startY),e.period=e.dist/s,e.t=0,e.uSound=r,e.dSound=o,e.player=l,e.testCol=Ar(Zr(e),l),e.hitbox=Nr,e}return e=a,(n=[{key:"updatePos",value:function(t){this.t+=t;var e=this.dist*Ee.bh.cubicIn(this.t/this.period);this.pos.y=(this.dir===this.initDir?this.startY:this.endY)+e*this.dir;var n=1===this.startToEndDir?(0,Ee.uZ)(this.startY,this.endY,this.pos.y):(0,Ee.uZ)(this.endY,this.startY,this.pos.y);if(n!==this.pos.y){this.t=0,this.dir*=-1,this.pos.y=n;var r=this.pos.x+this.w/2-this.player.pos.x,o=this.pos.y+this.h/2-this.player.pos.y;if(r*r+o*o>16e4)return;if(1===this.dir)return this.uSound.play();this.dSound.play()}}},{key:"reset",value:function(){this.pos.Y=this.startY,this.velY=this.velY0}},{key:"update",value:function(t){this.updatePos(t),this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&Dr(e.prototype,n),a}(yt.Z);function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qr(t,e,n){return e&&Vr(t.prototype,e),n&&Vr(t,n),t}function Fr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qr(t);if(e){var o=Qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jr(this,n)}}function Jr(t,e){return!e||"object"!==Lr(e)&&"function"!=typeof e?Gr(t):e}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qr(t){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kr=Math.PI,$r=[1.5,2],to=[16,36],eo=[180,180],no=[0,Kr],ro=function(t){Fr(n,t);var e=Wr(n);function n(){var t,r,o;return zr(this,n),!0,(o="forceUpdate")in(r=Gr(t=e.call(this,{frame:"wind"})))?Object.defineProperty(r,o,{value:true,enumerable:!0,configurable:!0,writable:!0}):r[o]=true,t.period=(0,Ee.QC)($r[0],$r[1]),t.amp=(0,Ee.TN)(to[0],to[1]),t.height=(0,Ee.TN)(eo[0],eo[1]),t.swirlOffset=(0,Ee.QC)(no[0],no[1]),t.t=0,t}return qr(n,[{key:"update",value:function(t){this.t+=t;var e=this.t/this.period;this.pos.y=-this.height*Ee.bh.linear(e),this.pos.x=this.amp*Math.sin(this.swirlOffset+4*Kr*e),this.alpha=1-Ee.bh.quadOut(e),e>1&&(this.t=0)}}]),n}(yt.Z);const oo=function(t){Fr(n,t);var e=Wr(n);function n(t,r,o,i){var a;zr(this,n),(a=e.call(this,t)).pos.x=r-6,a.pos.y=o-9,a.player=i,a.hitbox={x:-25,y:-200,width:50,height:200},a.testCol=Ar(Gr(a),i);for(var c=0;c<60;c++)a.add(new ro);return a.feed(240,1/60),a}return qr(n,[{key:"feed",value:function(t,e){for(var n=t-1;n>-1;n--)for(var r=this.children.length-1;r>-1;r--)this.children[r].update(e)}},{key:"update",value:function(t){if(this.testCol(this,this.player)&&this.player.visible){var e=this.player.pos.x+this.player.width/2-this.pos.x,n=this.player.pos.y+this.player.width/2-this.pos.y,r=(0,Ee.nP)(e,n);if(r<4096)return;this.player.controls.switchState("jumping",this.player),this.player.velY-=E.Z.gravity*(r/32400)*t}}},{key:"reset",value:function(){}},{key:"onRemove",value:function(){this.parent=null}}]),n}(t.Z);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function so(t,e){return!e||"object"!==io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uo(t){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uo(r);if(o){var n=uo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return so(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).tint=[0,0,0,0],e.vel=1,e.tintVal=0,e.forceUpdate=!0,e}return e=a,(n=[{key:"update",value:function(t){this.tintVal+=.2*t*this.vel,this.tintVal>.16?(this.vel=-1,this.tintVal=.16):this.tintVal<0&&(this.vel=1,this.tintVal=0),this.tint[0]=this.tintVal,this.tint[1]=this.tintVal,this.tint[2]=this.tintVal}}])&&ao(e.prototype,n),a}(yt.Z);function fo(t){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yo(t,e,n){return e&&po(t.prototype,e),n&&po(t,n),t}function bo(t,e){return(bo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vo(t,e){return!e||"object"!==fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mo(t){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const go=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bo(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=mo(e);if(n){var o=mo(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return vo(this,t)});function o(t,e,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return ho(this,o),(i=r.call(this)).invisible=!0,i.delay=a,i.duration=t,i.elapsed=0,i.onTick=e,i.onDone=n,i}return yo(o,null,[{key:"attachedTo",value:function(t){return function(e){return t.add(new o(e))}}}]),yo(o,[{key:"update",value:function(t){if(this.delay>0)this.delay-=t;else{if(this.elapsed+=t,this.elapsed>this.duration)return this.onDone&&this.onDone(),void this.remove();this.onTick&&this.onTick(this.elapsed/this.duration)}}}]),o}(t.Z);function wo(t){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ao(t,e){return(Ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jo(t,e){return!e||"object"!==wo(e)&&"function"!=typeof e?xo(t):e}function xo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var So=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ao(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Po(r);if(o){var n=Po(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return jo(this,t)});function a(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,{frame:"ball",pos:{x:t,y:e}})).pos0={x:t,y:e},o.player=r,o.tint=[.05,0,-.05,0],o.anchor={x:o.width/2,y:o.height/2},o.radius=o.width/2,o.alpha=.6,Object.assign(xo(o),ko(1)),tn.makeMovable(xo(o),{roll:!0}),o.seqs=JSON.parse(n),o.seqIdx=-1,o.seq=null,o.initiated=!1,o.dead=!1,o.testCol=Ar(xo(o),r),o.nextSeq(),o}return e=a,(n=[{key:"reset",value:function(){}},{key:"nextSeq",value:function(){var t,e,n,r=this;if(this.seqIdx++,this.seqIdx>this.seqs.length-1)return this.dead=!0,t=this,e=this.alpha,.6,n=function(){return r.remove()},void t.add(new go(.6,(function(n){t.alpha=e*(1-n)}),n));this.seq=this.seqs[this.seqIdx],this.seq.jumpTo?(this.velSign=(0,Ee.Xx)(this.seq.jumpTo-this.pos.y),this.velY=this.velSign*this.seq.speed,this.velX=this.seq.velX||0,this.accY=this.seq.acc||E.Z.gravity):this.seq.rollTo&&(this.velSign=(0,Ee.Xx)(this.seq.rollTo-this.pos.x),this.accY=0,this.velX=this.velSign*this.seq.speed,this.velY=0)}},{key:"checkSeq",value:function(){this.seq.jumpTo?this.pos.y*this.velSign>this.seq.jumpTo*this.velSign&&(this.pos.y=this.seq.jumpTo,this.nextSeq()):this.seq.rollTo&&this.pos.x*this.velSign>this.seq.rollTo*this.velSign&&(this.pos.x=this.seq.rollTo,this.nextSeq())}},{key:"update",value:function(t){if(!this.dead){if(this.updateFlash(t),this.initiated)return tn.update(this,t),void this.checkSeq();this.initiated=this.testCol(this,this.player)}}}])&&Oo(e.prototype,n),a}(n(391).TexRegion),ko=function(t){return{alpha:.7,elapsed:0,period:t||.6,updateFlash:function(t){if(this.elapsed+=t,this.elapsed>this.period)switch(this.elapsed=0,this.alpha){case.7:this.alpha=.6;break;case.6:this.alpha=.7}}}};const Co=So;function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bo(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Do=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=To(r);if(o){var n=To(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Bo(this,t)});function a(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;return Ro(this,a),(r=i.call(this,{frame:n,pos:{x:t,y:e}})).fromX=t,r.fromY=e,r.toX=o,r.toY=c,r.velX=o-t==0?0:(0,Ee.Xx)(o-t)*s,r.velY=c-e==0?0:(0,Ee.Xx)(c-e)*s,r.clampX0=r.fromX<r.toX?r.fromX:r.toX,r.clampX1=r.toX>r.fromX?r.toX:r.fromX,r.clampY0=r.fromY<r.toY?r.fromY:r.toY,r.clampY1=r.toY>r.fromY?r.toY:r.fromY,r}return e=a,(n=[{key:"update",value:function(t){var e=this.pos.x+this.velX*t,n=this.pos.y+this.velY*t;this.pos.x=(0,Ee.uZ)(this.clampX0,this.clampX1,e),this.pos.y=(0,Ee.uZ)(this.clampY0,this.clampY1,n),this.pos.x!==e&&(this.velX*=-1),this.pos.y!==n&&(this.velY*=-1)}}])&&Eo(e.prototype,n),a}(yt.Z);function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yo(t,e,n){return(Yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zo(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uo(t,e){return!e||"object"!==Mo(e)&&"function"!=typeof e?Lo(t):e}function Lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vo=Math.PI;const qo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zo(r);if(o){var n=zo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Uo(this,t)});function a(t,e,n){var r,o,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,l=arguments.length>6?arguments[6]:void 0;return Xo(this,a),(o=i.call(this,t,e,n,c,s,u)).anchor={x:o.width/2,y:o.height/2},o.player=l,o.radius=o.width/2,o.hitCirc=null!==(r=o.hitCirc)&&void 0!==r?r:{x:0,y:0,radius:o.radius-2},o.rotation=0,o.testCol=Ar(Lo(o),l),(o.velX||o.velY)&&(o.forceUpdate=!0),o}return e=a,(n=[{key:"update",value:function(t){var e=(this.velX-this.velY)*t/(2*this.radius);Yo(zo(a.prototype),"update",this).call(this,t),this.rotation+=e||Vo*t,this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&Zo(e.prototype,n),a}(Do);function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Go(t,e,n){return(Go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ti(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ko(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?$o(t):e}function $o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ni=24,ri=48;const oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ti(r);if(o){var n=ti(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ko(this,t)});function a(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],p=arguments.length>10?arguments[10]:void 0,y=arguments.length>11?arguments[11]:void 0;Wo(this,a);var d=u?"vlhd":"hlhd",b=u?"vlbod":"hlbod",v=u?2:ni,m=u?ni:10,g=u?0:ri,w=u?ri:0;ei($o(n=i.call(this,t,e,d,r,o,c)),"startX",void 0),ei($o(n),"startY",void 0),n.startX=t,n.startY=e,n.player=p;for(var O=0;O<s;O++){var A=new yt.Z({frame:b});A.pos.x+=v+g*O,A.pos.y+=m+w*O,A.alpha=h?1:0,n.add(A)}return n.hitbox={x:u?2:0,y:u?0:2,width:u?12:ni+ri*s,height:u?ni+ri*s:ni},n.testCol=Ar($o(n),n.player),n.on=h,l&&(n.period=l,n.t=0,n.sounds=y),n.delay=f,n}return e=a,(n=[{key:"update",value:function(t){if(Go(ti(a.prototype),"update",this).call(this,t),this.delay>0)this.delay-=t;else if(this.elapsed+=t,this.testCol(this,this.player)&&this.player.visible&&this.on&&this.player.explode(),this.period&&(this.t+=t,!(this.t<=this.period))){this.on=!this.on,this.t=0;var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ho(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.children);try{for(n.s();!(e=n.n()).done;)e.value.alpha=this.on?1:0}catch(t){n.e(t)}finally{n.f()}var r=this.pos.x-this.player.pos.x,o=this.pos.y-this.player.pos.y;r*r+o*o>9e4||(this.on?this.sounds.on.play():this.sounds.off.play())}}},{key:"reset",value:function(){this.pos.x=this.startX,this.pos.y=this.startY,this.t=0}}])&&Jo(e.prototype,n),a}(Do);function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function si(t,e){return!e||"object"!==ii(e)&&"function"!=typeof e?ui(t):e}function ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function li(t){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const hi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=li(r);if(o){var n=li(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return si(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),fi(ui(n=i.call(this,t)),"_player",null),fi(ui(n),"testCol",null),bn.feed(ui(n),120,.02),n.hitbox={x:-20,width:40,y:-15,height:17},n.onTouch=e,n}return e=a,(n=[{key:"reset",value:function(){}},{key:"update",value:function(){this.player&&this.testCol(this,this.player)&&(this.pos.x,this.pos.y,this.remove(),this.onTouch())}},{key:"onRemove",value:function(){this.parent=null}},{key:"player",get:function(){return this._player},set:function(t){this._player||(this._player=t,this.testCol=Ar(this,t))}}])&&ai(e.prototype,n),a}(bn);function pi(t){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vi(t,e){return!e||"object"!==pi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gi="lcr1",wi=["lcr2","lcr3"];const Oi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(c,e);var n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mi(o);if(i){var n=mi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return vi(this,t)});function c(t,e,n,r,o){var i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:75,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8?arguments[8]:void 0;return yi(this,c),(i=a.call(this,{frame:gi,pos:{x:t,y:e}})).dmgFacs=n,i.orbPool=r,i.player=f,i.sounds=o,i.luck=s,i.temp=l,i.setDamage(u),i.reset=function(){i.alpha=1,i.setDamage(u)},i}return n=c,(r=[{key:"setDamage",value:function(t){if(this.damage=(0,Ee.uZ)(0,wi.length,t),this.damage>0)return this.frame=wi[this.damage-1];this.frame=gi}},{key:"takeDamage",value:function(t){Math.abs(t)<300||(this.damage++,this.sounds.crack.play(),this.damage>wi.length?this.break(t):this.frame=wi[this.damage-1])}},{key:"break",value:function(e){this.temp?this.remove():this.alpha=0;var n=e>0?"down":"up",r=this.dmgFacs[n].create();if(r.pos.x=this.pos.x,r.pos.y=this.pos.y,this.sounds.snap.play(),Math.random()<this.luck/100){var o=this.orbPool.create(this.pos.x-6+this.width/2,this.pos.y-6+this.height/2,null,this.player);o.active=!1,o.add(new go(.6,null,(function(){o.active=!0}))),t.Z.get(s).add(o)}t.Z.get(s).add(r)}}])&&di(n.prototype,r),c}(yt.Z);function Ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const ji=function(){function t(e){var n=e.factory,r=e.size,o=e.free,i=e.reset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.factory=n,this.size=r,this.free=o,this.reset=i,this.list=Array(r).fill(!1),this.lastIdx=0}var e,n;return e=t,(n=[{key:"create",value:function(){this.lastIdx=(this.lastIdx+1)%this.list.length;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.list[this.lastIdx]?(this.reset&&this.reset.apply(this,[this.list[this.lastIdx]].concat(e)),this.free&&this.free(this.list[this.lastIdx])):this.list[this.lastIdx]=this.factory.apply(this,e);var r=this.list[this.lastIdx];return r}}])&&Ai(e.prototype,n),t}();function xi(t){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Si(t,e){return(Si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ki(t,e){return!e||"object"!==xi(e)&&"function"!=typeof e?Ci(t):e}function Ci(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ri=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Si(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_i(r);if(o){var n=_i(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ki(this,t)});function a(t,e,n,r,o){var c,s,u,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),l={x:2,y:0,width:86,height:88},(u="hitbox")in(s=Ci(c=i.call(this,{pos:{x:t,y:e},frame:"crane"})))?Object.defineProperty(s,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[u]=l,c.prevPosY=c.pos.y,c.prevPosX=c.pos.x,c.mat="metal",c.movable=!0,c.dispY=r-e,c.distX=n-t,c.meanX=t,c.meanY=e,c.period=o,c.t=0,c}return e=a,(n=[{key:"update",value:function(t){this.t+=t,this.pos.y=this.meanY+Ee.bh.smoothStep(this.t/this.period)*this.dispY,this.t>this.period&&(this.meanY=this.meanY+this.dispY,this.pos.y=this.meanY,this.dispY*=-1,this.t=0),this.velY=(this.pos.y-this.prevPosY)/t}}])&&Pi(e.prototype,n),a}(yt.Z);var Ei=n(644),Ii=n.n(Ei);function Bi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Di=Object.freeze({oneOff:!1,resolveX:function(t,e,n,r){var o=(0,I.SF)(e),i=(0,I.mn)(t);t.velX=r?t.velX:0,r&&(e.unduePosXUpdate=.5*n),n>0?(0,I.uF)(t,o.x-i.width-i.x):(0,I.uF)(t,o.x+o.width-i.x)},resolveY:function(t,e,n){var r=(0,I.SF)(e),o=(0,I.mn)(t);t.velY=0,n>0?(0,I.aZ)(t,r.y-o.height-o.y):(0,I.aZ)(t,r.y+r.height-o.y)}}),Mi=Object.freeze({oneOff:!1,resolveX:function(t,e,n){if(!t.offEdge){var r=(0,I.SF)(e),o=(0,I.Uz)(t),i=t.hitCirc,a=(0,Ee.uZ)(r.y,r.y+r.height,o.y+o.radius),c=0;if(a===r.y||a===r.y+r.height){var s=Math.abs(a-(o.y+o.radius));c=o.radius-Math.sqrt(o.radius*o.radius-s*s)}var u=t.pos.x,l=n-(e.movable?e.pos.x-e.prevPosX:0);l>0?(0,I.uF)(t,r.x-i.x-2*o.radius+c):(0,I.uF)(t,r.x+r.width-i.x-c);var f=(l+(t.pos.x-u))/l;t.velX=c?(0,Ee.Xx)(t.velX):0,t.rotation=t.prevRot+f*(t.rotation-t.prevRot)}},resolveY:function(t,e,n){if(!t.offEdge){var r=(0,I.SF)(e),o=t.hitCirc,i=(0,I.Uz)(t),s=(0,Ee.uZ)(r.x,r.x+r.width,i.x+i.radius),u=n-(e.movable?e.pos.y-e.prevPosY:0),l=0;if(s===r.x||s===r.x+r.width){var f=Math.abs(s-(i.x+i.radius));l=i.radius-Math.sqrt(i.radius*i.radius-f*f)}if(t.velY=e.movable&&e.velY>0?e.velY:0,u>0){var h=!1;if(l){var p=s===r.x?-1:1;if((0,Ee.Xx)(t.velX)===p)t.velX+=2*p,h=!0;else{t.offEdge=p,t.offCorner=e;var y=(0,Ee.z4)(r.y-(i.y+i.radius),r.x+(1===p?r.width:0)-(i.x+i.radius));(-1===p&&y<a||1===p&&y>c)&&(t.velX=p*Math.max(175,Math.abs(t.velX)))}}return(0,I.aZ)(t,r.y-o.y-2*i.radius+l),h}(0,I.aZ)(t,r.y+r.height-o.y-l)}}});function Xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Zi=function(){function e(n){var r=this,o=n.entity,i=n.block,a=n.blocks,c=n.onHit,s=void 0===c?function(){}:c,u=n.rigid,l=void 0!==u&&u,f=n.movable,h=void 0===f||f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.entity=o,this.oneToOne=Boolean(i)&&!Boolean(a),this.onHit=s,this.block=i,this.blocks=a,this.evaluateUpdateFn=function(){var e=t.Z.get(r.blocks),n=t.Z.get(r.block),o=r.oneToOne?n:e&&e.children[0];if(o)return r.testFn=Ar(r.entity,o,{rigid:l,movable:h}),function(t,e,n){var r=n.rigid,o=n.collision;if(!r)return function(){return o.test(o.onHit)};var i=function(t,e,n){var r=mr(t),o=mr(e);if(r===vr.RECT&&o===vr.RECT)return Di;if(r===vr.CIRC&&o===vr.RECT)return Mi;throw new Error("No resolver found for shapes ".concat(r," and ").concat(o))}(t,e);return i.oneOff?function(){o.test((function(e){i.resolve(t,e),o.onHit(e)}))}:function(){var e=t.pos.x-t.prevPosX,n=t.pos.y-t.prevPosY;t.pos.y=t.prevPosY,o.test((function(n){var r=t.velX;i.resolveX(t,n,e),o.onHit(n,r,0,!(t.pos.x===t.prevPosX))}),!0),t.pos.y+=n,o.test((function(e){var r=t.velY;if(i.resolveY(t,e,n))return t.onFall&&t.onFall();o.onHit(e,0,r,!(t.pos.y===t.prevPosY))}),!1)}}(r.entity,o,{rigid:l,movable:h,collision:r})}}var n,r;return n=e,(r=[{key:"resolve",value:function(t,e,n){var r=n&&t.movable?t.pos.y-t.prevPosY:0;t.pos.y-=r,0!==t.alpha&&this.testFn(this.entity,t)&&e(t),t.pos.y+=r}},{key:"test",value:function(e,n){if(this.oneToOne){var r=t.Z.get(this.block);this.resolve(r,e,n)}else{var o=t.Z.get(this.blocks);if(o)for(var i=o.children.length-1;i>-1;i--){var a=o.children[i];this.resolve(a,e,n)}}}},{key:"update",value:function(){var t=this.evaluateUpdateFn();t&&(this.update=t,this.evaluateUpdateFn=null,t())}}])&&Xi(n.prototype,r),e}();function Yi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ni(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Li=function(t){var e=t.which||t.keyCode;if("number"==typeof e)return e;switch(t.key){case"Left":case"ArrowLeft":return 37;case"Right":case"ArrowRight":return 39;case"Up":case"ArrowUp":return 38;case"A":case"a":return 65;case"D":case"d":return 68;case"W":case"w":return 87;case" ":return 32;default:return-1}};const zi=function(){function t(e){var n=this;for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.keys={},e){var o=e[r];if(Array.isArray(o)){var i,a=Yi(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;this.keys[c]={pressed:!1,held:!1}}}catch(t){a.e(t)}finally{a.f()}}else this.keys[o]={pressed:!1,held:!1}}this.keysArr=Object.values(this.keys),this.keysLen=this.keysArr.length,document.addEventListener("keydown",(function(t){var e=Li(t),r=n.keys[e];r&&(r.held=!0,r.pressed=!0)})),document.addEventListener("keyup",(function(t){var e=Li(t),r=n.keys[e];r&&(r.held=!1)})),document.addEventListener("blur",this.resetAll.bind(this)),window.addEventListener("blur",this.resetAll.bind(this))}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held",r=this.mappings[t];return Array.isArray(r)?r.find((function(t){return!0===e.keys[t][n]})):this.keys[r][n]}},{key:"reset",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1}},{key:"resetAll",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1,this.keysArr[t].held=!1}}])&&Ui(e.prototype,n),t}();function Vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const qi=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.btns={};var r=function(t){n.btns[t]={pressed:!1,held:!1};var r=e[t];r.on("touchstart",(function(){var e=n.btns[t];e.pressed=!0,e.held=!0})),r.on("touchend",(function(){var e=n.btns[t];e.pressed=!1,e.held=!1}))};for(var o in e)r(o);this.btnsArr=Object.values(this.btns),this.btnsLen=this.btnsArr.length}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held";return this.btns[t][e]}},{key:"reset",value:function(){for(var t=this.btnsLen-1;t>-1;t--)this.btnsArr[t].pressed=!1}}])&&Vi(e.prototype,n),t}();function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ji(t,e,n){return e&&Wi(t.prototype,e),n&&Wi(t,n),t}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qi(t,e){return!e||"object"!==Fi(e)&&"function"!=typeof e?Ki(t):e}function Ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $i(t){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ea=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gi(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=$i(e);if(n){var o=$i(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Qi(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3?arguments[3]:void 0;return Hi(this,o),ta(Ki(t=r.call(this,n)),"stateSwitched",!1),t.gameState=a,t.speed=e,t.states={offEdge:new oa(Ki(t)),jumping:new ra(Ki(t),i),rolling:new na(Ki(t))},t.state=t.states.jumping,t.state.limitReached=!0,t}return Ji(o,[{key:"cleanup",value:function(){this.reset(),this.stateSwitched=!1}},{key:"switchState",value:function(t){var e;if(!this.stateSwitched&&t!==this.state.name){this.state.onExit&&this.state.onExit(),this.state=this.states[t];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.state.onEnter&&(e=this.state).onEnter.apply(e,r),this.stateSwitched=!0}}},{key:"update",value:function(t,e){this.gameState.is("playing")&&(this.state.update(t,e),this.cleanup())}}]),o}(t)},na=function(){function t(e){Hi(this,t),ta(this,"name","rolling"),this.controls=e}return Ji(t,[{key:"onEnter",value:function(){}},{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")&&this.controls.switchState("jumping",t)}}]),t}(),ra=function(){function t(e,n){Hi(this,t),ta(this,"name","jumping"),ta(this,"jmpVel",-260),ta(this,"maxJvelInc",5.5),ta(this,"minJmpVel",-375),ta(this,"mxJmpVel",150),ta(this,"first",!1),this.controls=e,this.onJump=n}return Ji(t,[{key:"onEnter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||t.velY>this.mxJmpVel?this.limitReached=!0:(this.limitReached=!1,t.velY+=this.jmpVel,this.first=!0)}},{key:"onHalt",value:function(){this.limitReached=!0}},{key:"update",value:function(t,e){if(this.first&&t.velY<0&&this.onJump(),this.first=!1,this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")){if((t.velY<this.minJmpVel||t.velY>this.mxJmpVel)&&(this.limitReached=!0),this.limitReached)return;t.velY+=this.jmpVel*Math.min(this.maxJvelInc,t.velY*t.velY/100)*e}else this.limitReached=!0}}]),t}(),oa=function(){function t(e){Hi(this,t),ta(this,"name","offEdge"),this.controls=e}return Ji(t,[{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=this.controls.speed*e),this.controls.get("right")&&(t.velX+=this.controls.speed*e),t.velX=(0,Ee.uZ)(-100,100,t.velX)}}]),t}(),ia=ea(zi),aa=ea(qi),ca=n(987),sa=n.n(ca),ua=n(229),la=n.n(ua),fa=n(661);Qt()(fa.Z,{insert:"head",singleton:!1});const ha=fa.Z.locals||{};function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ya(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ba(t,e){return(ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function va(t,e){return!e||"object"!==pa(e)&&"function"!=typeof e?ma(t):e}function ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ga(t){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oa=E.Z.isMobile?aa:ia,Aa=E.Z.isMobile?function(){var t=[{name:"left",style:"background: url(".concat(sa(),"); transform: scale(-1, 1);"),width:65,height:55},{name:"right",style:"background: url(".concat(sa(),");"),width:65,height:55},{name:"axn",style:"background: url(".concat(la(),"); transform: rotate(270deg);"),width:64,height:64}];return Object.freeze(t.reduce((function(t,e){var n=C.create("div");return n.classList.add(ha.ctrlBtn),n.domNode.style=e.style,n.domNode.style.width="".concat(e.width,"px"),n.domNode.style.height="".concat(e.height,"px"),n.width=e.width,n.height=e.height,t[e.name]=n,t}),{}))}:function(){return Object.freeze({left:[37,65],right:[39,68],axn:[32,87,38]})},ja=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ba(t,e)}(u,e);var n,r,o,a,c=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ga(o);if(a){var n=ga(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return va(this,t)});function u(t){var e,n=t.speed,r=void 0===n?48:n,o=t.width,a=void 0===o?64:o,s=t.height,l=void 0===s?64:s,f=t.fricX,h=void 0===f?4:f,p=t.shard,y=t.cinder,d=t.controls,b=t.sounds,v=t.state,m=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["speed","width","height","fricX","shard","cinder","controls","sounds","state"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=c.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(n),!0).forEach((function(e){wa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"ball"},m)),wa(ma(e),"remDt",0),wa(ma(e),"smooth",!0),e.width=a,e.height=l,e.radius=a/2,e.hitCirc={x:0,y:0,radius:e.radius},e.rotation=0,e.anchor={x:a/2,y:l/2},e.pos.y=100,e.shard=p,e.cinder=y,e.sounds=b,e.fricX0=h,e.state=v,e.controls=d||new Oa(r,Aa(),(function(){b.jump.play()}),e.state),e.wallCollision=new Zi({entity:ma(e),blocks:i,rigid:!0,movable:!1,onHit:e.onWallCol.bind(ma(e))}),e.spikeCollision=new Zi({entity:ma(e),blocks:"spikes",rigid:!1,movable:!1,onHit:e.explode.bind(ma(e))}),e.magnetCollision=new Zi({entity:ma(e),blocks:"magnets",rigid:!0,movable:!1,onHit:e.onMagnetCol.bind(ma(e))}),e.crateCollision=new Zi({entity:ma(e),blocks:"crates",rigid:!0,movable:!1,onHit:e.onCrateCol.bind(ma(e))}),tn.makeMovable(ma(e),{accY:E.Z.gravity,roll:!0,fricX:h}),e}return n=u,(r=[{key:"onFall",value:function(){this.controls.switchState("jumping",this,!0)}},{key:"getCtrlBtns",value:function(){if(!E.Z.isMobile)throw new Error("control buttons are not defined for non-touch/desktop devices");return this.controls.mappings}},{key:"onWallCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>(t.movable?200:100)&&this.sounds[t.mat||"concrete"].play(Math.min(1,o/800))}if(n){if(n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"onMagnetCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>100&&this.sounds.metal.play(Math.min(1,o/3e3))}n&&n<0&&(this.velY=-100,"jumping"===this.controls.state.name&&(this.fricX=2*this.fricX0,this.controls.state.onHalt()))}},{key:"onCrateCol",value:function(t,e,n,r){if(n){if(t.takeDamage(n),n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"explode",value:function(){this.state.is("completed")||(this.cinder.pos.x=this.shard.pos.x=this.pos.x+this.width/2,this.cinder.pos.y=this.shard.pos.y=this.pos.y+this.height/2,this.alpha=0,t.Z.get(s).add(this.cinder),t.Z.get(s).add(this.shard),this.state.over(this.pos.x),this.sounds.player_exp.play(),this.sounds.player_din.play(.8),this.velX=this.velY=0)}},{key:"update",value:function(t){this.state.is("game-over")||this.state.is("paused")||(this.controls.update(this,t),Boolean(this.offEdge)?tn.updateOffEdge(this,t):tn.update(this,t),this.wallCollision.update(),this.magnetCollision.update(),this.spikeCollision.update(),this.crateCollision.update())}},{key:"onRemove",value:function(){this.parent=null}},{key:"visible",get:function(){return 0!==this.alpha&&this._visible}},{key:"offEdge",set:function(t){this.controls.switchState("offEdge",t),this._offEdge=t},get:function(){return this._offEdge}}])&&da(n.prototype,r),u}(yt.Z);wa(ja,"sounds",["player_din","concrete","wood","metal","jump","player_exp"]);const xa=ja;var Pa=n(284),Sa=n.n(Pa),ka=n(562),Ca=n.n(ka),_a=n(102),Ra=n.n(_a),Ea=n(210),Ia=n.n(Ea),Ba=n(524),Ta=n.n(Ba),Da=n(976),Ma=n.n(Da),Xa=n(399),Za=n.n(Xa),Ya=n(224),Na=n.n(Ya),Ua=n(315),La=n.n(Ua),za=n(73),Va=n.n(za);function qa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ha(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Wa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];qa(this,t),Ha(this,"maxX",0),this.checkpoints=e.sort((function(t,e){return t.x-e.x}))}var e,n;return e=t,(n=[{key:"updateX",value:function(t){this.maxX=Math.max(this.maxX,t)}},{key:"reset",value:function(){this.maxX=0}},{key:"get",value:function(){var t=this;if(0!==this.checkpoints.length)return this.checkpoints.findLast((function(e){return t.maxX>=e.x}))}}])&&Fa(e.prototype,n),t}();function Ja(t){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qa(t,e){return(Qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ka(t,e){return!e||"object"!==Ja(e)&&"function"!=typeof e?$a(t):e}function $a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tc(t){return(tc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ec(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const nc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qa(t,e)}(c,e);var n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tc(o);if(i){var n=tc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ka(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.storage,i=t.sdk;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ec($a(e=a.call(this)),"initialized",!1),ec($a(e),"soundPools",["gate"]);var s=n.assetsCache;return e.storage=o,e.sdk=i,e.game=n,e.uiRoot=r,e.state=new xn,e.state.on("pause",(function(){n.pause()})),e.state.on("play",(function(){n.resume()})),o.on("sound-update",(function(t){t?n.turnOnSound():n.turnOffSound()})),s.once("load",(function(){var t=new Ke({resource:s.get(Sa()),resourceId:Sa(),meta:s.get(Ca())}),r=s.get(Ii()),i=new bn(r.shard),a=new bn(r.cinder),c=xa.sounds.reduce((function(e,n){return e[n]=t.create(n),e}),{});if(i.onRemove=function(){i.parent=null},a.onRemove=function(){a.parent=null},e.soundSprite=t,e.btnSound=t.create("btn"),e.errSound=t.createPool("err_alt"),e.contSound=t.create("continue"),e.music={music1:t.create("music1")},e.player=new xa({width:64,height:64,fill:"brown",speed:350,fricX:3,pos:{x:300,y:0},shard:i,cinder:a,sounds:c,state:e.state}),e.factories=function(t){var e=t.soundSprite,n=t.assetsCache,r=t.storage,o=t.player,i=t.state,a=e.create("gate_u"),c=e.create("gate_d"),s=e.createPool("orb"),u=e.create("end"),l={on:e.createPool("las_on"),off:e.createPool("las_off")},f=n.get(Ii()),h=function(t,e,n,r){return new ji({factory:function(e,o,i,a){return new Er(Object.assign({},f.orb,{player:a,pos:{x:e,y:o},sound:n,storage:r,temp:t}))},size:e,free:function(t){t.chasing=!1,t.remove()},reset:function(t,e,n){t.chasing=!1,t.pos.x=e,t.pos.y=n}})},p=h(!1,5,s,r),y=h(!0,2,s,r),d=new ji({factory:function(t,e,n,r){return new oo(f.wind,t,e,r)},size:2,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n-10}}),b=new hi(f.fire,(function(){var t=r.getHiscore(i.level)||0,e=i.elapsed;i.level===r.getCurLevel()&&i.level<qt.length&&r.setCurLevel(i.level+1),(0===t||e<t)&&r.setHiscore(i.level,e),u.play(),i.complete(e,t)})),v=Object.freeze({up:new ji({factory:function(){var t=new bn(f.crateUp);return t.onRemove=function(){t.parent=null},t},size:2}),down:new ji({factory:function(){var t=new bn(f.crateDown);return t.onRemove=function(){t.parent=null},t},size:2})}),m={snap:e.createPool("w_snap"),crack:e.createPool("w_crack")};return{player:function(t,e,n){return o.reset=function(){o.pos.x=t,o.pos.y=e,o.alpha=1,o.velY=o.velX=0,o.controls.switchState("jumping",o,!0)},o.rotation=!0===n.slide?NaN:0,o.reset(),o},gate:function(t,e,n,r){return new Ur(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bi(Object(n),!0).forEach((function(e){Ti(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({pos:{x:t,y:e},colSound:null,uSound:a,dSound:c,player:r},n))},orb:p.create.bind(p),wind:d.create.bind(d),fire:function(t,e,n,r){return b.parent&&b.remove(),b.player=r,b.pos.x=t,b.pos.y=e,b},magnet:function(t,e){return new lo({pos:{x:t,y:e},frame:"magnet"})},ball:function(t,e,n,r){return new Co(t,e,n.seq,r)},sb1:function(t,e,n,r){return new qo(t,e,"sb1",n.toX,n.toY,n.speed,r)},sb2:function(t,e,n,r){return new qo(t,e,"sb2",n.toX,n.toY,n.speed,r)},sb3:function(t,e,n,r){return new qo(t,e,"sb3",n.toX,n.toY,n.speed,r)},sb4:function(t,e,n,r){return new qo(t,e,"sb4",n.toX,n.toY,n.speed,r)},sb5:function(t,e,n,r){return new qo(t,e,"sb5",n.toX,n.toY,n.speed,r)},sb6:function(t,e,n,r){return new qo(t,e,"sb6",n.toX,n.toY,n.speed,r)},lcr1:function(t,e,n,r){return new Oi(t,e,v,y,m,n.luck,n.dmg,n.temp,r)},vlhd:function(t,e,n,r){return new oi(t,e,n.toX,n.toY,n.speed,n.num,!0,n.period,n.delay,n.on,r,l)},hlhd:function(t,e,n,r){return new oi(t,e,n.toX,n.toY,n.speed,n.num,!1,n.period,n.delay,n.on,r,l)},bus:function(t,e,n){return new Ri(t,e,n.toX,n.toY,n.period)}}}({soundSprite:t,assetsCache:s,storage:o,player:e.player,state:e.state}),n.renderer.api===T&&!E.Z.isMobile){var u=s.get(Ra());e.bg=new ze({z:2.5,zAtop:1,viewport:E.Z.viewport,subject:e.player,entYOffset:0,tiles:u.map((function(t){return new yt.Z({frame:t.name,pos:{x:t.x,y:t.y}})}))}),e.add(e.bg)}e.uiImages={cross:s.get(Ta()),resume:s.get(la()),pause:s.get(Ia()),orb:s.get(Za()),reset:s.get(Ma()),soundOn:s.get(Na()),soundOff:s.get(La()),rva:s.get(Va())}})),e}return n=c,(r=[{key:"setLevel",value:function(t,e){var n,r=new br({player:this.player,data:t,viewport:E.Z.viewport,subject:this.player,factories:this.factories,music:e,gameState:this.state});return this.add(r),this.game.renderer.changeBackground(E.Z.isMobile||this.game.renderer.api===B?t.mob_bg:t.bg,Wn()),this.game.renderer.canvas.style.backgroundPosition=null!==(n=t.bgPos)&&void 0!==n?n:"-50%",this.game.renderer.gTint=t.tint&&t.tint.split(","),r.parent=null,this.bg&&(this.bg.overlay=t.pxbg&&(0,Ee.t)(t.pxbg),this.bg.layoutTiles(r.world)),r}},{key:"unsetLevel",value:function(){if(this.children){var e=this.children.length-1;e>-1&&t.Z.removeChild(this,this.children[e])}}},{key:"onEnter",value:function(e){var n=this,r=Math.min(e-1,qt.length-1),o=qt[r].id,i=qt[r].music,a=Object.assign(this.game.assetsCache.get(o),qt[r]),c=this.setLevel(a,i&&this.music[i]),s=new Wa(a.checkpoints);this.checkpoint=s;var u=function(){c.focusInst(),n.bg&&n.bg.focusInst()};u(),c.idx=r;var l=s.get.bind(s),f=Fn(this.uiRoot,this.player,this.uiImages,this.storage,this.state,(function(t){return n.game.switchScreen(Wt,!1,t)}),(function(){window.Node=t.Z,window.level=c,c.resetRecursively(),s.reset()}),u,l,this.btnSound,this.errSound,this.contSound,d,this.game,this.sdk),h=f.teardownUI,p=f.updateTimer;this.state.level=r+1,this.teardownUI=h,this.updateTimer=p,this.state.play()}},{key:"onExit",value:function(){this.unsetLevel(),this.teardownUI&&this.teardownUI(),this.game.reset(),this.state.halt(),this.state.elapsed=0}},{key:"update",value:function(e,n){this.checkpoint.updateX(this.player.pos.x),this.state.elapsed+=e,this.children.forEach((function(r){t.Z.updateRecursively(r,e,n,r)})),this.updateTimer(this.state.elapsed)}}])&&Ga(n.prototype,r),c}(t.Z);var rc=n(806);Qt()(rc.Z,{insert:"head",singleton:!1});const oc=rc.Z.locals||{};var ic="prev-btn",ac="next-btn",cc="start-btn",sc="lev-info",uc="lock",lc="loading",fc="best-time",hc="retry",pc=E.Z.isMobile?20:60,yc=Object.freeze({width:24,height:24}),dc='\n<div id="'.concat(uc,'" class="').concat(oc.icon,'">\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#ffe6d5" width="').concat(yc.width,'" height="').concat(yc.height,'" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-5 7.723v2.277h-2v-2.277c-.595-.347-1-.984-1-1.723 0-1.104.896-2 2-2s2 .896 2 2c0 .738-.404 1.376-1 1.723zm-5-7.723v-4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v4h-8z"/></svg>\n</div>\n'),bc=function(t){return"Best Time: ".concat(t?t.toFixed(2)+"s":"n/a")};const vc=function(t){var e=t.onStart,n=t.uiRoot,r=t.storage,o=t.level,i=t.maxLevel,a=t.images,c=t.assetsCache,s=t.contSound,u=t.chSound,l=t.errSound,f=o,h=!1;n.content=function(t,e,n){return"\n        ".concat(Pn(ic,t.arrow,oc.prevBtn),"\n        ").concat(dc,'\n        <div class="').concat(oc.infoTitle,'" id="').concat(sc,'">').concat("Level "+e,'</div> \n        <div class="').concat(oc.infoTitle," ").concat(oc.infoSub,'" id="').concat(fc,'">').concat(bc(n),"</div>\n        ").concat(Pn(ac,t.arrow),"\n        ").concat(we(cc,"START"),"\n    ")}(a,o,r.getHiscore(f));var p=n.get("#".concat(ic)),y=n.get("#".concat(ac)),d=n.get("#".concat(cc)),b=n.get("#".concat(sc)),v=n.get("#".concat(uc)),m=n.get("#".concat(fc)),g=function(t){var e=b.domNode.getBoundingClientRect(),n=e.width,r=e.height,o=m.domNode.getBoundingClientRect(),i=o.width,a=o.height;b.width=n,b.height=r,m.width=i,m.height=a,b.pos=(0,I.qj)(t,b,"center","center",0,-10),m.pos=(0,I.EJ)(b,m,"bottom",0,8),v.pos=(0,I.EJ)(m,yc,"bottom",0,20)},w=function(t){g(t),p.pos=(0,I.qj)(t,p,"left","center",pc),y.pos=(0,I.qj)(t,y,"right","center",-pc),d.pos=(0,I.EJ)(m,d,"bottom",0,64)},O=function(t,e){v.domNode.style.opacity=t<=e||t>qt.length?0:1,d.domNode.style.opacity=t<=e?1:0},A=function(){if(!h){if(1===f)return l.play();f=Math.max(f-1,1);var t=r.getHiscore(f);m.content=bc(t),b.content="Level ".concat(f),O(f,i),g(E.Z.viewport),u.play()}},j=function(){if(!h){if(f>qt.length)return l.play();f=Math.min(f+1,qt.length+1);var t=r.getHiscore(f);b.content=f<=qt.length?"Level ".concat(f):"Coming Soon",m.content=f<=qt.length?bc(t):"more coming soon",O(f,i),g(E.Z.viewport),u.play()}},x=function t(){h=!0,n.clear();var r=qt[f-1].id;if(!c.get(r)){n.content='\n        <div id="'.concat(lc,'" style="width: 44px; height:  12px;" >\n            <div class="').concat(ge.loadingDot," ").concat(ge.dotA,'"></div>\n            <div class="').concat(ge.loadingDot," ").concat(ge.dotB,'"></div>\n            <div class="').concat(ge.loadingDot," ").concat(ge.dotC,'"></div>\n        </div>\n    ');var o=n.get("#".concat(lc)),i=function(){e(f),c.off("error")};return o.pos=(0,I.qj)(E.Z.viewport,o,"center","center"),qt.forEach((function(t){c.unload(t.id)})),c.load([r]),c.once("load",i),void c.once("error",(function(){c.off("load",i),n.content='\n<div id="'.concat("err",'" class="').concat(oc.error," ").concat(oc.hidden,'">\n    ').concat("Connection Problem",'\n</div>\n<div id="').concat("retry",'" class="').concat(oc.retry," ").concat(oc.hidden,'">\n    RETRY\n</div>\n');var e=n.get("#".concat("err")),r=n.get("#".concat(hc));e.pos=(0,I.qj)(E.Z.viewport,e,"center","center"),r.pos=(0,I.EJ)(e,r,"bottom",0,10),r.show(),e.show(),r.on("click",t)}))}e(f)},P=function(){if(!h){if(f>i)return l.play();E.Z.viewport.off("change",w),s.play(),x()}},S=function(t){var e=t.which||t.keyCode;if(e)switch(e){case 37:case 65:A();break;case 39:case 68:j();break;case 32:case 13:P()}else switch(t.key){case"Left":case"ArrowLeft":case"A":case"a":A();break;case"Right":case"ArrowRight":case"D":case"d":j();break;case" ":case"Enter":P()}};return!1===E.Z.isMobile&&document.addEventListener("keydown",S),p.on("click",A),y.on("click",j),d.on("click",P),E.Z.viewport.on("change",w),w(E.Z.viewport),function(){!1===E.Z.isMobile&&document.removeEventListener("keydown",S),p.off("click",A),y.off("click",j),d.off("click",P)}};function mc(t){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wc(t,e){return(wc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oc(t,e){return!e||"object"!==mc(e)&&"function"!=typeof e?Ac(t):e}function Ac(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jc(t){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Pc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wc(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jc(r);if(o){var n=jc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Oc(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.storage;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),xc(Ac(e=i.call(this)),"background","#000000"),xc(Ac(e),"curLevel",0),e.game=n,e.storage=o,e.uiRoot=r,n.assetsCache.once("load",(function(){var t=n.assetsCache,r=new Ke({resource:t.get(Sa()),resourceId:Sa(),meta:t.get(Ca())});e.contSound=r.createPool("continue"),e.chSound=r.createPool("change"),e.errSound=r.createPool("error")})),e}return e=a,(n=[{key:"onEnter",value:function(t,e){var n=this,r=this.game,o=this.storage,i=this.uiRoot,a=this.contSound,c=this.chSound,s=this.errSound;t?(this.contSound.play(),this.curLevel=o.getCurLevel()):e&&(this.curLevel=Math.min(this.curLevel+1,qt.length)),this.teardownUI=vc({onStart:function(t){r.switchScreen(Jt,t),n.curLevel=t},uiRoot:i,images:{arrow:r.assetsCache.get(sa()),resume:r.assetsCache.get(la())},assetsCache:r.assetsCache,storage:o,level:this.curLevel,maxLevel:o.getCurLevel(),contSound:a,chSound:c,errSound:s})}},{key:"onExit",value:function(){this.teardownUI()}}])&&gc(e.prototype,n),a}(t.Z);var Sc,kc=n(126),Cc=n.n(kc),_c=n(343),Rc=n.n(_c);function Ec(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ic=function(t){var e;try{e=new tt(t)}catch(n){console.log("Webgl 2 not supported.. resorting to Canvas2D"),e=new Y(t)}return e}({cnvQry:"#arena",scene:null,background:"#000000",viewport:E.Z.viewport}),Bc=new pt,Tc=new Ot(new E.Z.StorageStrat(E.Z.storageId)),Dc=C.query("#ui-layer"),Mc=Tc.getCurLevel(),Xc=[{url:Ii(),msg:"loading particles"},Ta(),Za(),Ia(),Ma(),la(),Na(),La(),Va(),{url:qt[Mc-1].id,msg:"loading level data"},{url:sa(),msg:"loading ui assets"},{url:Sa(),msg:"loading audio sprite"},{url:Ca(),msg:"loading audio sprite metadata"},{url:Cc(),msg:"loading images"},{url:Rc(),msg:"loading texture atlas"}];E.Z.isMobile||Xc.push(Ra());var Zc=new xt(!!E.Z.SDKStrat&&new E.Z.SDKStrat),Yc=(Ec(Sc={},Ft,(function(t){return new le({game:t,uiRoot:Dc,assets:Xc,sdk:Zc})})),Ec(Sc,Ht,(function(t){return new Re({game:t,uiRoot:Dc,sdk:Zc})})),Ec(Sc,Jt,(function(t){return new nc({game:t,uiRoot:Dc,storage:Tc,sdk:Zc})})),Ec(Sc,Wt,(function(t){return new Pc({game:t,uiRoot:Dc,storage:Tc})})),Sc),Nc=new x({renderer:Ic,assetsCache:Bc,storage:Tc,screenFactories:Yc});Zc.setOnPause((function(){return Nc.pause()})),Zc.setOnResume((function(){return Nc.resume()})),Tc.getSound()||Nc.turnOffSound(),Bc.once("prog-end",(function(){var t=Bc.get(Rc()),e=Bc.get(Cc());Ic.setTexatlas(e,t),yt.Z.injectAtlasmeta(t)})),Nc.switchScreen(Ft),Nc.start()})()})();
//# sourceMappingURL=script.js.map