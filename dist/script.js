(()=>{var t={232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(32),i=n(529),c=n(146);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,a,y=(r=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(a){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function d(t){var e,n=t.subject,r=t.viewport,o=t.world,i=t.z,a=void 0===i?1:i,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["subject","viewport","world","z"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=y.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l))).z=a,e.pF=1/a,e.bounds={x:0,y:0,width:r.width,height:r.height},e.world=o||{width:r.width,height:r.height},e.onViewportChange=function(t){e.bounds.width=t.width*c.Z.devicePixelRatio,e.bounds.height=t.height*c.Z.devicePixelRatio,e.focusInst()},e.viewport=r,e.setSubject(n),r.on("change",e.onViewportChange),e.onViewportChange(r),e.focus(),e}return e=d,(n=[{key:"intersects",value:function(t){return t===this||!(t.width||t.height||t.hitbox)||(0,o.ex)((0,i.SF)(t),this.bounds)}},{key:"setSubject",value:function(t){t&&(this.subject=t,this.offset=(0,i.LP)(t),this.focus())}},{key:"focusInst",value:function(){this.subject&&(this.pos.x=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),this.pos.y=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2))}},{key:"focus",value:function(t){if(this.subject){var e=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),n=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2);this.pos.x+=12*(e-this.pos.x)*t,this.pos.y+=12*(n-this.pos.y)*t}}},{key:"update",value:function(t){this.focus(t)}},{key:"onRemove",value:function(){this.viewport.off(this.onViewportChange)}}])&&l(e.prototype,n),d}(r.Z)},571:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,{Z:()=>f});var a,s,u,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pos,r=void 0===n?{x:0,y:0}:n,i=e.rotation,c=e.scale,a=e.anchor,s=e.pivot,u=e.id,l=e.alpha;o(this,t),this.pos=r,this._visible=!0,c&&(this.scale=c),i&&(this.rotation=i),a&&(this.anchor=a),s&&(this.pivot=s),l&&(this.alpha=l),Boolean(u)&&(this.id=u,t.addRef(u,this))}return c(t,null,[{key:"addRef",value:function(t,e){this.__entities[t]=e}},{key:"removeRef",value:function(t){this.__entities[t]=null}},{key:"get",value:function(t){return this.__entities[t]}},{key:"cleanupRecursively",value:function(e){if(e.onRemove&&e.onRemove(),e.id&&this.removeRef(e.id),e.children){var n,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw c}}}}(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.cleanupRecursively(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"updateRecursively",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(e.movable&&(e.prevPosX=e.pos.x,e.prevPosY=e.pos.y,e.unduePosXUpdate&&(e.pos.x+=e.unduePosXUpdate,e.unduePosXUpdate=0),e.roll&&(e.prevRot=e.rotation)),e._visible=0!==e.alpha&&(!o.intersects||o.intersects(e)),(e._visible||e.forceUpdate)&&e.update&&e.update(n,r),e.children)for(var i=e.children,c=0,a=i.length;c<a;c++)t.updateRecursively(i[c],n,r,o)}},{key:"removeChild",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t.children=t.children.filter((function(t){return t!==e})),e.parent=null,n&&this.cleanupRecursively(e))}}]),c(t,[{key:"add",value:function(t){t.parent=this,this.children?this.children.push(t):this.children=[t]}},{key:"remove",value:function(e){t.removeChild(this.parent,this,e)}}]),t}();u={},(s="__entities")in(a=l)?Object.defineProperty(a,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[s]=u;const f=l},379:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)});function i(t){var e,n=t.width,s=t.height,u=t.fill,l=t.stroke,f=t.strokeWidth,h=t.alpha,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["width","height","fill","stroke","strokeWidth","alpha"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p))).width=n,e.height=s,e.fill=u,e.stroke=l,e.strokeWidth=f,e.alpha=h,e.type=o.JA,e}return i}(r.Z)},739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function i(t){var e,n,a=t.frame,s=t.isCustom,u=void 0!==s&&s,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["frame","isCustom"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l));var f=i._meta[a];return f.hitbox&&(n.hitbox=f.hitbox),n.hitCirc=null!==(e=f.hitCirc)&&void 0!==e?e:void 0,n.type=o.ey,n.initialRotation=f.rotation?-f.rotation*Math.PI/180:null,n.width=f.width,n.height=f.height,n.w=n.initialRotation?n.height:n.width,n.h=n.initialRotation?n.width:n.height,n.frame=u?[f.x,f.y,n.w,n.h]:a,n.initialRotation&&(n.initialPivotX=-n.height),n}return s(i,null,[{key:"injectAtlasmeta",value:function(t){this._meta=t}}]),s(i,[{key:"setAnchor",value:function(t){this.anchor=this.initialRotation?{x:t.y,y:t.x}:t}}]),i}(r.Z);h(p,"_assetsCache",null);const y=p},674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,r,i,h=(r=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e,n=t.imgId,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["imgId"]);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r))).img=p._assetsCache.get(n),!e.img)throw new Error("Image with imgId ".concat(n," can't be found in the assets cache"));return e.type=o.hY,e}return e=p,n=[{key:"injectAssetsCache",value:function(t){this._assetsCache=t}}],null&&a(e.prototype,null),n&&a(e,n),p}(r.Z);f(h,"_assetsCache",null)},391:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Camera:()=>Z.Z,Circle:()=>d,IsoCube:()=>X,Node:()=>r.Z,Rect:()=>o.Z,TexRegion:()=>v.Z,Text:()=>k,Texture:()=>b.Z});var r=n(571),o=n(379),i=n(915);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.radius,c=void 0===n?30:n,a=e.fill,u=e.stroke,h=void 0===u?"red":u,p=l(e,["radius","fill","stroke"]);return f(this,o),(t=r.call(this,s({},p))).radius=c,t.fill=a,t.stroke=h,t.type=i.Xw,t}return o}(r.Z);var b=n(674),v=n(739);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return P(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color,i=void 0===n?"white":n,c=e.size,a=void 0===c?"20pt":c,s=(e.value,A(e,["color","size","value"]));return j(this,o),(t=r.call(this,w({},s))).color=i,t.size=a,t}return o}(r.Z);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=M(e);if(n){var o=M(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return D(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.length,c=void 0===n?20:n,a=e.width,s=void 0===a?40:a,u=e.frontColor,l=void 0===u?"dimgrey":u,f=e.topColor,h=void 0===f?"#B97A57":f,p=e.sideColor,y=void 0===p?"#880015":p,d=I(e,["length","width","frontColor","topColor","sideColor"]);return B(this,o),(t=r.call(this,R({},d))).length=c,t.width=s,t.frontColor=l,t.topColor=h,t.sideColor=y,t.type=i.SE,t.hitbox={x:c/2,y:-c/2,width:s,height:s},t}return o}(r.Z);var Z=n(232)},915:(t,e,n)=>{"use strict";n.d(e,{hY:()=>r,ey:()=>o,JA:()=>i,SE:()=>c,Xw:()=>a});var r="TEXTURE",o="TEXREGION",i="RECT",c="ISOCUBE",a="CIRCLE"},282:(t,e,n)=>{"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>a});const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.events=e.reduce((function(t,e){return t[e]=[],t}),{}),Object.assign(this,n)}var e,n;return e=t,(n=[{key:"on",value:function(t,e){if(!this.events[t])throw new Error('attempting to listen to an unknown event: "'.concat(t,'"'));this.events[t].push(e)}},{key:"once",value:function(t,e){e.once=!0,this.on(t,e)}},{key:"off",value:function(t,e){if(!e)return this.events[t]=[];this.events[t]=this.events[t].filter((function(t){return t!==e}))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var c=r(this.events[t]);c.forEach((function(n){n.apply(void 0,o),n.once&&e.off(t,n)}))}}])&&c(e.prototype,n),t}()},529:(t,e,n)=>{"use strict";n.d(e,{LP:()=>u,qj:()=>w,EJ:()=>O,EO:()=>A,$e:()=>j,SF:()=>x,mn:()=>P,Uz:()=>S,uF:()=>k,aZ:()=>C,vD:()=>I});var r,o,i,c=(r=[0,0].map((function(){return{x:0,y:0,width:0,height:0}})),o=0,function(t,e,n,i){return r[o=0===o?1:0].x=t,r[o].y=e,r[o].width=n,r[o].height=i,r[o]}),a=(i={x:0,y:0},function(t,e){return i.x=t,i.y=e,i}),s=function(){var t=[0,0].map((function(){return{x:0,y:0,radius:0}})),e=0;return function(n,r,o){return t[e=0===e?1:0].x=n,t[e].y=r,t[e].radius=o,t[e]}}();function u(t){var e=t.hitbox,n=t.hitcirc;return t.hitbox?{x:e.x+e.width/2,y:e.y+e.height/2}:t.hitcirc?{x:n.x,y:n.y}:{x:t.width/2,y:t.height/2}}var l=function(t){return t.x},f=function(t,e){return t.x-e.width},h=function(t,e){return t.x+(t.width-e.width)},p=function(t){return t.x+t.width},y=function(t,e){return t.x+(t.width-e.width)/2},d=function(t){return t.y},b=function(t,e){return t.y-e.height},v=function(t,e){return t.y+(t.height-e.height)},m=function(t){return t.y+t.height},g=function(t,e){return t.y+(t.height-e.height)/2};function w(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=a(o,i);switch(n){case"left":c.x+=l(t);break;case"center":c.x+=y(t,e);break;case"right":c.x+=h(t,e);break;default:throw new Error("Invalid x-alignment parameter: ".concat(n))}switch(r){case"top":c.y+=d(t);break;case"center":c.y+=g(t,e);break;case"bottom":c.y+=v(t,e);break;default:throw new Error("Invalid y-alignment parameter: ".concat(r))}return c}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=a(r,o);switch(n){case"top-start":i.x+=l(t),i.y+=b(t,e);break;case"top":i.x+=y(t,e),i.y+=b(t,e);break;case"top-end":i.x+=h(t,e),i.y+=b(t,e);break;case"right-start":i.x+=p(t),i.y+=d(t);break;case"right":i.x+=p(t),i.y+=g(t,e);break;case"right-end":i.x+=p(t),i.y+=v(t,e);break;case"bottom-start":i.x+=l(t),i.y+=m(t);break;case"bottom":i.x+=y(t,e),i.y+=m(t);break;case"bottom-end":i.x+=h(t,e),i.y+=m(t);break;case"left-start":i.x+=f(t,e),i.y+=d(t);break;case"left":i.x+=f(t,e),i.y+=g(t,e);break;case"left-end":i.x+=f(t,e),i.y+=v(t,e);break;default:throw new Error("Invalid stacking direction: ".concat(n))}return i}var A=function(t){for(var e=t[0],n=e.x,r=e.y,o=e.width,i=e.height,a=c(n,r,o,i),s=1;s<t.length;s++){var u=t[s],l=Math.max(a.x+a.width,u.x+u.width),f=Math.max(a.y+a.height,u.y+u.height);a.x=Math.min(a.x,u.x),a.y=Math.min(a.y,u.y),a.width=l-a.x,a.height=f-a.y}return a},j=function(t,e,n){switch(n){case"x":return{width:t.width+e.width,height:Math.max(t.height,e.height)};case"y":return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)};default:throw new Error("Invalid combine direction: ".concat(n))}};function x(t){var e=_(t);return t.hitbox?c(e.x+t.hitbox.x,e.y+t.hitbox.y,t.hitbox.width,t.hitbox.height):c(e.x,e.y,t.width,t.height)}function P(t){return t.hitbox?t.hitbox:c(0,0,t.width,t.height)}function S(t){var e=_(t);return s(e.x+t.hitCirc.x,e.y+t.hitCirc.y,t.hitCirc.radius)}function k(t,e){for(var n,r=t.parent;r;)n=e-r.pos.x,r=r.parent;t.pos.x=n}function C(t,e){for(var n,r=t.parent;r;)n=e-r.pos.y,r=r.parent;t.pos.y=n}function _(t){for(var e=t.pos.x,n=t.pos.y;t.parent;)e+=(t=t.parent).pos.x,n+=t.pos.y;return a(e,n)}var R=function(t){return t.w?t.w:t.width},E=function(t){return t.h?t.h:t.height};function I(t){if(!t.children)return{width:0,height:0};var e=t.children[0],n={minX:e.pos.x,minY:e.pos.y,maxX:e.pos.x+R(e),maxY:e.pos.y+E(e)},r=t.children.reduce((function(t,e){return{minX:Math.min(t.minX,e.pos.x),minY:Math.min(t.minY,e.pos.y),maxX:Math.max(t.maxX,e.pos.x+R(e)),maxY:Math.max(t.maxY,e.pos.y+E(e))}}),n);return{width:r.maxX-r.minX,height:r.maxY-r.minY}}},32:(t,e,n)=>{"use strict";n.d(e,{TN:()=>r,QC:()=>o,d4:()=>i,uZ:()=>c,Xx:()=>a,nP:()=>u,bh:()=>l,Ht:()=>f,ex:()=>h,ge:()=>p,rA:()=>y,z4:()=>d,t:()=>v});var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+Math.floor((t-e+1)*Math.random())},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+(t-e)*Math.random()},i=function(t){return t[r(t.length-1)]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return Math.min(e,Math.max(t,n))},a=function(t){return 0===t?1:t/Math.abs(t)},s=function(t,e){return Math.floor(t*e)/e},u=function(t,e){return t*t+e*e},l={linear:function(t){return t},quadIn:function(t){return t*t},quadOut:function(t){return 1-this.quadIn(t-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return 1-this.cubicIn(1-t)},smoothStep:function(t){return t*t*(3-2*t)}},f=function(t,e){return!(s(t.x+t.width,1e4)<=s(e.x,1e4)||s(t.x,1e4)>=s(e.x+e.width,1e4)||s(t.y+t.height,1e4)<=s(e.y,1e4)||s(t.y,1e4)>=s(e.y+e.height,1e4))},h=function(t,e){return!(t.x+t.width<=e.x||t.x>=e.x+e.width||t.y+t.height<=e.y||t.y>=e.y+e.height)},p=function(t,e){var n=t.radius+e.radius,r=t.x+t.radius/2-(e.x+e.radius/2),o=t.y+t.radius/2-(e.y+e.radius/2);return r*r+o*o<=n*n},y=function(t,e){var n=e.x+e.radius-c(t.x,t.x+t.width,e.x+e.radius),r=e.y+e.radius-c(t.y,t.y+t.height,e.y+e.radius),o=n*n+r*r;return Math.round(o)<e.radius*e.radius},d=function(t,e){var n=Math.abs(Math.atan(t/e));return e>0&&t<0?-n:e<0&&t<0?Math.PI+n:e<0&&t>0?Math.PI-n:e>0&&t>0?n:0===t&&e>0?0:0===t&&e<0?Math.PI:0===e&&t>0?Math.PI/2:0===e&&t<0?-Math.PI/2:void 0},b={short:new RegExp("[0-9a-f]","g"),long:new RegExp("[0-9a-f]{2}","g")},v=function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000",e=4===t.length?"short":"long",n=b[e];return t.replace("#","").match(n).map((function(t){return parseInt(t.concat("short"===e?t:""),16)}))}(t).map((function(t){return t/255}))}},43:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var a=0;a<t.length;a++){var s=[].concat(t[a]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},921:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,o=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){a=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],c=o[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),u="/*# ".concat(s," */"),l=c.sources.map((function(t){return"/*# sourceURL=".concat(c.sourceRoot||"").concat(t," */")}));return[i].concat(l).concat([u]).join("\n")}return[i].join("\n")}},146:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>d});const u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=a(e);if(n){var o=a(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s(c(e=r.call(this,["change"],t())),"x",0),s(c(e),"y",0),window.addEventListener("resize",(function(){var n=t();Object.assign(c(e),n),e.emit("change",c(e))})),e}return u}(n(282).Z);var l=1100,f=720,h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p={viewport:new u((function(){var t=window.innerWidth,e=window.innerHeight,n=e>t;if(h)return{width:n?t:Math.max(.7*t,e),height:n?Math.max(.7*e,t):e};var r=n?f:l,o=n?l:f;return{width:Math.min(t,r),height:Math.min(e,o)}})),storageId:"jshdf190",worldWidth:1e3,worldHeight:window.innerHeight,gravity:1700,isMobile:h,scale:!1,get devicePixelRatio(){return Math.min(h?1.5:1,window.devicePixelRatio)},orientation:"portrait"};function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const d=(b={SDKStrat:null,StorageStrat:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,n;return e=t,(n=[{key:"get",value:function(){return localStorage.getItem(this.key)}},{key:"set",value:function(t){localStorage.setItem(this.key,t)}}])&&y(e.prototype,n),t}(),showAdOnRestart:0,showAdOnResume:0,prerollAd:!1},Object.assign(p,b));var b},661:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._1ABys8-8-_OHSD1WgNfrCA {\r\n    transition: opacity 0.25s linear;\r\n}","",{version:3,sources:["webpack://./src/entities/Player/style.css"],names:[],mappings:"AAAA;IACI,gCAAgC;AACpC",sourcesContent:[".ctrlBtn {\r\n    transition: opacity 0.25s linear;\r\n}"],sourceRoot:""}]),c.locals={ctrlBtn:"_1ABys8-8-_OHSD1WgNfrCA"};const a=c},1:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,'.kBnvNgbdaWjN1JUPehZVl {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr {\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n._1ggU-0hgNAcU2DVOMJWQLZ {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.lc0jbG1_QuFCjZS3-gers {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.fqfOAOxskjZ7CSpKGysjL {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n._2cCNjRBGCgpzkmR8i4dm_7 {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.eI9EvLtxVH2HaEV7XABKr {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n._1niWA6rwv5zoeCHQyf8yAz {\r\n    color: #e0c6e0;\r\n}\r\n._2chNllMXrIThEnxJvtvvow {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.Z2wV4tFi4P3HcME7xm0vV {\r\n    display: none;\r\n}\r\n._3Z4Q7kHHX6KEBKSpcobAx4 {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n',"",{version:3,sources:["webpack://./src/screens/Game/initUI/style.css"],names:[],mappings:"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,iBAAiB;IACjB,gCAAgC;AACpC;AACA;IAEI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,kBAAkB;IAClB,mBAAmB;IACnB,uDAAuD;AAC3D;AACA;IACI,sBAAsB;IACtB,cAAc;IACd,eAAe;IACf,mBAAmB;IACnB,iBAAiB;IACjB,gCAAgC;IAChC,kBAAkB;AACtB;AACA;IACI,UAAU;IACV,gCAAgC;AACpC;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;IACV,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;AAClB;AACA;IACI,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,aAAa;AACjB;AACA;IACI,6BAA6B;IAC7B,UAAU;IACV,aAAa;AACjB",sourcesContent:['.txt {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.tooltip {\r\n    composes: txt;\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n.tooltip:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n.timer {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.overlay {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n.time {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.timeVal {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.recTimeVal {\r\n    color: #e0c6e0;\r\n}\r\n.continue {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.dead {\r\n    display: none;\r\n}\r\n.blurOverlay {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n'],sourceRoot:""}]),c.locals={txt:"kBnvNgbdaWjN1JUPehZVl",tooltip:"_2lHPVtCDOcovWkCo9WuhBr kBnvNgbdaWjN1JUPehZVl",timer:"_1ggU-0hgNAcU2DVOMJWQLZ",hidden:"lc0jbG1_QuFCjZS3-gers",overlay:"fqfOAOxskjZ7CSpKGysjL",time:"_2cCNjRBGCgpzkmR8i4dm_7",timeVal:"eI9EvLtxVH2HaEV7XABKr",recTimeVal:"_1niWA6rwv5zoeCHQyf8yAz",continue:"_2chNllMXrIThEnxJvtvvow",dead:"Z2wV4tFi4P3HcME7xm0vV",blurOverlay:"_3Z4Q7kHHX6KEBKSpcobAx4"};const a=c},806:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._2dxZo1LuY05qYQk5cWBGAj {\r\n    transform: scale(-1, 1);\r\n}\r\n._3vdgYio4yaebTL7u79N62v {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n._22uFm83qwojCfg8hmv6Yql {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n._34sI9l4leBq2HWmVtVKMz5 {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n._33T254Eh2ILhm_nusDbjXu {\r\n    transition: opacity linear 0.250s;\r\n}\r\n._3H227XjaA5OSILiuNsLx2P:hover {\r\n    opacity: 1;\r\n}\r\n.aA9CxtPMIYcN-bXcV3l_i {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n._1B0xVLXoPlp_en5mM907su {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.UbeNJHa88KANlX_8vZHCY {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/Level/style.css"],names:[],mappings:"AAAA;IACI,uBAAuB;AAC3B;AACA;IACI,cAAc;IACd,cAAc;IACd,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;IACnB,UAAU;IACV,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,cAAc;AAClB;AACA;IACI,iCAAiC;IACjC,UAAU;AACd;AACA;IACI,iCAAiC;AACrC;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;IACtB,mBAAmB;AACvB;AACA;IACI,UAAU;IACV,+BAA+B;AACnC;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;AAC1B",sourcesContent:[".prevBtn {\r\n    transform: scale(-1, 1);\r\n}\r\n.infoTitle {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n.infoSub {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n.icon {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n.startBtn {\r\n    transition: opacity linear 0.250s;\r\n}\r\n.playBtn:hover {\r\n    opacity: 1;\r\n}\r\n.error {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.retry {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n"],sourceRoot:""}]),c.locals={prevBtn:"_2dxZo1LuY05qYQk5cWBGAj",infoTitle:"_3vdgYio4yaebTL7u79N62v",infoSub:"_22uFm83qwojCfg8hmv6Yql",icon:"_34sI9l4leBq2HWmVtVKMz5",startBtn:"_33T254Eh2ILhm_nusDbjXu",playBtn:"_3H227XjaA5OSILiuNsLx2P",error:"aA9CxtPMIYcN-bXcV3l_i",hidden:"_1B0xVLXoPlp_en5mM907su",retry:"UbeNJHa88KANlX_8vZHCY"};const a=c},673:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._2jdDmJpB0m2pgCwnQXkXp0 {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n._3jHrN0bUvMonJnX0kLE_H5 {\r\n    letter-spacing: 0;\r\n}","",{version:3,sources:["webpack://./src/screens/Loading/style.css"],names:[],mappings:"AAAA;IACI,eAAe;IACf,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IACnB,mBAAmB;AACvB;AACA;IACI,iBAAiB;AACrB",sourcesContent:[".txt {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n.info {\r\n    letter-spacing: 0;\r\n}"],sourceRoot:""}]),c.locals={txt:"_2jdDmJpB0m2pgCwnQXkXp0",info:"_3jHrN0bUvMonJnX0kLE_H5"};const a=c},731:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._35YmgIRdM1rGTagRZdiMWH {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n._5nb22jczr2iRQl6GzsxhG {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: uP3_D0Wi7V8GXgXu0IENq;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n._3lEQuyyX-I9YTwqE1mHS1o {\r\n    animation-delay: 0s;\r\n}\r\n._1h3b1j-Uhme2WBBixZS7-Z {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.bancwqSaH-c4kiW34bN3V {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes uP3_D0Wi7V8GXgXu0IENq {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.-P5MQXKbIsmfEcxD8zhki:hover, .-P5MQXKbIsmfEcxD8zhki:active, .-P5MQXKbIsmfEcxD8zhki:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}","",{version:3,sources:["webpack://./src/screens/ui/style.css"],names:[],mappings:"AAAA;IACI,6BAA6B;IAC7B,eAAe;IACf,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;IACnB,qCAAuB;IACvB,yBAAyB;IACzB,mCAAmC;AACvC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,iBAAiB;AACrB;AACA;IACI,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,KAAK,WAAW;IAChB,OAAO,WAAW;AACtB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;IAChB,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;AACrB;AACA;IACI,mCAAmC;AACvC",sourcesContent:[".imgBtn {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n.loadingDot {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: loading;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n.dotA {\r\n    animation-delay: 0s;\r\n}\r\n.dotB {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.dotC {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes loading {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.playBtn {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.playBtn:hover, .playBtn:active, .playBtn:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}"],sourceRoot:""}]),c.locals={imgBtn:"_35YmgIRdM1rGTagRZdiMWH",loadingDot:"_5nb22jczr2iRQl6GzsxhG",loading:"uP3_D0Wi7V8GXgXu0IENq",dotA:"_3lEQuyyX-I9YTwqE1mHS1o",dotB:"_1h3b1j-Uhme2WBBixZS7-Z",dotC:"bancwqSaH-c4kiW34bN3V",playBtn:"-P5MQXKbIsmfEcxD8zhki"};const a=c},562:(t,e,n)=>{t.exports=n.p+"assets/372dc952be4e3949ea766f9a3cc16e4c.cson"},284:(t,e,n)=>{t.exports=n.p+"assets/1c14c948068ce72052c2f5c76b83ac7a.mp3"},343:(t,e,n)=>{t.exports=n.p+"assets/5ea22db127bf58d7edacd4e27de15128.cson"},126:(t,e,n)=>{t.exports=n.p+"assets/8d5b69f4aa3fb86a73b9adac5fc89c68.png"},987:(t,e,n)=>{t.exports=n.p+"assets/48b0df5de1822d037c3e0da1056d5ea0.png"},524:(t,e,n)=>{t.exports=n.p+"assets/2a19667466be46c7b96d969d0f68f723.png"},399:(t,e,n)=>{t.exports=n.p+"assets/ec8b65d405f50357bf99224c24ad7e2e.png"},210:(t,e,n)=>{t.exports=n.p+"assets/3c92faa2a2f84dc5a4a752de743a7521.png"},976:(t,e,n)=>{t.exports=n.p+"assets/6d20d50c4325d374f53558afe76267a1.png"},229:(t,e,n)=>{t.exports=n.p+"assets/74d1202a0fc2f45361702ef9520989af.png"},73:(t,e,n)=>{t.exports=n.p+"assets/667305c7749f4cc363a07c4cedcc4e58.png"},315:(t,e,n)=>{t.exports=n.p+"assets/e864417a5cd342b1fe190beed41cd2f3.png"},224:(t,e,n)=>{t.exports=n.p+"assets/0ca9736dc31ac025b4a21bf7942a86fc.png"},102:(t,e,n)=>{t.exports=n.p+"assets/80b7b67277fabe5881e19db3ae8d119a.cson"},942:(t,e,n)=>{t.exports=n.p+"assets/629a0261aa38809f626b97c75c2cd20d.cson"},559:(t,e,n)=>{t.exports=n.p+"assets/2ab079ae3be2650c6b6ecc57f34ce603.cson"},867:(t,e,n)=>{t.exports=n.p+"assets/1db215397ce4431cbba8cbecd2c00849.cson"},671:(t,e,n)=>{t.exports=n.p+"assets/e7043f79214f629e8df091157cf1368c.cson"},799:(t,e,n)=>{t.exports=n.p+"assets/3e6ada5a8b0bc5f97b91808d80f07e0a.cson"},235:(t,e,n)=>{t.exports=n.p+"assets/237fdf5291631726096a3395d7de5bef.cson"},818:(t,e,n)=>{t.exports=n.p+"assets/1b8fc2b7508e99db2348de7c84f498cb.cson"},508:(t,e,n)=>{t.exports=n.p+"assets/98d1121390135652ce1243461363d583.cson"},579:(t,e,n)=>{t.exports=n.p+"assets/c7e44ba8b1dec2b016af516370db1071.cson"},644:(t,e,n)=>{t.exports=n.p+"assets/f728efa8df13fb51278b6bf604a4e975.cson"},994:(t,e,n)=>{"use strict";var r,o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function c(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},r=[],o=0;o<t.length;o++){var a=t[o],s=e.base?a[0]+e.base:a[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var f=c(l),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(i[f].references++,i[f].updater(h)):i.push({identifier:l,updater:d(h,e),references:1}),r.push(l)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var c=o(t.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var i=document.createTextNode(o),c=t.childNodes;c[e]&&t.removeChild(c[e]),c.length?t.insertBefore(i,c[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,y=0;function d(t,e){var n,r,o;if(e.singleton){var i=y++;n=p||(p=s(e)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(e),r=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=c(n[r]);i[o].references--}for(var s=a(t,e),u=0;u<n.length;u++){var l=c(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=s}}}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(571);function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const r=function(n){var r,o,i=n.mainUpdateFn,c=void 0===i?function(){}:i,a=n.renderer,s=n.step,u=void 0===s?100:s,l=(r=[30,60].map((function(t){return 1e3/t})),o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(r,o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=l[0],h=l[1],p=h/1e3,y=0,d=0,b=1,v=!1;return requestAnimationFrame((function e(n){var r=b*Math.min(n-y,u),o=n-d,i=n/1e3;if(v)return requestAnimationFrame(e);for(;r>=h;)a.scene.update?a.scene.update(p,i):t.Z.updateRecursively(a.scene,p,i,a.scene),c(p,i),r-=h;o>=f?(a.renderRecursively(),d=n-(o-f)):d=n-o,y=n-r,requestAnimationFrame(e)})),{pause:function(){v=!0},resume:function(){v=!1},setSpeed:function(t){b=t},get meta(){return{elapsed:y/1e3}}}};var o=n(674),i="col-rects",c=Math.PI/4,a=3*Math.PI/4,s="obj-layer",u="offline";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=void 0!==AudioContext&&null!==AudioContext;const b=d?function(){var t=new AudioContext,e=function(){function e(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.loop,c=void 0!==i&&i,a=o.volume,s=void 0===a?1:a,u=o.pan,f=void 0===u?0:u,h=o.speed,p=void 0===h?1:h;l(this,e),this.buffer=n,this.panNode=t.createStereoPanner(),this.volumeNode=t.createGain(),this.panNode.pan.value=f,this.volumeNode.gain.value=s,this._speed=p,this._loop=c,this.playedFrom=0,this.offset=0,this.playTill=n.duration,this.lastPlayedAt=0,this.playing=!1,this.onEnded=function(){return r.playing=!1},e.onCreated(this)}return h(e,null,[{key:"getPaused",value:function(){return this._on}},{key:"off",value:function(){this._on=!1}},{key:"on",value:function(){this._on=!0}},{key:"onCreated",value:function(){}},{key:"onDestroyed",value:function(){}},{key:"destroy",value:function(t){e.onDestroyed(t)}}]),h(e,[{key:"pause",value:function(){if(this.playing){var e=t.currentTime-this.lastPlayedAt,n=this.offset+e,r=this.playTill-this.playedFrom;this.offset=this.loop?n%r:Math.min(n,r),this._stop()}}},{key:"resume",value:function(){if(!this.playing&&e._on){var t=this.playedFrom+this.offset,n=this.playTill-t;this._play(t,n)}}},{key:"play",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(!this.playing&&e._on){o&&(this.volume=o);var i=r||this.buffer.duration;this.playedFrom=n,this.offset=0,this.playTill=n+i,this.lastPlayedAt=t.currentTime,this._play(n,i)}}},{key:"_stop",value:function(){var t=this.sourceNode;t&&t.stop(0)}},{key:"_play",value:function(e,n){var r,o=this.buffer,i=this.panNode,c=this.volumeNode,a=this._loop,s=this._speed,u=t.createBufferSource(),l=(r=u,function(t,e,n){if(r.loop)return r.loopStart=e,r.loopEnd=e+n,r.start(t,e);r.start(t,e,n)});this.sourceNode=u,this.lastPlayedAt=t.currentTime,u.buffer=o,u.loop=a,u.playbackRate.value=s,u.connect(i),i.connect(c),c.connect(t.destination),l(t.currentTime,e,n),u.onended=this.onEnded,this.playing=!0}},{key:"speed",set:function(t){this._speed=t,this.sourceNode&&this.sourceNode.playbackRate.setValueAtTime(t,0)}},{key:"volume",set:function(t){this.volumeNode.gain.setValueAtTime(t,0)}},{key:"pan",set:function(t){this.panNode.pan.setValueAtTime(t,0)},get:function(){this.panNode.pan.value}}]),e}();return p(e,"_on",!0),p(e,"loadResource",(function(e){return new Promise((function(n,r){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(e){return function(e){return new Promise((function(n,r){t.decodeAudioData(e,n,r)}))}(e)})).then((function(t){return n(t)})).catch((function(){return r({message:u})}))}))})),e}():(m=v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"off",value:function(){}},{key:"on",value:function(){}},{key:"destroy",value:function(){}}],(n=[{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"play",value:function(){}}])&&y(e.prototype,n),r&&y(e,r),t}(),O=function(t){return Promise.resolve(t)},(w="loadResource")in(g=v)?Object.defineProperty(g,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[w]=O,m);var v,m,g,w,O;function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const x=function(){function t(e){var n=this,r=e.renderer,i=e.assetsCache,c=e.screenFactories,a=e.activeScreen;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,"_activeScreen",null),j(this,"_sounds",[]),j(this,"paused",!1),j(this,"pausedSounds",[]),this._assetsCache=i,this.renderer=r,Object.keys(c).forEach((function(t){var e=c[t];n[t]=e(n),n[t].name=t})),o.Z.injectAssetsCache(i),b.onCreated=function(t){n._sounds.push(t)},b.onDestroyed=function(t){n._sounds=n._sounds.filter((function(e){return e!==t}))},a&&this.switchScreen(a)}var e,n;return e=t,(n=[{key:"switchScreen",value:function(t){var e;this._activeScreen&&this._activeScreen.onExit(),this._activeScreen=this[t],this.renderer.scene=this._activeScreen,this._activeScreen.background&&this.renderer.changeBackground(this._activeScreen.background);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this._activeScreen).onEnter.apply(e,r)}},{key:"disposeScreen",value:function(t){this[t.name]=null}},{key:"_update",value:function(t,e){this._activeScreen.update&&this._activeScreen.update(t,e)}},{key:"start",value:function(){this.loopControls=r({mainUpdateFn:function(){},renderer:this.renderer})}},{key:"stopSounds",value:function(){this._sounds.forEach((function(t){t.pause()}))}},{key:"pauseSounds",value:function(){this.pausedSounds=this._sounds.filter((function(t){return t.playing})),this._sounds.forEach((function(t){t.pause()}))}},{key:"turnOffSound",value:function(){this.stopSounds(),b.off()}},{key:"turnOnSound",value:function(){b.on()}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.loopControls.pause(),this.pauseSounds())}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this.loopControls.resume(),this.pausedSounds.forEach((function(t){t.resume()})))}},{key:"reset",value:function(){this.paused=!1,this.loopControls.resume(),this.pausedSounds=null}},{key:"assetsCache",get:function(){return this._assetsCache}}])&&A(e.prototype,n),t}();function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}const C=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(P(this,t),this.domNode=e||r.querySelector(n),!this.domNode)throw new Error("one or more invalid constructor parameters");if(this.domNode.getBoundingClientRect&&(this.x=0,this.y=0,!e)){var o=this.domNode.getBoundingClientRect(),i=o.width,c=o.height;this.width=i,this.height=c}}return k(t,null,[{key:"query",value:function(e,n){return new t(null,e,n)}},{key:"create",value:function(e){return new t(document.createElement(e))}},{key:"bounds",value:function(t){return t.domNode.getBoundingClientRect()}}]),k(t,[{key:"get",value:function(e){return t.query(e,this.domNode)}},{key:"hide",value:function(){this.domNode.style.opacity=0}},{key:"show",value:function(){this.domNode.style.opacity=1}},{key:"clear",value:function(){this.content=""}},{key:"on",value:function(t,e){this.domNode.addEventListener(t,e)}},{key:"off",value:function(t,e){this.domNode.removeEventListener(t,e)}},{key:"add",value:function(t){return this.domNode.appendChild(t.domNode||t),this}},{key:"classList",get:function(){return this.domNode.classList}},{key:"pos",set:function(t){var e=t.x,n=t.y;e&&(this.x=e,this.domNode.style.left="".concat(e,"px")),n&&(this.y=n,this.domNode.style.top="".concat(n,"px"))}},{key:"content",set:function(t){this.domNode.innerHTML=t}}]),t}();var _=n(915),R=n(379),E=n(146),I=n(529),B="canvas",T="webgl";function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Y=function(){function t(e){var n=e.cnvQry,r=e.scene,o=e.viewport,i=e.background,c=void 0===i?"#ffffff":i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"api",B);var a=document.querySelector(n);this.canvas=a,this.scene=r,this.ctx=a.getContext("2d"),this.changeBackground(c),this.resize(o),o.on("change",this.resize.bind(this))}var e,n;return e=t,(n=[{key:"changeBackground",value:function(t){this.canvas.style.background=t}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.canvas.setAttribute("width",e*E.Z.devicePixelRatio),this.canvas.setAttribute("height",n*E.Z.devicePixelRatio),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px")}},{key:"setTexatlas",value:function(t,e){this.img=t,this.meta=e}},{key:"render",value:function(t){switch(this.ctx.translate(t.smooth?t.pos.x:Math.round(t.pos.x),t.smooth?t.pos.y:Math.round(t.pos.y)),t.initialRotation&&(this.ctx.rotate(t.initialRotation),this.ctx.translate(t.initialPivotX,0)),t.anchor&&this.ctx.translate(t.anchor.x,t.anchor.y),t.rotation&&this.ctx.rotate(t.rotation),t.anchor&&this.ctx.translate(-t.anchor.x,-t.anchor.y),t.pivot&&this.ctx.translate(t.pivot.x,t.pivot.y),t.scale&&this.ctx.scale(t.scale.x,t.scale.y),t.type){case _.ey:var e=this.meta[t.frame];this.ctx.drawImage(this.img,e.x,e.y,t.w,t.h,0,0,t.w,t.h);break;case _.hY:this.ctx.drawImage(t.img,0,0);break;case _.JA:t.fill&&(this.ctx.fillStyle=t.fill,this.ctx.fillRect(0,0,t.width,t.height)),t.stroke&&(this.ctx.strokeStyle=t.stroke,this.ctx.lineWidth=t.strokeWidth,this.ctx.strokeRect(0,0,t.width,t.height))}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),t.alpha&&(this.ctx.globalAlpha=t.alpha),t.blendMode&&(this.ctx.globalCompositeOperation=t.blendMode),this.render(t),t.debug){var e=t.hitbox||(0,I.mn)(t);this.ctx.save(),this.render(new R.Z(M(M({pos:M({},e)},e),{},{stroke:"red",strokeWidth:1}))),this.ctx.restore()}if(t.children)for(var n=0,r=t.children.length;n<r;n++)this.renderRecursively(t.children[n]);this.ctx.restore()}}}])&&X(e.prototype,n),t}(),N=function(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Couldn't compile shader: ".concat(t.getShaderInfoLog(r)));return r};function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),t}var V=function(){function t(){L(this,t),this.tMat=t.create(),this.sMat=t.create(),this.rMat=t.create()}return z(t,null,[{key:"create",value:function(){return[1,0,0,0,1,0,0,0,1]}},{key:"cast",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}}]),z(t,[{key:"scaled",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.sMat;return n[0]=t,n[4]=e,n}},{key:"rotated",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.rMat;return r[0]=n,r[1]=e,r[3]=-e,r[4]=n,r}},{key:"translated",value:function(t,e){var n=this.tMat;return n[6]=t,n[7]=e,n}}]),t}();const q=function(){function t(){var e;L(this,t),e=[],"vec"in this?Object.defineProperty(this,"vec",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.vec=e,this.iMat=new V,this.temp=this.create()}return z(t,[{key:"create",value:function(){return V.create()}},{key:"identity",value:function(t){return V.cast(t)}},{key:"multiply",value:function(t,e){var n=this.temp;n[0]=t[0]*e[0]+t[1]*e[3]+t[2]*e[6],n[1]=t[0]*e[1]+t[1]*e[4]+t[2]*e[7],n[2]=t[0]*e[2]+t[1]*e[5]+t[2]*e[8],n[3]=t[3]*e[0]+t[4]*e[3]+t[5]*e[6],n[4]=t[3]*e[1]+t[4]*e[4]+t[5]*e[7],n[5]=t[3]*e[2]+t[4]*e[5]+t[5]*e[8],n[6]=t[6]*e[0]+t[7]*e[3]+t[8]*e[6],n[7]=t[6]*e[1]+t[7]*e[4]+t[8]*e[7],n[8]=t[6]*e[2]+t[7]*e[5]+t[8]*e[8];for(var r=0;r<9;r++)e[r]=n[r]}},{key:"rotate",value:function(t,e){!function(t,e,n){var r=e[0],o=e[1],i=e[2],c=e[3],a=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);t[0]=p*r+h*c,t[1]=p*o+h*a,t[2]=p*i+h*s,t[3]=p*c-h*r,t[4]=p*a-h*o,t[5]=p*s-h*i,t[6]=u,t[7]=l,t[8]=f}(t,t,e)}},{key:"scale",value:function(t,e,n){this.vec[0]=e,this.vec[1]=n,function(t,e,n){var r=n[0],o=n[1];t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(t,t,this.vec)}},{key:"translate",value:function(t,e,n){this.vec[0]=e,this.vec[1]=n,function(t,e,n){var r=e[0],o=e[1],i=e[2],c=e[3],a=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=n[0],p=n[1];t[0]=r,t[1]=o,t[2]=i,t[3]=c,t[4]=a,t[5]=s,t[6]=h*r+p*c+u,t[7]=h*o+p*a+l,t[8]=h*i+p*s+f}(t,t,this.vec)}}]),t}();function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const J=function(){function t(e){var n=e.image,r=e.cnvQry,o=e.viewport,i=e.scene,c=e.clearColor,a=void 0===c?[0,0,0,0]:c,s=e.background,u=void 0===s?"#000000":s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,"api",T),W(this,"defBlend","source-over"),W(this,"defTint",[0,0,0,0]);var l=function(t){var e=document.querySelector(t).getContext("webgl2");if(!e)throw new Error("Webgl support not available");return e}(r),f=function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error("Couldnt link shaders: ".concat(t.getProgramInfoLog(r)));return r}(l,N(l,"   #version 300 es\n\n    in vec2 vert_pos;\n    \n    uniform mat3 mat;\n    uniform mat3 tex_mat;\n\n    out vec2 tex_coords;\n\n    void main() {\n        \n        tex_coords = (tex_mat * vec3(vert_pos, 1)).xy;\n        \n        gl_Position = vec4((mat * vec3(vert_pos, 1)).xy, 0, 1);\n    }\n",l.VERTEX_SHADER),N(l,"   #version 300 es\n    precision highp float;\n    \n    in vec2 tex_coords;\n    \n    uniform sampler2D tex_unit;\n    uniform bool overlay;\n    uniform vec3 overlay_col;\n    uniform vec4 g_tint;\n    uniform vec4 tint;\n    uniform float alpha;\n\n    out vec4 out_color;\n    void main() {\n        vec4 px_col = texture(tex_unit, tex_coords);\n        if (overlay) {\n            out_color = vec4(overlay_col, px_col.a * alpha);\n            return;\n        } \n        out_color = vec4((px_col + g_tint + tint).rgb, px_col.a * alpha);\n    }\n",l.FRAGMENT_SHADER));this.canvas=document.querySelector(r),this.image=n,this.gl=l,this.program=f;var h,p=l.getAttribLocation(f,"vert_pos"),y=l.createBuffer();this.uMat=l.getUniformLocation(f,"mat"),this.uTexMat=l.getUniformLocation(f,"tex_mat"),this.uOverlay=l.getUniformLocation(f,"overlay"),this.uOverlayCol=l.getUniformLocation(f,"overlay_col"),this.uTint=l.getUniformLocation(f,"tint"),this.uGTint=l.getUniformLocation(f,"g_tint"),this.uAlpha=l.getUniformLocation(f,"alpha"),this.matrixUtil=new q,l.bindBuffer(l.ARRAY_BUFFER,y),l.bufferData(l.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),l.STATIC_DRAW),l.enableVertexAttribArray(p),l.vertexAttribPointer(p,2,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,null),l.useProgram(f),this.gl.enable(this.gl.BLEND),this.overlay=!1,this.alpha=1,this.gTint=this.defTint,this.blendMode=this.defBlend,this.overlay=!1,this.clearColor=a,this.scene=i,this.changeBackground(u),o.on("change",this.resize.bind(this)),Object.assign(this,((h={mStack:[]}).mStack.push(V.create()),h.curMatIdx=0,h.curMat=h.mStack[0],h.firstMat=h.mStack[0],h.getCurMat=function(){return this.curMat},h.save=function(){this.curMatIdx+=1,this.mStack[this.curMatIdx]=this.mStack[this.curMatIdx]||V.create(),this.curMat=this.mStack[this.curMatIdx];for(var t=this.mStack[this.curMatIdx-1],e=0;e<9;e++)this.curMat[e]=t[e]},h.restore=function(){if(0===this.curMatIdx)throw new Error("couldn't restore state: no save point could be found");this.curMatIdx-=1,this.curMat=this.mStack[this.curMatIdx]},h)),this.resize(o)}var e,n;return e=t,(n=[{key:"setTexatlas",value:function(t,e){var n=this.gl,r=this.program,o=n.createTexture(),i=n.getUniformLocation(r,"tex_unit");this.meta=e,this.image=t,n.activeTexture(n.TEXTURE0+0),n.uniform1i(i,0),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)}},{key:"translate",value:function(t,e){this.matrixUtil.translate(this.getCurMat(),t,e)}},{key:"rotate",value:function(t){this.matrixUtil.rotate(this.getCurMat(),t)}},{key:"scale",value:function(t,e){this.matrixUtil.scale(this.getCurMat(),t,e)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"changeBackground",value:function(t){t&&(this.canvas.style.background=t)}},{key:"resize",value:function(t){var e=t.width,n=t.height,r=Math.round(e*E.Z.devicePixelRatio),o=Math.round(n*E.Z.devicePixelRatio);this.canvas.setAttribute("width",r),this.canvas.setAttribute("height",o),this.gl.viewport(0,0,r,o),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.matrixUtil.identity(this.firstMat),this.matrixUtil.scale(this.firstMat,1,-1),this.matrixUtil.translate(this.firstMat,-1,-1),this.matrixUtil.scale(this.firstMat,2/r,2/o)}},{key:"render",value:function(t){var e=t.rotation,n=t.anchor;if(this.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.initialRotation&&(this.rotate(t.initialRotation),this.translate(t.initialPivotX,0)),e&&(n&&this.translate(n.x,n.y),this.rotate(e),n&&this.translate(-n.x,-n.y)),t.scale&&this.scale(t.scale.x,t.scale.y),t.blendMode,t.frame){var r=this.meta[t.frame],o=r.x,i=r.y,c=t.w,a=t.h,s=this.matrixUtil,u=this.uMat,l=this.uTexMat,f=this.image,h=this.gl;this.scale(c,a),t.texMatFrame!==t.frame&&(t.texMat=s.create(),t.texMatFrame=t.frame,s.translate(t.texMat,o/f.width,i/f.height),s.scale(t.texMat,c/f.width,a/f.height)),h.uniformMatrix3fv(u,!1,this.getCurMat()),h.uniformMatrix3fv(l,!1,t.texMat),h.drawArrays(h.TRIANGLES,0,6),this.scale(1/c,1/a)}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.clear(),this.save(),t.blendMode&&(this.blendMode=t.blendMode),t.alpha&&(this.alpha=t.alpha),t.overlay&&(this.overlay=t.overlay),t.tint&&(this.tint=t.tint),this.render(t),t.children)for(var e=0,n=t.children.length;e<n;e++)this.renderRecursively(t.children[e]);t.overlay&&(this.overlay=!1),t.tint&&(this.tint=this.defTint),t.alpha&&(this.alpha=1),t.blendMode&&(this.blendMode=this.defBlend),this.restore()}}},{key:"clearColor",set:function(t){var e;(e=this.gl).clearColor.apply(e,function(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}},{key:"alpha",set:function(t){this.gl.uniform1f(this.uAlpha,t)}},{key:"gTint",set:function(t){this.gl.uniform4fv(this.uGTint,t)}},{key:"tint",set:function(t){this.gl.uniform4fv(this.uTint,t)}},{key:"blendMode",set:function(t){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"overlay",set:function(t){this.gl.uniform1i(this.uOverlay,t?1:0),t&&this.gl.uniform3fv(this.uOverlayCol,t)}}])&&H(e.prototype,n),t}();var G,Q=n(282);function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $=b.loadResource,tt=Object.freeze({SOUND:"SOUND",IMAGE:"IMAGE",DATA:"DATA"}),et=(K(G={},tt.SOUND,$),K(G,tt.IMAGE,(function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=function(){return n({message:u})}}))})),K(G,tt.DATA,(function(t){return new Promise((function(e,n){fetch(t).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n({message:u})}))}))})),G);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?ct(t):e}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(r);if(o){var n=at(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return it(this,t)});function c(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r={},(n="assets")in(e=ct(t=i.call(this,["prog","prog-end","load","error"])))?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=c,(n=[{key:"load",value:function(t){var e=this,n=t.length,r=Promise.resolve();t.reduce((function(t,r,o){return t.then((function(){var t="string"==typeof r?r:r.url;return function(t){var e=function(t){return t.match(/.(jpe?g)|(png)$/)?tt.IMAGE:t.match(/.(mp3)|(wav)|(ogg)$/)?tt.SOUND:t.match(/.(cson|bson)$/)?tt.DATA:void 0}(t);return(0,et[e])(t)}(t).then((function(i){e.assets[t]=i,e.emit("prog",(o+1)/n,r.msg)}))}))}),r).then((function(){e.emit("prog-end"),e.emit("load"),e.off("prog")})).catch((function(t){e.emit("error",t)}))}},{key:"unload",value:function(t){this.assets[t]=null}},{key:"get",value:function(t){return this.assets[t]}}])&&rt(e.prototype,n),c}(Q.Z);var ut=n(739);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t,e){var n=Number(t);if(0!==n&&!n)throw new Error("Attempting to set invalid ".concat(e,": ").concat(t));return n};const bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yt(r);if(o){var n=yt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pt(this,t)});function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,["orb-update","music-update","sound-update"])).strat=t;var n=t.get();return e.data=n?JSON.parse(n):{curLevel:1,orbCount:6,hiscores:{},music:!0,sound:!0},e}return e=c,(n=[{key:"setNum",value:function(t,e){var n=dt(e,t);return this.data[t]=n,this.save(this.data),n}},{key:"setCurLevel",value:function(t){this.setNum("curLevel",t)}},{key:"setOrbCount",value:function(t){var e=this.setNum("orbCount",t);this.emit("orb-update",e)}},{key:"setHiscore",value:function(t,e){var n=dt(e,"hiscore");this.data.hiscores[String(t)]=n,this.save(this.data)}},{key:"getCurLevel",value:function(){return this.data.curLevel}},{key:"getOrbCount",value:function(){return this.data.orbCount}},{key:"getHiscore",value:function(t){return this.data.hiscores[String(t)]}},{key:"getMusic",value:function(){return this.data.music}},{key:"setMusic",value:function(t){this.data.music=t,this.emit("music-update",this.data.music),this.save(this.data)}},{key:"getSound",value:function(){return this.data.sound}},{key:"setSound",value:function(t){this.data.sound=t,this.emit("sound-update",this.data.sound),this.save(this.data)}},{key:"save",value:function(t){this.strat.set(JSON.stringify(t))}}])&&ft(e.prototype,n),c}(Q.Z);function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),mt(this,"periodBetweenAds",45e3),mt(this,"adLastPlayedAt",Date.now()-45e3),this.strat=e}var e,n;return e=t,(n=[{key:"rvaSupported",value:function(){return!!this.strat&&this.strat.rva}},{key:"setLoadProg",value:function(t){this.strat&&this.strat.setLoadProg(t)}},{key:"signalLoad",value:function(){return this.strat?this.strat.signalLoad():Promise.resolve()}},{key:"playRva",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.playRva()):Promise.reject()}},{key:"canPlay",value:function(){return Date.now()-this.adLastPlayedAt<this.periodBetweenAds}},{key:"playIntstAd",value:function(){return!this.strat||this.canPlay()?(console.log("Ad throttled: interstitial ad frequency exceeded"),Promise.reject()):(this.adLastPlayedAt=Date.now(),this.strat.playIntstAd())}},{key:"prerollAd",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.prerollAd()):Promise.reject()}},{key:"setOnPause",value:function(t){this.strat&&this.strat.setOnPause(t)}},{key:"setOnResume",value:function(t){this.strat&&this.strat.setOnResume(t)}}])&&vt(e.prototype,n),t}();var wt=n(942),Ot=n.n(wt),At=n(559),jt=n.n(At),xt=n(867),Pt=n.n(xt),St=n(671),kt=n.n(St),Ct=n(799),_t=n.n(Ct),Rt=n(235),Et=n.n(Rt),It=n(818),Bt=n.n(It),Tt=n(508),Dt=n.n(Tt),Mt=n(579),Xt=n.n(Mt);const Zt=[{id:Ot(),music:"music1"},{id:jt(),music:""},{id:Pt(),music:""},{id:kt(),music:"music1"},{id:_t(),music:""},{id:Et(),music:"music1"},{id:Bt(),music:""},{id:Dt(),music:""},{id:Xt(),music:"music1"}];var Yt="LOADING",Nt="MAIN_MENU",Lt="LEVEL",Ut="GAME",zt=n(994),Vt=n.n(zt),qt=n(673);Vt()(qt.Z,{insert:"head",singleton:!1});const Ft=qt.Z.locals||{};var Ht={width:150,height:25},Wt="info",Jt="prog-bar",Gt="prog-ind";function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t,e){return!e||"object"!==Qt(e)&&"function"!=typeof e?ee(t):e}function ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(r);if(o){var n=ne(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return te(this,t)});function c(t){var e,n,r,o,a=t.game,s=t.assets,u=t.uiRoot,l=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),o="#000000",(r="background")in(n=ee(e=i.call(this)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.game=a,e.assets=s,e.uiRoot=u,e.sdk=l,e}return e=c,(n=[{key:"onEnter",value:function(){var t=this,e=this.game.assetsCache;e.load(this.assets);var n=function(t){var e;t.content=(e=Wt,"\n        ".concat(function(t,e,n,r){return'\n        <div id="'.concat("prog-bar",'" style="width: ').concat(t,"px; height: ").concat(e,'px; background: #ffe6d5; z-index: 99999;">\n        </div>\n        <div id="').concat("prog-ind",'" style="width: 4px; height: ').concat(e,'px; background: tomato; z-index: 100000;">\n        </div>\n    ')}(Ht.width,Ht.height),'\n        <div id="').concat(e,'" class="').concat(Ft.txt," ").concat(Ft.info,'">loading</div>\n        <div id="').concat(e,'" class="').concat(Ft.txt," ").concat(Ft.info,'"></div>\n    '));var n=t.get("#".concat(Jt)),r=t.get("#".concat(Gt)),o=t.get("#".concat(Wt)),i=function(t){n.pos=(0,I.qj)(t,Ht,"center","center"),r.pos=(0,I.qj)(t,Ht,"center","center"),o.pos=(0,I.EJ)(n,C.bounds(o),"bottom",0,20)};return E.Z.viewport.on("change",i),i(E.Z.viewport),{teardown:function(){E.Z.viewport.off("change",i),t.clear()},onProg:function(t,e){r.domNode.style.width="".concat(Math.round(t*Ht.width),"px"),o.content="".concat(Math.round(100*t),"%"),i(E.Z.viewport)},onError:function(t){console.log(t),o.content=t&&t.message===u?"Error: something went wrong":"Error: Unsupported Device",o.domNode.style.color="#d34545",i(E.Z.viewport)},onLoad:function(){t.clear()}}}(this.uiRoot),r=n.teardown,o=n.onProg,i=n.onError,c=n.onLoad;this.teardown=r,this.onProg=o,e.once("load",(function(){c();var e=function(){t.game.switchScreen(Nt)};t.sdk.signalLoad().then(e).catch(e)})),e.on("prog",(function(e){o(e),t.sdk.setLoadProg(Math.round(100*e))})),e.once("error",i)}},{key:"onExit",value:function(){this.game.disposeScreen(this),this.teardown(),this.game.assetsCache.off("prog",this.onProg),this.game.assetsCache.off("error")}}])&&Kt(e.prototype,n),c}(t.Z);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?se(t):e}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ue(r);if(o){var n=ue(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ae(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this)).logo=new ut.Z({frame:"logo"}),t.rock1=new ut.Z({frame:"rock1"}),t.rock2=new ut.Z({frame:"rock2"}),t.ball=new ut.Z({frame:"ball"}),t.ball.pos.x=88,t.ball.pos.y=80,t.rock1.pos.x=200,t.rock2.pos.y+=t.rock2.h/2,t.ball.anchor={x:.75*t.ball.w,y:t.ball.h/2},t.ball.rotation=0,t.rock2.anchor={x:.75*t.rock2.w,y:t.rock2.h/2},t.rock2.rotation=-Math.PI/12,t.rock1.anchor={x:t.rock1.w/2,y:t.rock1.h/2},t.rock1.rotation=Math.PI/6,t.add(t.rock1),t.add(t.rock2),t.add(t.ball),t.add(t.logo),t.alpha=.01,Object.assign(se(t),(0,I.vD)(se(t))),t}return e=c,(n=[{key:"update",value:function(t){this.ball.rotation+=t*Math.PI/12,this.alpha=Math.min(1,this.alpha+.5*t)}}])&&ie(e.prototype,n),c}(t.Z);var fe=n(731);Vt()(fe.Z,{insert:"head",singleton:!1});const he=fe.Z.locals||{},pe=function(t,e){return'\n        <div id="'.concat(t,'" class="').concat(he.playBtn,'">').concat(e,"</div>\n    ")};var ye="play-btn";function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?we(t):e}function we(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Oe(r);if(o){var n=Oe(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ge(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Ae(we(e=i.call(this)),"background","#000000"),e.game=n,e.uiRoot=r,e.sdk=o,n.assetsCache.once("load",(function(){var t=E.Z.viewport;e.gameTitle=new le,e.realign=function(t){var n=E.Z.devicePixelRatio;e.gameTitle.pos=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){Ae(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,I.qj)({x:0,y:0,width:t.width*n,height:t.height*n},{width:e.gameTitle.width,height:e.gameTitle.height},"center","top",15,80))},t.on("change",e.realign),e.realign(t),e.add(e.gameTitle)})),e}return e=c,(n=[{key:"onEnter",value:function(){var t=this.uiRoot,e=this.game,n=this.sdk;this.teardownUI=function(t){var e=t.uiRoot,n=t.onPlay;e.content=pe(ye,"PLAY");var r=e.get("#".concat(ye)),o=function(t){r.pos=(0,I.qj)(t,r,"center","center",0,0)};return r.on("click",n),E.Z.viewport.on("change",o),o(E.Z.viewport),function(){r.off("click",n),e.clear(),E.Z.viewport.off("change",o)}}({uiRoot:t,onPlay:function(){var r=function(){return e.switchScreen(Lt,!0)};if(t.clear(),!E.Z.prerollAd)return r();n.prerollAd().then(r).catch(r)}})}},{key:"onExit",value:function(){this.teardownUI(),E.Z.viewport.off("change",this.realign)}}])&&ve(e.prototype,n),c}(t.Z);var xe=n(32),Pe=n(232);function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(n),!0).forEach((function(e){De(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e,n){return(Re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?Be(t):e}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Te(r);if(o){var n=Te(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ie(this,t)});function c(t){var e,n=t.entYOffset,r=void 0===n?0:n,o=t.tiles,a=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["entYOffset","tiles"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),De(Be(e=i.call(this,Ce({},a))),"_layoutTiles",(function(){})),De(Be(e),"_tiles",null),e.entYOffset=r,e.tiles=o,e.prevPos={x:0,y:0},e}return e=c,(n=[{key:"setWorld",value:function(t){var e=this,n=t.worldWidth,r=t.worldHeight,o=Math.min(r-this.baseline,(this.bounds.height-this.subject.height)/2),i=this.baseline-this.subject.height/2,c=(0,xe.uZ)(0,r-this.bounds.height,i-this.bounds.height/2)*this.pF+this.bounds.height-o,a=o*(1-1/this.z);this.world.width=n,this.world.height=r,this.tiles.forEach((function(t){var n=Ce({},t);n.pos={x:t.pos.x,y:c+a-(e.baseline-t.pos.y)+e.entYOffset},e.add(n)}))}},{key:"layoutTiles",value:function(t){var e=this,n=t.width,r=void 0===n?this.world.width:n,o=t.height,i=void 0===o?this.world.height:o,c=t.tiles,a=void 0===c?this.tiles:c;if(i===this.world.height&&a===this.tiles)return this.world.width=r;a!==this.tiles&&(this.tiles=a),this.viewport.off("change",this._layoutTiles),this._layoutTiles=function(){e.children=[],e.setWorld({worldWidth:r,worldHeight:i})},this.viewport.on("change",this._layoutTiles),this._layoutTiles()}},{key:"onRemove",value:function(){Re(Te(c.prototype),"onRemove",this).call(this),this.viewport.off("change",this._layoutTiles)}},{key:"tiles",get:function(){return this._tiles},set:function(t){t&&(this._tiles=t,this.baseline=t.reduce((function(t,e){return Math.max(t,e.pos.y+e.height)}),0))}}])&&_e(e.prototype,n),c}(Pe.Z);function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ze=function(){function t(e){var n=e.resource,r=e.start,o=e.duration,i=e.size,c=void 0===i?1:i,a=e.loop,s=e.volume,u=e.pan,l=e.speed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=n,this.start=r,this.duration=o,this.instances=Array(c).fill(new b(n,{loop:a,volume:s,pan:u,speed:l}))}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=function(t){for(var e=t.length-1;e>-1;e--)if(!t[e].playing)return t[e]}(this.instances);if(e)e.play(this.start,this.duration,t);else{var n=new b(this.resource);this.instances.push(n),n.play(this.start,this.duration,t)}}},{key:"pause",value:function(){this.instances.forEach((function(t){t.pause()}))}},{key:"resume",value:function(){this.instances.forEach((function(t){t.resume()}))}}])&&Xe(e.prototype,n),t}();function Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mutations=e,this.accessIdx=0}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=this.mutations,n=this.accessIdx;e[n].play(t),this.accessIdx=(n+1)%e.length}},{key:"pause",value:function(){this.mutations((function(t){t.pause()}))}},{key:"resume",value:function(){this.mutations((function(t){t.resume()}))}}])&&Ye(e.prototype,n),t}();function Le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(n),!0).forEach((function(e){ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const qe=function(){function t(e){var n=e.resource,r=e.resourceID,o=e.meta;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("Null audio resource: ".concat(r));this.meta=o,this.resource=n}var e,n;return e=t,(n=[{key:"create",value:function(t,e){var n=this.meta,r=this.resource,o=new b(r,e);return o.play=o.play.bind(o,n[t].start,n[t].duration),o}},{key:"createPool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Ze(Ue(Ue({resource:this.resource},this.meta[t]),e));return n}},{key:"createGroup",value:function(t,e){var n=this,r=t.map((function(t){return n.createPool(t,e)}));return new Ne(r)}}])&&Ve(e.prototype,n),t}();function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var He=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"makeMovable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.velX,r=void 0===n?0:n,o=e.velY,i=void 0===o?0:o,c=e.accX,a=e.accY,s=e.fricX,u=e.fricY,l=e.roll;Object.assign(t,{movable:!0,velX:r,velY:i,accX:c,accY:a,fricX:s,fricY:u,roll:l}),l&&(t.rotation=0)}},{key:"updateOffEdge",value:function(t,e){var n=t.offCorner;n.movable&&(t.pos.x+=n.pos.x-n.prevPosX,t.pos.y+=n.pos.y-n.prevPosY);var r=(0,I.Uz)(t),o=(0,I.SF)(n),i=o.x+(1===t.offEdge?o.width:0),s=(i-(r.x+r.radius))/r.radius,u=(o.y-(r.y+r.radius))/r.radius,l=u,f=-s,h=(0,xe.z4)(u,s);t.fricX&&(t.velX-=t.fricX*t.velX*e/2);var p=(t.velX*l+20*f)*e/r.radius,y=h+p;switch(t.offEdge){case-1:var d=y>Math.PI/2,b=y<c;(d||b)&&(t.offEdge=0,t.velX*=1.5),b&&(t.velX=-50),d&&(t.pos.y-=.5);break;case 1:var v=y<Math.PI/2;if(v||y>a)return t.offEdge=0,!v&&(t.velX=50),v&&(t.velX*=1.5),v&&(t.pos.y-=.5)}var m=r.radius*(1+Math.cos(y)),g=r.radius*(1+Math.sin(y)),w=t.pos.x;(0,I.uF)(t,i-m),Math.abs(w-t.pos.x),(0,I.aZ)(t,o.y-g),t.rotation+=p}},{key:"update",value:function(t,e){t.accX&&(t.velX+=t.accX*e/2),t.accY&&(t.velY+=t.accY*e/2),t.fricX&&(t.velX+=-t.fricX*t.velX*e/2),t.fricY&&(t.velY*=e/t.fricY),t.roll&&(t.rotation+=t.velX*e/(2*t.radius)),t.pos.x+=t.velX*e,t.pos.y+=t.velY*e}}],null&&Fe(e.prototype,null),n&&Fe(e,n),t}();function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tn(t,e,n){return e&&$e(t.prototype,e),n&&$e(t,n),t}function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=an(t);if(e){var o=an(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return on(this,n)}}function on(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?cn(t):e}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sn=function(t){en(n,t);var e=rn(n);function n(t){var r,o=t.imgId,i=t.metaId,c=t.frame,a=t.pos,s=t.lifetime,u=t.velX,l=void 0===u?0:u,f=t.velY,h=void 0===f?0:f,p=t.accX,y=t.accY,d=t.alpha,b=t.alphaDecayFn,v=t.rotVel,m=t.loop;return Ke(this,n),(r=e.call(this,{imgId:o,metaId:i,frame:c,pos:a})).lifetime=s,r.velX0=l,r.velY0=h,r.alpha0=d,r.pos0=Ge({},a),r.alpha=d,r.alphaDecayFn=b,r.elapsed=0,r.loop=m,v&&(r.rotVel=v,r.rotation=0,r.anchor={x:r.w/2,y:r.h/2}),He.makeMovable(cn(r),{velX:l,velY:h,accX:p,accY:y}),r}return tn(n,[{key:"_reset",value:function(){this.elapsed=0,this.velX=this.velX0,this.velY=this.velY0,this.alpha=this.alpha0,this.pos.x=this.pos0.x,this.pos.y=this.pos0.y,this.rotVel&&(this.rotation=0)}},{key:"update",value:function(t){if(this.elapsed>this.lifetime){if(!this.loop)return;this._reset()}this.elapsed+=t,He.update(this,t),this.rotVel&&(this.rotation+=this.rotVel*t),this.alphaDecayFn&&(this.alpha=Math.max(.01,1-xe.bh[this.alphaDecayFn](this.elapsed/this.lifetime)))}}]),n}(ut.Z);const un=function(t){en(n,t);var e=rn(n);function n(t){var r,o,i=t.size,c=t.blendMode,a=t.loop,s=void 0!==a&&a,u=t.randomDistribution,l=void 0===u||u,f=t.metaId,h=t.imgId,p=t.params,y=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["size","blendMode","loop","randomDistribution","metaId","imgId","params"]);if(Ke(this,n),(r=e.call(this,Ge({},y))).blendMode=c,l)o=p.reduce((function(t,e,n){return t.concat(Array(e.weight||1).fill(n))}),[]);else{var d=p.reduce((function(t,e){return t+(e.weight||1)}),0);o=p.reduce((function(t,e,n){return t.concat(Array(Math.round(i*(e.weight||1)/d)).fill(n))}),[])}for(var b=0;b<i;b++){var v=p[l?(0,xe.d4)(o):o[b]],m={metaId:f,imgId:h,frame:v.frame,pos:{x:Array.isArray(v.offsetX)?(0,xe.TN)(v.offsetX[0],v.offsetX[1]):v.offsetX||0,y:Array.isArray(v.offsetY)?(0,xe.TN)(v.offsetY[0],v.offsetY[1]):v.offsetY||0},lifetime:Array.isArray(v.lifetime)?(0,xe.QC)(v.lifetime[0],v.lifetime[1]):v.lifetime,velX:Array.isArray(v.velX)?(0,xe.TN)(v.velX[0],v.velX[1]):v.velX,velY:Array.isArray(v.velY)?(0,xe.TN)(v.velY[0],v.velY[1]):v.velY,accX:Array.isArray(v.accX)?(0,xe.TN)(v.accX[0],v.accX[1]):v.accX,accY:Array.isArray(v.accY)?(0,xe.TN)(v.accY[0],v.accY[1]):v.accY,alpha:Array.isArray(v.alpha)?(0,xe.QC)(v.alpha[0],v.alpha[1]):v.alpha,rotVel:Array.isArray(v.rotVel)?(0,xe.QC)(v.rotVel[0],v.rotVel[1]):v.rotVel,alphaDecayFn:v.alphaDecayFn,loop:s};r.add(new sn(m))}return s||(r.lifetime=p.reduce((function(t,e){return Math.max(t,e.lifetime[1])}),0),r.elapsed=0,r._reset=function(){this.remove(!1),this.onDead&&this.onDead(),this.elapsed=0;for(var t=this.children.length-1;t>-1;t--)this.children[t]._reset()},r.update=function(t){this.elapsed+=t,this.elapsed>this.lifetime&&this._reset()}),r}return tn(n,null,[{key:"feed",value:function(t,e,n){for(var r=0;r<e;r++)for(var o=0,i=t.children.length;o<i;o++)t.children[o].update(n)}}]),n}(t.Z);function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pn(t,e){return!e||"object"!==ln(e)&&"function"!=typeof e?yn(t):e}function yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dn(r);if(o){var n=dn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pn(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),bn(yn(t=i.call(this,["pause","over","play","complete","halt"])),"name",null),bn(yn(t),"level",1),bn(yn(t),"elapsed",0),t}return e=c,(n=[{key:"set",value:function(t){this.name=t}},{key:"is",value:function(t){return t===this.name}},{key:"pause",value:function(){this.is("paused")||(this.emit("pause"),this.set("paused"))}},{key:"play",value:function(){this.is("playing")||(this.emit("play"),this.set("playing"))}},{key:"over",value:function(t){this.is("over")||(this.emit("over",t),this.set("over"))}},{key:"complete",value:function(t,e){this.is("completed")||(this.emit("complete",t,e),this.set("completed"))}},{key:"halt",value:function(){this.is("halted")||(this.set("halted"),this.emit("halt"))}}])&&fn(e.prototype,n),c}(Q.Z),mn=function(t,e,n){return'\n    <div \n        class="'.concat(he.imgBtn," ").concat(n||"",'" \n        id="').concat(t,'" \n        style="width: ').concat(e.width,"px; height: ").concat(e.height,"px; background: url(").concat(e.src,');"\n    >\n    </div>\n    ')};var gn=n(1);Vt()(gn.Z,{insert:"head",singleton:!1});const wn=gn.Z.locals||{};function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var An=20,jn="pause-btn",xn="resume-btn",Pn="orb-av",Sn="timer",kn="orb-ind",Cn="orb-exp",_n="orb-exp-ind",Rn="cross-btn",En="reset-btn",In="overlay",Bn="pause-overlay",Tn="cur-time-ind",Dn="cur-time",Mn="best-time-ind",Xn="best-time",Zn="continue";const Yn=function(t,e,n,r,o,i,c,a,s,u,l,f,h,p,y){t.content=function(t,e){return'\n        <div id="'.concat(Bn,'" class="').concat(wn.blurOverlay,'"></div>\n        ').concat(mn(kn,t.orb,wn.hidden),'\n        <div id="').concat(Sn,'" class="').concat(wn.timer," ").concat(wn.hidden,'"> 0000:0 </div>\n        <div id="').concat(Pn,'" class="').concat(wn.txt," ").concat(wn.hidden,'"> ').concat(e," </div>\n        ").concat(mn(jn,t.pause,wn.hidden),"\n        ").concat(mn(xn,t.resume,wn.hidden),"\n        ").concat(mn(_n,t.orb,wn.hidden),'\n        <div id="').concat(Cn,'" class="').concat(wn.txt," ").concat(wn.hidden,'"> &times; ').concat(2,' </div>\n        <div id="').concat("rva",'" class="').concat(wn.tooltip," ").concat(wn.hidden,'" style="font-size: 1.5em"> watch ad to continue</div>\n        ').concat(mn(En,t.reset,wn.hidden),"\n        ").concat(mn(Rn,t.cross,wn.hidden),"\n    ")}(n,r.getOrbCount());var d=E.Z.isMobile&&e.getCtrlBtns(),b=t.get("#".concat(kn)),v=t.get("#".concat(Pn)),m=t.get("#".concat(Cn)),g=t.get("#".concat(_n)),w=t.get("#".concat("rva")),O=t.get("#".concat(jn)),A=t.get("#".concat(xn)),j=t.get("#".concat(En)),x=t.get("#".concat(Rn)),P=t.get("#".concat(Sn)),S=t.get("#".concat(Bn)),k=function(t,e,n,r,o,i,c,a,s){var u=function(t,e){var n=C.create("div");return n.domNode.setAttribute("class","".concat(he.imgBtn," ").concat(e||"")),n.domNode.setAttribute("style","width: ".concat(t.width,"px; height: ").concat(t.height,"px; background: url(").concat(t.src,");")),n.width=t.width,n.height=t.height,n}(t[e]()?o:i,a?wn.hidden:wn.dead);return u.on("click",(function(){if(r.is("playing")){var a=!t[e]();t[n](a),u.domNode.style.background="url(".concat(a?o.src:i.src,")"),c.play()}})),u}(r,"getSound","setSound",o,n.soundOn,n.soundOff,f,h);t.add(k),d&&t.add(d.left).add(d.right).add(d.axn);var _,R,B=function(t){v.content=t},T=function(){E.Z.isMobile&&(d.left.hide(),d.right.hide(),d.axn.hide())},D=function(t){b.pos=(0,I.qj)(t,b,"left","top",An,An),v.pos=(0,I.EJ)(b,v,"right",10),O.pos=(0,I.qj)(t,O,"right","top",-20,An),k.pos=(0,I.EJ)(O,k,"left",-12.5),P.pos=(0,I.EJ)(O,P,"bottom",0,10),j.pos=(0,I.qj)(t,j,"center","center"),A.pos=(0,I.EJ)(j,A,"top",0,-10),g.pos=(0,I.EJ)(A,g,"right",An),m.pos=(0,I.EJ)(g,m,"right",10),w.pos=(0,I.EJ)(A,w,"top",0,-15),x.pos=(0,I.EJ)(j,x,"bottom",0,10),function(t){E.Z.isMobile&&(d.left.pos=(0,I.qj)(t,d.left,"left","bottom",An,-30),d.right.pos=(0,I.EJ)(d.left,d.right,"right",An),d.axn.pos=(0,I.qj)(t,d.right,"right","bottom",-20,-35))}(t),S.domNode.style.width="".concat(t.width,"px"),S.domNode.style.height="".concat(t.height,"px")},M=function(){A.hide(),j.hide(),x.hide(),g.hide(),m.hide(),k.show(),O.show(),b.show(),v.show(),P.show(),w.hide(),E.Z.isMobile&&(d.left.show(),d.right.show(),d.axn.show())},X=function(){A.show(),j.show(),x.show(),g.hide(),m.hide(),k.hide(),O.hide(),b.hide(),v.hide(),P.hide(),T(),A.domNode.style.background="url(".concat(n.resume.src,")")},Z=function(){!function(){var t=s(e.pos.x);A.show(),j.show(),x.show(),k.hide(),O.hide(),P.hide(),T();var o=y.rvaSupported(),i=!!t,c=r.getOrbCount(),a=i&&!(c>=2)&&o,u=i&&!a;A.domNode.style.background="url(".concat(a?n.rva.src:n.resume.src,")"),a?w.show():u?(g.show(),m.show()):(b.hide(),v.hide())}()},Y=function(e,r){t.clear(),t.content=function(t,e,n){return'\n        <div class="'.concat(wn.overlay," ").concat(wn.hidden,'" id="').concat(In,'">  </div>\n        <div class="').concat(wn.time," ").concat(wn.hidden,'" id="').concat(Tn,'">finished in:</div>\n        <div class="').concat(wn.timeVal," ").concat(wn.hidden,'" id="').concat(Dn,'"> ').concat(e.toFixed(2),'s </div>\n        <div class="').concat(wn.time," ").concat(wn.hidden,'" id="').concat(Mn,'"> record time: </div>\n        <div class="').concat(wn.timeVal," ").concat(wn.recTimeVal," ").concat(wn.hidden,'" id="').concat(Xn,'"> ').concat(0===n||e<n?"new!":n.toFixed(2)+"s"," </div>\n        ").concat(mn(Zn,t,"".concat(wn.hidden," ").concat(wn.continue)),"\n    ")}(n.resume,e,r);var o=t.get("#".concat(In)),c=t.get("#".concat(Tn)),a=t.get("#".concat(Dn)),s=t.get("#".concat(Mn)),u=t.get("#".concat(Xn)),l=t.get("#".concat(Zn));o.domNode.style.width="".concat(E.Z.viewport.width,"px"),o.domNode.style.height="".concat(E.Z.viewport.height,"px"),s.pos=(0,I.qj)(E.Z.viewport,(0,I.$e)(s,u,"x"),"center","center"),u.pos=(0,I.EJ)(s,u,"right",8),c.pos=(0,I.EJ)(s,s,"top-start",0,-8),a.pos=(0,I.EJ)(c,a,"right",8),l.pos=(0,I.EJ)((0,I.EO)([s,u]),l,"bottom",0,16),l.on("click",(function(){var e;l.domNode.remove(),s.domNode.remove(),c.domNode.remove(),u.domNode.remove(),a.domNode.remove(),e=function(){t.clear(),i(!0)},y.playIntstAd().then(e).catch(e)})),o.domNode.style.opacity=.8,c.show(),a.show(),s.show(),u.show(),l.show()},N=(_=function(){var t={_val:!1,setVal:function(t){if(t!==this._val){if(this._val=t,t)return x.domNode.style.display="none",j.domNode.style.display="none",A.domNode.style.display="none",w.domNode.style.display="none",m.domNode.style.display="none",void(g.domNode.style.display="none");x.domNode.style.display="",j.domNode.style.display="",A.domNode.style.display="",w.domNode.style.display="",m.domNode.style.display="none",g.domNode.style.display="none"}},getVal:function(){return this._val}},n=function(t){c(),e.pos.x=t.x,e.pos.y=t.y},i=function(){c(),e.pos.x>1400&&a(),o.elapsed=0,o.play(),u.play(),t.setVal(!1)},f=function(){t.getVal()||(t.setVal(!0),Math.random()<E.Z.showAdOnRestart?y.playIntstAd().then(i).catch(i):i())};return[function(){if(!t.getVal()){var i=s(e.pos.x),c=y.rvaSupported(),a=!!i,h=r.getOrbCount(),p=h>=2,d=a&&!p&&c,b=a&&!d;if(b&&!p)return l.play();if(u.play(),b&&p){t.setVal(!0);var v=function(){r.setOrbCount(h-2),n(i),o.play(),t.setVal(!1)};return Math.random()<E.Z.showAdOnResume&&y.playIntstAd().then(v).catch(v),void v()}if(d){t.setVal(!0);var m=function(){n(i),o.play(),t.setVal(!1)};y.playRva().then(m).catch(m)}else f()}},f]}(),R=2,function(t){if(Array.isArray(t))return t}(_)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(_,R)||function(t,e){if(t){if("string"==typeof t)return On(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(t,e):void 0}}(_,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),L=N[0],U=N[1],z=function(){o.is("paused")||o.is("completed")||(S.domNode.style.display="block",p.pause())},V=function(){o.is("paused")||o.is("completed")||(S.domNode.style.display="none",p.resume())},q=function(t){return o.is("playing")&&"Escape"===t.key?o.pause():o.is("over")&&"Enter"===t.key?L():o.is("paused")&&"Enter"===t.key?o.play():void 0};return E.Z.isMobile||document.addEventListener("keydown",q),window.addEventListener("focus",V),window.addEventListener("blur",z),document.addEventListener("blur",z),document.addEventListener("focus",V),o.on("play",M),o.on("pause",X),o.on("over",Z),o.on("complete",Y),E.Z.viewport.on("change",D),r.on("orb-update",B),O.on("click",(function(){o.is("playing")&&(o.pause(),u.play())})),A.on("click",(function(){if(!o.is("playing")&&!o.is("completed"))return o.is("paused")?(o.play(),u.play()):void L()})),x.on("click",(function(){o.is("playing")||o.is("completed")||(i(!1),u.play())})),j.on("click",(function(){o.is("playing")||o.is("completed")||U()})),D(E.Z.viewport),{teardownUI:function(){E.Z.isMobile||document.removeEventListener("keydown",q),window.removeEventListener("blur",z),window.removeEventListener("focus",V),document.removeEventListener("blur",z),document.removeEventListener("focus",V),E.Z.viewport.off("change",D),r.off("orb-update",B),o.off("play",M),o.off("pause",X),o.off("over",Z),o.off("complete",Y)},updateTimer:function(t){if(o.is("playing")){var e=Math.floor(t),n=Math.floor(10*(t-e)),r=t<10?"000":t<100?"00":t<1e3?"0":"";P.content="".concat(r).concat(e,":").concat(n)}}}};function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Un(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Vn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return qn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?Jn(t):e}function Jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Qn=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(u,e);var n,r,o,c,a=(o=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gn(o);if(c){var n=Gn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Wn(this,t)});function u(e){var n,r=e.player,o=e.data,c=e.factories,l=void 0===c?{}:c,f=zn(e,["player","data","factories"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=a.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ln(Object(n),!0).forEach((function(e){Un(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},f));var h=new t.Z({id:i}),p=new t.Z({id:s}),y=new t.Z,d=new t.Z,b={mg:y,world:p,fg:d},v=function(e){var n=t.Z.get(e);if(!n){var r=new t.Z({id:e});return this.add(r),r}return n};p.getGroup=v,y.getGroup=v,d.getGroup=v;var m=function(t,e){var o=b[e];t.forEach((function(t){var e=t.name,i=t.x,c=t.y,a=t.groupId,s=zn(t,["name","x","y","groupId"]),u=l[e];if(u)(a?o.getGroup(a):o).add(u(i,c,s,r));else{var f=new ut.Z({frame:e,pos:{x:i,y:c}});(a?o.getGroup(a):Jn(n)).add(f)}}))};return o.collisionRects.forEach((function(e){var n=e.x,r=e.y,o=e.width,i=e.height,c=zn(e,["x","y","width","height"]),a=new t.Z({pos:{x:n,y:r}});a.width=o,a.height=i,Object.assign(a,c),h.add(a)})),p.add(h),m(o.mgTiles,"mg"),n.add(y),m(o.tiles,"world"),n.add(p),o.spawnPoints.forEach((function(t){var e=t.name,n=t.x,o=t.y,i=t.groupId,c=t.layer,a=void 0===c?"w":c,s=zn(t,["name","x","y","groupId","layer"]),u=l[e];if(!u)throw new Error("no factory method provided for ".concat(e));var f="mg"===a?y:"fg"===a?d:p;(i?f.getGroup(i):f).add(u(n,o,s,r))})),m(o.fgTiles,"fg"),n.add(d),n.width=o.width,n.height=o.height,n}return n=u,(r=[{key:"resetRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(t.reset&&t.reset(),t.children){var e,n=Vn(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.resetRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&Fn(n.prototype,r),u}(t.Z);function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){er(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function er(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rr(t,e,n){return(rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ir(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cr(r);if(o){var n=cr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ir(this,t)});function c(t){var e,n=t.player,r=(t.uiRoot,t.data),o=t.bg,a=t.fbg,s=t.factories,u=(t.levelDataId,t.uiImages,t.onStateChange,t.gameState),l=t.music,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","uiRoot","data","bg","fbg","factories","levelDataId","uiImages","onStateChange","gameState","music"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var h=new Qn({data:r,bg:o,fbg:a,player:n,factories:s});return(e=i.call(this,tr(tr({},f),{},{world:{width:h.width,height:h.height}}))).gameState=u,e.player=n,e.music=l,e.add(h),e.resetRecursively=function(){h.resetRecursively()},e}return e=c,(n=[{key:"update",value:function(t){if(rr(cr(c.prototype),"update",this).call(this,t),this.music)return this.gameState.is("completed")?this.music.playing&&this.music.pause():void(!this.music.playing&&this.music.play())}},{key:"onRemove",value:function(){this.music&&this.music.pause()}}])&&nr(e.prototype,n),c}(Pe.Z);var sr=Object.freeze({RECT:"rectangle",CIRC:"circle",PLANK:"plank"});const ur=function(t){var e=t.hitCirc?sr.CIRC:sr.RECT;if(e===sr.RECT&&!t.hitbox&&!t.width&!t.height)throw new Error("Unable to determine entity shape: \n".concat(JSON.stringify(t,null,3)));return e};var lr=function(t,e){var n=(0,I.Uz)(t),r=(0,I.Uz)(e);return(0,xe.ge)(n,r)},fr=function(t,e){return(0,xe.rA)((0,I.SF)(e),(0,I.Uz)(t))},hr=function(t,e){return(0,xe.rA)((0,I.SF)(t),(0,I.Uz)(e))};const pr=function(t,e,n){var r=ur(t),o=ur(e),i=n&&n.rigid&&n.movable;return r===sr.RECT&&o===sr.RECT?function(t){var e=t?xe.Ht:xe.ex;return function(t,n){var r=(0,I.SF)(t),o=(0,I.SF)(n);return e(r,o)}}(i):r===sr.CIRC&&o===sr.CIRC?lr:r===sr.CIRC&&o===sr.RECT?fr:r===sr.RECT&&o===sr.CIRC?hr:void 0};function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gr(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?wr(t):e}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Or(r);if(o){var n=Or(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return gr(this,t)});function c(t){var e,n=t.player,r=t.sound,o=t.storage,a=t.temp,s=void 0!==a&&a,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","sound","storage","temp"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(n),!0).forEach((function(e){br(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u))).player=n,e.sound=r,e.hitbox={x:5,y:5,width:14,height:14},e.testCol=pr(wr(e),n),e.active=!0,e.storage=o,e.temp=s,e}return e=c,(n=[{key:"update",value:function(){if(this.active){var t=this.player.pos.x+this.player.width/2-this.pos.x,e=this.player.pos.y+this.player.width/2-this.pos.y;(0,xe.nP)(t,e)>14400||(this.pos.x+=t/30,this.pos.y+=e/30,this.testCol(this,this.player)&&this.player.visible&&(this.sound.play(),this.storage.setOrbCount(this.storage.getOrbCount()+1),this.remove()))}}},{key:"reset",value:function(){this.temp&&this.remove()}},{key:"onRemove",value:function(){this.parent=null}}])&&vr(e.prototype,n),c}(un);function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cr(t,e){return!e||"object"!==jr(e)&&"function"!=typeof e?_r(t):e}function _r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Er=Object.freeze({x:9,y:0,width:93,height:200});const Ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rr(r);if(o){var n=Rr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Cr(this,t)});function c(t){var e,n=t.endY,r=t.uSound,o=t.dSound,a=t.speed,s=void 0===a?150:a,u=t.pos,l=t.player,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["endY","uSound","dSound","speed","pos","player"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(n),!0).forEach((function(e){Pr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"gate",pos:u},f))).endY=n,e.startY=u.y,e.initDir=(0,xe.Xx)(e.endY-e.startY),e.dir=e.initDir,e.dist=Math.abs(e.endY-e.startY),e.period=e.dist/s,e.t=0,e.uSound=r,e.dSound=o,e.player=l,e.testCol=pr(_r(e),l),e.hitbox=Er,e}return e=c,(n=[{key:"updatePos",value:function(t){this.t+=t;var e=this.dist*xe.bh.cubicIn(this.t/this.period);this.pos.y=(this.dir===this.initDir?this.startY:this.endY)+e*this.dir;var n=1===this.startToEndDir?(0,xe.uZ)(this.startY,this.endY,this.pos.y):(0,xe.uZ)(this.endY,this.startY,this.pos.y);if(n!==this.pos.y){this.t=0,this.dir*=-1,this.pos.y=n;var r=this.pos.x+this.w/2-this.player.pos.x,o=this.pos.y+this.h/2-this.player.pos.y;if(r*r+o*o>16e4)return;if(1===this.dir)return this.uSound.play();this.dSound.play()}}},{key:"reset",value:function(){this.pos.Y=this.startY,this.velY=this.velY0}},{key:"update",value:function(t){this.updatePos(t),this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&Sr(e.prototype,n),c}(ut.Z);function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e,n){return e&&Dr(t.prototype,e),n&&Dr(t,n),t}function Xr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zr(t,e)}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ur(t);if(e){var o=Ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?Lr(t):e}function Lr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ur(t){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zr=Math.PI,Vr=[1.5,2],qr=[16,36],Fr=[180,180],Hr=[0,zr],Wr=function(t){Xr(n,t);var e=Yr(n);function n(){var t,r,o;return Tr(this,n),!0,(o="forceUpdate")in(r=Lr(t=e.call(this,{frame:"wind"})))?Object.defineProperty(r,o,{value:true,enumerable:!0,configurable:!0,writable:!0}):r[o]=true,t.period=(0,xe.QC)(Vr[0],Vr[1]),t.amp=(0,xe.TN)(qr[0],qr[1]),t.height=(0,xe.TN)(Fr[0],Fr[1]),t.swirlOffset=(0,xe.QC)(Hr[0],Hr[1]),t.t=0,t}return Mr(n,[{key:"update",value:function(t){this.t+=t;var e=this.t/this.period;this.pos.y=-this.height*xe.bh.linear(e),this.pos.x=this.amp*Math.sin(this.swirlOffset+4*zr*e),this.alpha=1-xe.bh.quadOut(e),e>1&&(this.t=0)}}]),n}(ut.Z);const Jr=function(t){Xr(n,t);var e=Yr(n);function n(t,r,o,i){var c;Tr(this,n),(c=e.call(this,t)).pos.x=r-6,c.pos.y=o-9,c.player=i,c.hitbox={x:-25,y:-200,width:50,height:200},c.testCol=pr(Lr(c),i);for(var a=0;a<60;a++)c.add(new Wr);return c.feed(240,1/60),c}return Mr(n,[{key:"feed",value:function(t,e){for(var n=t-1;n>-1;n--)for(var r=this.children.length-1;r>-1;r--)this.children[r].update(e)}},{key:"update",value:function(t){if(this.testCol(this,this.player)&&this.player.visible){var e=this.player.pos.x+this.player.width/2-this.pos.x,n=this.player.pos.y+this.player.width/2-this.pos.y,r=(0,xe.nP)(e,n);if(r<4096)return;this.player.controls.switchState("jumping",this.player),this.player.velY-=E.Z.gravity*(r/32400)*t}}},{key:"reset",value:function(){}},{key:"onRemove",value:function(){this.parent=null}}]),n}(t.Z);function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $r(t,e){return!e||"object"!==Gr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const eo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=to(r);if(o){var n=to(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return $r(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t)).tint=[0,0,0,0],e.vel=1,e.tintVal=0,e.forceUpdate=!0,e}return e=c,(n=[{key:"update",value:function(t){this.tintVal+=.2*t*this.vel,this.tintVal>.16?(this.vel=-1,this.tintVal=.16):this.tintVal<0&&(this.vel=1,this.tintVal=0),this.tint[0]=this.tintVal,this.tint[1]=this.tintVal,this.tint[2]=this.tintVal}}])&&Qr(e.prototype,n),c}(ut.Z);function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function io(t,e,n){return e&&oo(t.prototype,e),n&&oo(t,n),t}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ao(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function so(t){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=so(e);if(n){var o=so(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return ao(this,t)});function o(t,e,n){var i,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return ro(this,o),(i=r.call(this)).invisible=!0,i.delay=c,i.duration=t,i.elapsed=0,i.onTick=e,i.onDone=n,i}return io(o,null,[{key:"attachedTo",value:function(t){return function(e){return t.add(new o(e))}}}]),io(o,[{key:"update",value:function(t){if(this.delay>0)this.delay-=t;else{if(this.elapsed+=t,this.elapsed>this.duration)return this.onDone&&this.onDone(),void this.remove();this.onTick&&this.onTick(this.elapsed/this.duration)}}}]),o}(t.Z);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ho(t,e){return(ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function po(t,e){return!e||"object"!==lo(e)&&"function"!=typeof e?yo(t):e}function yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ho(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bo(r);if(o){var n=bo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return po(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,{frame:"ball",pos:{x:t,y:e}})).pos0={x:t,y:e},o.player=r,o.tint=[.05,0,-.05,0],o.anchor={x:o.width/2,y:o.height/2},o.radius=o.width/2,o.alpha=.6,Object.assign(yo(o),mo(1)),He.makeMovable(yo(o),{roll:!0}),o.seqs=JSON.parse(n),o.seqIdx=-1,o.seq=null,o.initiated=!1,o.dead=!1,o.testCol=pr(yo(o),r),o.nextSeq(),o}return e=c,(n=[{key:"reset",value:function(){}},{key:"nextSeq",value:function(){var t,e,n,r=this;if(this.seqIdx++,this.seqIdx>this.seqs.length-1)return this.dead=!0,t=this,e=this.alpha,.6,n=function(){return r.remove()},void t.add(new uo(.6,(function(n){t.alpha=e*(1-n)}),n));this.seq=this.seqs[this.seqIdx],this.seq.jumpTo?(this.velSign=(0,xe.Xx)(this.seq.jumpTo-this.pos.y),this.velY=this.velSign*this.seq.speed,this.velX=this.seq.velX||0,this.accY=this.seq.acc||E.Z.gravity):this.seq.rollTo&&(this.velSign=(0,xe.Xx)(this.seq.rollTo-this.pos.x),this.accY=0,this.velX=this.velSign*this.seq.speed,this.velY=0)}},{key:"checkSeq",value:function(){this.seq.jumpTo?this.pos.y*this.velSign>this.seq.jumpTo*this.velSign&&(this.pos.y=this.seq.jumpTo,this.nextSeq()):this.seq.rollTo&&this.pos.x*this.velSign>this.seq.rollTo*this.velSign&&(this.pos.x=this.seq.rollTo,this.nextSeq())}},{key:"update",value:function(t){if(!this.dead){if(this.updateFlash(t),this.initiated)return He.update(this,t),void this.checkSeq();this.initiated=this.testCol(this,this.player)}}}])&&fo(e.prototype,n),c}(n(391).TexRegion),mo=function(t){return{alpha:.7,elapsed:0,period:t||.6,updateFlash:function(t){if(this.elapsed+=t,this.elapsed>this.period)switch(this.elapsed=0,this.alpha){case.7:this.alpha=.6;break;case.6:this.alpha=.7}}}};const go=vo;function wo(t){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jo(t,e){return(jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xo(t,e){return!e||"object"!==wo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const So=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jo(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Po(r);if(o){var n=Po(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xo(this,t)});function c(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;return Oo(this,c),(r=i.call(this,{frame:n,pos:{x:t,y:e}})).fromX=t,r.fromY=e,r.toX=o,r.toY=a,r.velX=o-t==0?0:(0,xe.Xx)(o-t)*s,r.velY=a-e==0?0:(0,xe.Xx)(a-e)*s,r.clampX0=r.fromX<r.toX?r.fromX:r.toX,r.clampX1=r.toX>r.fromX?r.toX:r.fromX,r.clampY0=r.fromY<r.toY?r.fromY:r.toY,r.clampY1=r.toY>r.fromY?r.toY:r.fromY,r}return e=c,(n=[{key:"update",value:function(t){var e=this.pos.x+this.velX*t,n=this.pos.y+this.velY*t;this.pos.x=(0,xe.uZ)(this.clampX0,this.clampX1,e),this.pos.y=(0,xe.uZ)(this.clampY0,this.clampY1,n),this.pos.x!==e&&(this.velX*=-1),this.pos.y!==n&&(this.velY*=-1)}}])&&Ao(e.prototype,n),c}(ut.Z);function ko(t){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ro(t,e,n){return(Ro="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=To(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Io(t,e){return!e||"object"!==ko(e)&&"function"!=typeof e?Bo(t):e}function Bo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Do=Math.PI;const Mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eo(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=To(r);if(o){var n=To(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Io(this,t)});function c(t,e,n){var r,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,l=arguments.length>6?arguments[6]:void 0;return Co(this,c),(o=i.call(this,t,e,n,a,s,u)).anchor={x:o.width/2,y:o.height/2},o.player=l,o.radius=o.width/2,o.hitCirc=null!==(r=o.hitCirc)&&void 0!==r?r:{x:0,y:0,radius:o.radius-2},o.rotation=0,o.testCol=pr(Bo(o),l),(o.velX||o.velY)&&(o.forceUpdate=!0),o}return e=c,(n=[{key:"update",value:function(t){var e=(this.velX-this.velY)*t/(2*this.radius);Ro(To(c.prototype),"update",this).call(this,t),this.rotation+=e||Do*t,this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&_o(e.prototype,n),c}(So);function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function No(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lo(t,e,n){return(Lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qo(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Uo(t,e){return(Uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zo(t,e){return!e||"object"!==Xo(e)&&"function"!=typeof e?Vo(t):e}function Vo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fo=24,Ho=48;const Wo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uo(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qo(r);if(o){var n=qo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return zo(this,t)});function c(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],p=arguments.length>10?arguments[10]:void 0,y=arguments.length>11?arguments[11]:void 0;Yo(this,c);var d=u?"vlhd":"hlhd",b=u?"vlbod":"hlbod",v=u?2:Fo,m=u?Fo:10,g=u?0:Ho,w=u?Ho:0;(n=i.call(this,t,e,d,r,o,a)).player=p;for(var O=0;O<s;O++){var A=new ut.Z({frame:b});A.pos.x+=v+g*O,A.pos.y+=m+w*O,A.alpha=h?1:0,n.add(A)}return n.hitbox={x:u?2:0,y:u?0:2,width:u?12:Fo+Ho*s,height:u?Fo+Ho*s:Fo},n.testCol=pr(Vo(n),n.player),n.on=h,l&&(n.period=l,n.t=0,n.sounds=y),n.delay=f,n}return e=c,(n=[{key:"update",value:function(t){if(Lo(qo(c.prototype),"update",this).call(this,t),this.delay>0)this.delay-=t;else if(this.elapsed+=t,this.testCol(this,this.player)&&this.player.visible&&this.on&&this.player.explode(),this.period&&(this.t+=t,!(this.t<=this.period))){this.on=!this.on,this.t=0;var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Zo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}(this.children);try{for(n.s();!(e=n.n()).done;)e.value.alpha=this.on?1:0}catch(t){n.e(t)}finally{n.f()}var r=this.pos.x-this.player.pos.x,o=this.pos.y-this.player.pos.y;r*r+o*o>9e4||(this.on?this.sounds.on.play():this.sounds.off.play())}}}])&&No(e.prototype,n),c}(So);function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ko(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?$o(t):e}function $o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ti(r);if(o){var n=ti(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ko(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ei($o(n=i.call(this,t)),"_player",null),ei($o(n),"testCol",null),un.feed($o(n),120,.02),n.hitbox={x:-20,width:40,y:-15,height:17},n.onTouch=e,n}return e=c,(n=[{key:"reset",value:function(){}},{key:"update",value:function(){this.player&&this.testCol(this,this.player)&&(this.pos.x,this.pos.y,this.remove(),this.onTouch())}},{key:"onRemove",value:function(){this.parent=null}},{key:"player",get:function(){return this._player},set:function(t){this._player||(this._player=t,this.testCol=pr(this,t))}}])&&Go(e.prototype,n),c}(un);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ai(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ui="lcr1",li=["lcr2","lcr3"];const fi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(a,e);var n,r,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=si(o);if(i){var n=si(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ai(this,t)});function a(t,e,n,r,o){var i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:75,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8?arguments[8]:void 0;return oi(this,a),(i=c.call(this,{frame:ui,pos:{x:t,y:e}})).dmgFacs=n,i.orbPool=r,i.player=f,i.sounds=o,i.luck=s,i.temp=l,i.setDamage(u),i.reset=function(){i.alpha=1,i.setDamage(u)},i}return n=a,(r=[{key:"setDamage",value:function(t){if(this.damage=(0,xe.uZ)(0,li.length,t),this.damage>0)return this.frame=li[this.damage-1];this.frame=ui}},{key:"takeDamage",value:function(t){Math.abs(t)<300||(this.damage++,this.sounds.crack.play(),this.damage>li.length?this.break(t):this.frame=li[this.damage-1])}},{key:"break",value:function(e){this.temp?this.remove():this.alpha=0;var n=e>0?"down":"up",r=this.dmgFacs[n].create();if(r.pos.x=this.pos.x,r.pos.y=this.pos.y,this.sounds.snap.play(),Math.random()<this.luck/100){var o=this.orbPool.create(this.pos.x-6+this.width/2,this.pos.y-6+this.height/2,null,this.player);o.active=!1,o.add(new uo(.6,null,(function(){o.active=!0}))),t.Z.get(s).add(o)}t.Z.get(s).add(r)}}])&&ii(n.prototype,r),a}(ut.Z);function hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const pi=function(){function t(e){var n=e.factory,r=e.size,o=e.free,i=e.reset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.factory=n,this.size=r,this.free=o,this.reset=i,this.list=Array(r).fill(!1),this.lastIdx=0}var e,n;return e=t,(n=[{key:"create",value:function(){this.lastIdx=(this.lastIdx+1)%this.list.length;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.list[this.lastIdx]?(this.reset&&this.reset.apply(this,[this.list[this.lastIdx]].concat(e)),this.free&&this.free(this.list[this.lastIdx])):this.list[this.lastIdx]=this.factory.apply(this,e);var r=this.list[this.lastIdx];return r}}])&&hi(e.prototype,n),t}();function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vi(t,e){return!e||"object"!==yi(e)&&"function"!=typeof e?mi(t):e}function mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gi(r);if(o){var n=gi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return vi(this,t)});function c(t,e,n,r,o){var a,s,u,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),l={x:2,y:0,width:86,height:88},(u="hitbox")in(s=mi(a=i.call(this,{pos:{x:t,y:e},frame:"crane"})))?Object.defineProperty(s,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[u]=l,a.prevPosY=a.pos.y,a.prevPosX=a.pos.x,a.mat="metal",a.movable=!0,a.dispY=r-e,a.distX=n-t,a.meanX=t,a.meanY=e,a.period=o,a.t=0,a}return e=c,(n=[{key:"update",value:function(t){this.t+=t,this.pos.y=this.meanY+xe.bh.smoothStep(this.t/this.period)*this.dispY,this.t>this.period&&(this.meanY=this.meanY+this.dispY,this.pos.y=this.meanY,this.dispY*=-1,this.t=0),this.velY=(this.pos.y-this.prevPosY)/t}}])&&di(e.prototype,n),c}(ut.Z);var Oi=n(644),Ai=n.n(Oi);function ji(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Pi=Object.freeze({oneOff:!1,resolveX:function(t,e,n,r){var o=(0,I.SF)(e),i=(0,I.mn)(t);t.velX=r?t.velX:0,r&&(e.unduePosXUpdate=.5*n),n>0?(0,I.uF)(t,o.x-i.width-i.x):(0,I.uF)(t,o.x+o.width-i.x)},resolveY:function(t,e,n){var r=(0,I.SF)(e),o=(0,I.mn)(t);t.velY=0,n>0?(0,I.aZ)(t,r.y-o.height-o.y):(0,I.aZ)(t,r.y+r.height-o.y)}}),Si=Object.freeze({oneOff:!1,resolveX:function(t,e,n){if(!t.offEdge){var r=(0,I.SF)(e),o=(0,I.Uz)(t),i=t.hitCirc,c=(0,xe.uZ)(r.y,r.y+r.height,o.y+o.radius),a=0;if(c===r.y||c===r.y+r.height){var s=Math.abs(c-(o.y+o.radius));a=o.radius-Math.sqrt(o.radius*o.radius-s*s)}var u=t.pos.x,l=n-(e.movable?e.pos.x-e.prevPosX:0);l>0?(0,I.uF)(t,r.x-i.x-2*o.radius+a):(0,I.uF)(t,r.x+r.width-i.x-a);var f=(l+(t.pos.x-u))/l;t.velX=a?(0,xe.Xx)(t.velX):0,t.rotation=t.prevRot+f*(t.rotation-t.prevRot)}},resolveY:function(t,e,n){if(!t.offEdge){var r=(0,I.SF)(e),o=t.hitCirc,i=(0,I.Uz)(t),s=(0,xe.uZ)(r.x,r.x+r.width,i.x+i.radius),u=n-(e.movable?e.pos.y-e.prevPosY:0),l=0;if(s===r.x||s===r.x+r.width){var f=Math.abs(s-(i.x+i.radius));l=i.radius-Math.sqrt(i.radius*i.radius-f*f)}if(t.velY=e.movable&&e.velY>0?e.velY:0,u>0){var h=!1;if(l){var p=s===r.x?-1:1;if((0,xe.Xx)(t.velX)===p)t.velX+=2*p,h=!0;else{t.offEdge=p,t.offCorner=e;var y=(0,xe.z4)(r.y-(i.y+i.radius),r.x+(1===p?r.width:0)-(i.x+i.radius));(-1===p&&y<c||1===p&&y>a)&&(t.velX=p*Math.max(175,Math.abs(t.velX)))}}return(0,I.aZ)(t,r.y-o.y-2*i.radius+l),h}(0,I.aZ)(t,r.y+r.height-o.y-l)}}});function ki(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ci=function(){function e(n){var r=this,o=n.entity,i=n.block,c=n.blocks,a=n.onHit,s=void 0===a?function(){}:a,u=n.rigid,l=void 0!==u&&u,f=n.movable,h=void 0===f||f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.entity=o,this.oneToOne=Boolean(i)&&!Boolean(c),this.onHit=s,this.block=i,this.blocks=c,this.evaluateUpdateFn=function(){var e=t.Z.get(r.blocks),n=t.Z.get(r.block),o=r.oneToOne?n:e&&e.children[0];if(o)return r.testFn=pr(r.entity,o,{rigid:l,movable:h}),function(t,e,n){var r=n.rigid,o=n.collision;if(!r)return function(){return o.test(o.onHit)};var i=function(t,e,n){var r=ur(t),o=ur(e);if(r===sr.RECT&&o===sr.RECT)return Pi;if(r===sr.CIRC&&o===sr.RECT)return Si;throw new Error("No resolver found for shapes ".concat(r," and ").concat(o))}(t,e);return i.oneOff?function(){o.test((function(e){i.resolve(t,e),o.onHit(e)}))}:function(){var e=t.pos.x-t.prevPosX,n=t.pos.y-t.prevPosY;t.pos.y=t.prevPosY,o.test((function(n){var r=t.velX;i.resolveX(t,n,e),o.onHit(n,r,0,!(t.pos.x===t.prevPosX))}),!0),t.pos.y+=n,o.test((function(e){var r=t.velY;if(i.resolveY(t,e,n))return t.onFall&&t.onFall();o.onHit(e,0,r,!(t.pos.y===t.prevPosY))}),!1)}}(r.entity,o,{rigid:l,movable:h,collision:r})}}var n,r;return n=e,(r=[{key:"resolve",value:function(t,e,n){var r=n&&t.movable?t.pos.y-t.prevPosY:0;t.pos.y-=r,0!==t.alpha&&this.testFn(this.entity,t)&&e(t),t.pos.y+=r}},{key:"test",value:function(e,n){if(this.oneToOne){var r=t.Z.get(this.block);this.resolve(r,e,n)}else{var o=t.Z.get(this.blocks);if(o)for(var i=o.children.length-1;i>-1;i--){var c=o.children[i];this.resolve(c,e,n)}}}},{key:"update",value:function(){var t=this.evaluateUpdateFn();t&&(this.update=t,this.evaluateUpdateFn=null,t())}}])&&ki(n.prototype,r),e}();function _i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ri(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function Ri(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ii=function(t){var e=t.which||t.keyCode;if("number"==typeof e)return e;switch(t.key){case"Left":case"ArrowLeft":return 37;case"Right":case"ArrowRight":return 39;case"Up":case"ArrowUp":return 38;case"A":case"a":return 65;case"D":case"d":return 68;case"W":case"w":return 87;case" ":return 32;default:return-1}};const Bi=function(){function t(e){var n=this;for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.keys={},e){var o=e[r];if(Array.isArray(o)){var i,c=_i(o);try{for(c.s();!(i=c.n()).done;){var a=i.value;this.keys[a]={pressed:!1,held:!1}}}catch(t){c.e(t)}finally{c.f()}}else this.keys[o]={pressed:!1,held:!1}}this.keysArr=Object.values(this.keys),this.keysLen=this.keysArr.length,document.addEventListener("keydown",(function(t){var e=Ii(t),r=n.keys[e];r&&(r.held=!0,r.pressed=!0)})),document.addEventListener("keyup",(function(t){var e=Ii(t),r=n.keys[e];r&&(r.held=!1)})),document.addEventListener("blur",this.resetAll.bind(this)),window.addEventListener("blur",this.resetAll.bind(this))}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held",r=this.mappings[t];return Array.isArray(r)?r.find((function(t){return!0===e.keys[t][n]})):this.keys[r][n]}},{key:"reset",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1}},{key:"resetAll",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1,this.keysArr[t].held=!1}}])&&Ei(e.prototype,n),t}();function Ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Di=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.btns={};var r=function(t){n.btns[t]={pressed:!1,held:!1};var r=e[t];r.on("touchstart",(function(){var e=n.btns[t];e.pressed=!0,e.held=!0})),r.on("touchend",(function(){var e=n.btns[t];e.pressed=!1,e.held=!1}))};for(var o in e)r(o);this.btnsArr=Object.values(this.btns),this.btnsLen=this.btnsArr.length}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held";return this.btns[t][e]}},{key:"reset",value:function(){for(var t=this.btnsLen-1;t>-1;t--)this.btnsArr[t].pressed=!1}}])&&Ti(e.prototype,n),t}();function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yi(t,e,n){return e&&Zi(t.prototype,e),n&&Zi(t,n),t}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Li(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?Ui(t):e}function Ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qi=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=zi(e);if(n){var o=zi(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Li(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3?arguments[3]:void 0;return Xi(this,o),Vi(Ui(t=r.call(this,n)),"stateSwitched",!1),t.gameState=c,t.speed=e,t.states={offEdge:new Wi(Ui(t)),jumping:new Hi(Ui(t),i),rolling:new Fi(Ui(t))},t.state=t.states.jumping,t.state.limitReached=!0,t}return Yi(o,[{key:"cleanup",value:function(){this.reset(),this.stateSwitched=!1}},{key:"switchState",value:function(t){var e;if(!this.stateSwitched&&t!==this.state.name){this.state.onExit&&this.state.onExit(),this.state=this.states[t];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.state.onEnter&&(e=this.state).onEnter.apply(e,r),this.stateSwitched=!0}}},{key:"update",value:function(t,e){this.gameState.is("playing")&&(this.state.update(t,e),this.cleanup())}}]),o}(t)},Fi=function(){function t(e){Xi(this,t),Vi(this,"name","rolling"),this.controls=e}return Yi(t,[{key:"onEnter",value:function(){}},{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")&&this.controls.switchState("jumping",t)}}]),t}(),Hi=function(){function t(e,n){Xi(this,t),Vi(this,"name","jumping"),Vi(this,"jmpVel",-260),Vi(this,"maxJvelInc",5.5),Vi(this,"minJmpVel",-375),Vi(this,"mxJmpVel",150),Vi(this,"first",!1),this.controls=e,this.onJump=n}return Yi(t,[{key:"onEnter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||t.velY>this.mxJmpVel?this.limitReached=!0:(this.limitReached=!1,t.velY+=this.jmpVel,this.first=!0)}},{key:"onHalt",value:function(){this.limitReached=!0}},{key:"update",value:function(t,e){if(this.first&&t.velY<0&&this.onJump(),this.first=!1,this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")){if((t.velY<this.minJmpVel||t.velY>this.mxJmpVel)&&(this.limitReached=!0),this.limitReached)return;t.velY+=this.jmpVel*Math.min(this.maxJvelInc,t.velY*t.velY/100)*e}else this.limitReached=!0}}]),t}(),Wi=function(){function t(e){Xi(this,t),Vi(this,"name","offEdge"),this.controls=e}return Yi(t,[{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=this.controls.speed*e),this.controls.get("right")&&(t.velX+=this.controls.speed*e),t.velX=(0,xe.uZ)(-100,100,t.velX)}}]),t}(),Ji=qi(Bi),Gi=qi(Di),Qi=n(987),Ki=n.n(Qi),$i=n(229),tc=n.n($i),ec=n(661);Vt()(ec.Z,{insert:"head",singleton:!1});const nc=ec.Z.locals||{};function rc(t){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ic(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cc(t,e){return(cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ac(t,e){return!e||"object"!==rc(e)&&"function"!=typeof e?sc(t):e}function sc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uc(t){return(uc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fc=E.Z.isMobile?Gi:Ji,hc=E.Z.isMobile?function(){var t=[{name:"left",style:"background: url(".concat(Ki(),"); transform: scale(-1, 1);"),width:65,height:55},{name:"right",style:"background: url(".concat(Ki(),");"),width:65,height:55},{name:"axn",style:"background: url(".concat(tc(),"); transform: rotate(270deg);"),width:64,height:64}];return Object.freeze(t.reduce((function(t,e){var n=C.create("div");return n.classList.add(nc.ctrlBtn),n.domNode.style=e.style,n.domNode.style.width="".concat(e.width,"px"),n.domNode.style.height="".concat(e.height,"px"),n.width=e.width,n.height=e.height,t[e.name]=n,t}),{}))}:function(){return Object.freeze({left:[37,65],right:[39,68],axn:[32,87,38]})},pc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cc(t,e)}(u,e);var n,r,o,c,a=(o=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uc(o);if(c){var n=uc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ac(this,t)});function u(t){var e,n=t.speed,r=void 0===n?48:n,o=t.width,c=void 0===o?64:o,s=t.height,l=void 0===s?64:s,f=t.fricX,h=void 0===f?4:f,p=t.shard,y=t.cinder,d=t.controls,b=t.sounds,v=t.state,m=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["speed","width","height","fricX","shard","cinder","controls","sounds","state"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=a.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oc(Object(n),!0).forEach((function(e){lc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"ball"},m)),lc(sc(e),"remDt",0),e.width=c,e.height=l,e.radius=c/2,e.hitCirc={x:0,y:0,radius:e.radius},e.rotation=0,e.anchor={x:c/2,y:l/2},e.pos.y=100,e.shard=p,e.cinder=y,e.sounds=b,e.fricX0=h,e.state=v,e.controls=d||new fc(r,hc(),(function(){b.jump.play()}),e.state),e.wallCollision=new Ci({entity:sc(e),blocks:i,rigid:!0,movable:!1,onHit:e.onWallCol.bind(sc(e))}),e.spikeCollision=new Ci({entity:sc(e),blocks:"spikes",rigid:!1,movable:!1,onHit:e.explode.bind(sc(e))}),e.magnetCollision=new Ci({entity:sc(e),blocks:"magnets",rigid:!0,movable:!1,onHit:e.onMagnetCol.bind(sc(e))}),e.crateCollision=new Ci({entity:sc(e),blocks:"crates",rigid:!0,movable:!1,onHit:e.onCrateCol.bind(sc(e))}),He.makeMovable(sc(e),{accY:E.Z.gravity,roll:!0,fricX:h}),e}return n=u,(r=[{key:"onFall",value:function(){this.controls.switchState("jumping",this,!0)}},{key:"getCtrlBtns",value:function(){if(!E.Z.isMobile)throw new Error("control buttons are not defined for non-touch/desktop devices");return this.controls.mappings}},{key:"onWallCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>(t.movable?200:100)&&this.sounds[t.mat||"concrete"].play(Math.min(1,o/800))}if(n){if(n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"onMagnetCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>100&&this.sounds.metal.play(Math.min(1,o/3e3))}n&&n<0&&(this.velY=-100,"jumping"===this.controls.state.name&&(this.fricX=2*this.fricX0,this.controls.state.onHalt()))}},{key:"onCrateCol",value:function(t,e,n,r){if(n){if(t.takeDamage(n),n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"explode",value:function(){this.state.is("completed")||(this.cinder.pos.x=this.shard.pos.x=this.pos.x+this.width/2,this.cinder.pos.y=this.shard.pos.y=this.pos.y+this.height/2,this.alpha=0,t.Z.get(s).add(this.cinder),t.Z.get(s).add(this.shard),this.state.over(this.pos.x),this.sounds.player_exp.play(),this.sounds.player_din.play(.8),this.velX=this.velY=0)}},{key:"update",value:function(t){this.state.is("game-over")||this.state.is("paused")||(this.controls.update(this,t),Boolean(this.offEdge)?He.updateOffEdge(this,t):He.update(this,t),this.wallCollision.update(),this.magnetCollision.update(),this.spikeCollision.update(),this.crateCollision.update())}},{key:"onRemove",value:function(){this.parent=null}},{key:"visible",get:function(){return 0!==this.alpha&&this._visible}},{key:"offEdge",set:function(t){this.controls.switchState("offEdge",t),this._offEdge=t},get:function(){return this._offEdge}}])&&ic(n.prototype,r),u}(ut.Z);lc(pc,"sounds",["player_din","concrete","wood","metal","jump","player_exp"]);const yc=pc;var dc=n(284),bc=n.n(dc),vc=n(562),mc=n.n(vc),gc=n(102),wc=n.n(gc),Oc=n(210),Ac=n.n(Oc),jc=n(524),xc=n.n(jc),Pc=n(976),Sc=n.n(Pc),kc=n(399),Cc=n.n(kc),_c=n(224),Rc=n.n(_c),Ec=n(315),Ic=n.n(Ec),Bc=n(73),Tc=n.n(Bc);function Dc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Zc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Dc(this,t),Xc(this,"savedCheckpoint",null),this.checkpoints=e.sort((function(t,e){return t.x-e.x}))}var e,n;return e=t,(n=[{key:"reset",value:function(){this.savedCheckpoint=null}},{key:"get",value:function(t){if(0!==this.checkpoints.length){var e=this.checkpoints.findLast((function(e){return t>=e.x})),n=!this.savedCheckpoint&&!e,r=!e&&this.savedCheckpoint,o=!this.savedCheckpoint&&e;if(!n)return r?this.savedCheckpoint:o?(this.savedCheckpoint=e,e):(this.savedCheckpoint=this.savedCheckpoint.x>e.x?this.savedCheckpoint:e,this.savedCheckpoint)}}}])&&Mc(e.prototype,n),t}();function Yc(t){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lc(t,e){return(Lc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uc(t,e){return!e||"object"!==Yc(e)&&"function"!=typeof e?zc(t):e}function zc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vc(t){return(Vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Fc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lc(t,e)}(a,e);var n,r,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vc(o);if(i){var n=Vc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Uc(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.storage,i=t.sdk;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),qc(zc(e=c.call(this)),"initialized",!1),qc(zc(e),"soundPools",["gate"]);var s=n.assetsCache;return e.storage=o,e.sdk=i,e.game=n,e.uiRoot=r,e.state=new vn,e.state.on("pause",(function(){n.pause()})),e.state.on("play",(function(){n.resume()})),o.on("sound-update",(function(t){t?n.turnOnSound():n.turnOffSound()})),s.once("load",(function(){var t=new qe({resource:s.get(bc()),resourceId:bc(),meta:s.get(mc())}),r=s.get(Ai()),i=new un(r.shard),c=new un(r.cinder),a=yc.sounds.reduce((function(e,n){return e[n]=t.create(n),e}),{});if(i.onRemove=function(){i.parent=null},c.onRemove=function(){c.parent=null},e.soundSprite=t,e.btnSound=t.create("btn"),e.errSound=t.createPool("err_alt"),e.contSound=t.create("continue"),e.music={music1:t.create("music1")},e.player=new yc({width:64,height:64,fill:"brown",speed:350,fricX:3,pos:{x:300,y:0},shard:i,cinder:c,sounds:a,state:e.state}),e.factories=function(t){var e=t.soundSprite,n=t.assetsCache,r=t.storage,o=t.player,i=t.state,c=e.create("gate_u"),a=e.create("gate_d"),s=e.createPool("orb"),u=e.create("end"),l={on:e.createPool("las_on"),off:e.createPool("las_off")},f=n.get(Ai()),h=function(t,e,n,r){return new pi({factory:function(e,o,i,c){return new Ar(Object.assign({},f.orb,{player:c,pos:{x:e,y:o},sound:n,storage:r,temp:t}))},size:e,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n}})},p=h(!1,5,s,r),y=h(!0,2,s,r),d=new pi({factory:function(t,e,n,r){return new Jr(f.wind,t,e,r)},size:2,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n-10}}),b=new ni(f.fire,(function(){var t=r.getHiscore(i.level)||0,e=i.elapsed;i.level===r.getCurLevel()&&i.level<Zt.length&&r.setCurLevel(i.level+1),(0===t||e<t)&&r.setHiscore(i.level,e),u.play(),i.complete(e,t)})),v=Object.freeze({up:new pi({factory:function(){var t=new un(f.crateUp);return t.onRemove=function(){t.parent=null},t},size:2}),down:new pi({factory:function(){var t=new un(f.crateDown);return t.onRemove=function(){t.parent=null},t},size:2})}),m={snap:e.createPool("w_snap"),crack:e.createPool("w_crack")};return{player:function(t,e){return o.reset=function(){o.pos.x=t,o.pos.y=e,o.alpha=1,o.velY=o.velX=0,o.controls.switchState("jumping",o,!0)},o.reset(),o},gate:function(t,e,n,r){return new Ir(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ji(Object(n),!0).forEach((function(e){xi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({pos:{x:t,y:e},colSound:null,uSound:c,dSound:a,player:r},n))},orb:p.create.bind(p),wind:d.create.bind(d),fire:function(t,e,n,r){return b.parent&&b.remove(),b.player=r,b.pos.x=t,b.pos.y=e,b},magnet:function(t,e){return new eo({pos:{x:t,y:e},frame:"magnet"})},ball:function(t,e,n,r){return new go(t,e,n.seq,r)},sb1:function(t,e,n,r){return new Mo(t,e,"sb1",n.toX,n.toY,n.speed,r)},sb2:function(t,e,n,r){return new Mo(t,e,"sb2",n.toX,n.toY,n.speed,r)},sb3:function(t,e,n,r){return new Mo(t,e,"sb3",n.toX,n.toY,n.speed,r)},sb4:function(t,e,n,r){return new Mo(t,e,"sb4",n.toX,n.toY,n.speed,r)},sb5:function(t,e,n,r){return new Mo(t,e,"sb5",n.toX,n.toY,n.speed,r)},sb6:function(t,e,n,r){return new Mo(t,e,"sb6",n.toX,n.toY,n.speed,r)},lcr1:function(t,e,n,r){return new fi(t,e,v,y,m,n.luck,n.dmg,n.temp,r)},vlhd:function(t,e,n,r){return new Wo(t,e,n.toX,n.toY,n.speed,n.num,!0,n.period,n.delay,n.on,r,l)},hlhd:function(t,e,n,r){return new Wo(t,e,n.toX,n.toY,n.speed,n.num,!1,n.period,n.delay,n.on,r,l)},bus:function(t,e,n){return new wi(t,e,n.toX,n.toY,n.period)}}}({soundSprite:t,assetsCache:s,storage:o,player:e.player,state:e.state}),n.renderer.api===T&&!E.Z.isMobile){var u=s.get(wc());e.bg=new Me({z:2.5,zAtop:1,viewport:E.Z.viewport,subject:e.player,entYOffset:0,tiles:u.map((function(t){return new ut.Z({frame:t.name,pos:{x:t.x,y:t.y}})}))}),e.add(e.bg)}e.uiImages={cross:s.get(xc()),resume:s.get(tc()),pause:s.get(Ac()),orb:s.get(Cc()),reset:s.get(Sc()),soundOn:s.get(Rc()),soundOff:s.get(Ic()),rva:s.get(Tc())}})),e}return n=a,(r=[{key:"setLevel",value:function(t,e){var n=new ar({player:this.player,data:t,viewport:E.Z.viewport,subject:this.player,factories:this.factories,music:e,gameState:this.state});return this.add(n),this.game.renderer.changeBackground(E.Z.isMobile||this.game.renderer.api===B?t.mob_bg:t.bg),this.game.renderer.gTint=t.tint&&t.tint.split(","),n.parent=null,this.bg&&(this.bg.overlay=t.pxbg&&(0,xe.t)(t.pxbg),this.bg.layoutTiles(n.world)),n}},{key:"unsetLevel",value:function(){if(this.children){var e=this.children.length-1;e>-1&&t.Z.removeChild(this,this.children[e])}}},{key:"onEnter",value:function(e){var n=this,r=Math.min(e-1,Zt.length-1),o=Zt[r].id,i=Zt[r].music,c=this.game.assetsCache.get(o),a=this.setLevel(c,i&&this.music[i]),s=new Zc(c.checkpoints),u=function(){a.focusInst(),n.bg&&n.bg.focusInst()};u(),a.idx=r;var l=s.get.bind(s),f=Yn(this.uiRoot,this.player,this.uiImages,this.storage,this.state,(function(t){return n.game.switchScreen(Lt,!1,t)}),(function(){window.Node=t.Z,window.level=a,a.resetRecursively(),s.reset()}),u,l,this.btnSound,this.errSound,this.contSound,d,this.game,this.sdk),h=f.teardownUI,p=f.updateTimer;this.state.level=r+1,this.teardownUI=h,this.updateTimer=p,this.state.play()}},{key:"onExit",value:function(){this.unsetLevel(),this.teardownUI&&this.teardownUI(),this.game.reset(),this.state.halt(),this.state.elapsed=0}},{key:"update",value:function(e,n){this.state.elapsed+=e,this.children.forEach((function(r){t.Z.updateRecursively(r,e,n,r)})),this.updateTimer(this.state.elapsed)}}])&&Nc(n.prototype,r),a}(t.Z);var Hc=n(806);Vt()(Hc.Z,{insert:"head",singleton:!1});const Wc=Hc.Z.locals||{};var Jc="prev-btn",Gc="next-btn",Qc="start-btn",Kc="lev-info",$c="lock",ta="loading",ea="best-time",na="retry",ra=E.Z.isMobile?20:60,oa=Object.freeze({width:24,height:24}),ia='\n<div id="'.concat($c,'" class="').concat(Wc.icon,'">\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#ffe6d5" width="').concat(oa.width,'" height="').concat(oa.height,'" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-5 7.723v2.277h-2v-2.277c-.595-.347-1-.984-1-1.723 0-1.104.896-2 2-2s2 .896 2 2c0 .738-.404 1.376-1 1.723zm-5-7.723v-4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v4h-8z"/></svg>\n</div>\n'),ca=function(t){return"Best Time: ".concat(t?t.toFixed(2)+"s":"n/a")};const aa=function(t){var e=t.onStart,n=t.uiRoot,r=t.storage,o=t.level,i=t.maxLevel,c=t.images,a=t.assetsCache,s=t.contSound,u=t.chSound,l=t.errSound,f=o,h=!1;n.content=function(t,e,n){return"\n        ".concat(mn(Jc,t.arrow,Wc.prevBtn),"\n        ").concat(ia,'\n        <div class="').concat(Wc.infoTitle,'" id="').concat(Kc,'">').concat("Level "+e,'</div> \n        <div class="').concat(Wc.infoTitle," ").concat(Wc.infoSub,'" id="').concat(ea,'">').concat(ca(n),"</div>\n        ").concat(mn(Gc,t.arrow),"\n        ").concat(pe(Qc,"START"),"\n    ")}(c,o,r.getHiscore(f));var p=n.get("#".concat(Jc)),y=n.get("#".concat(Gc)),d=n.get("#".concat(Qc)),b=n.get("#".concat(Kc)),v=n.get("#".concat($c)),m=n.get("#".concat(ea)),g=function(t){var e=b.domNode.getBoundingClientRect(),n=e.width,r=e.height,o=m.domNode.getBoundingClientRect(),i=o.width,c=o.height;b.width=n,b.height=r,m.width=i,m.height=c,b.pos=(0,I.qj)(t,b,"center","center",0,-10),m.pos=(0,I.EJ)(b,m,"bottom",0,8),v.pos=(0,I.EJ)(m,oa,"bottom",0,20)},w=function(t){g(t),p.pos=(0,I.qj)(t,p,"left","center",ra),y.pos=(0,I.qj)(t,y,"right","center",-ra),d.pos=(0,I.EJ)(m,d,"bottom",0,64)},O=function(t,e){v.domNode.style.opacity=t<=e||t>Zt.length?0:1,d.domNode.style.opacity=t<=e?1:0},A=function(){if(!h){if(1===f)return l.play();f=Math.max(f-1,1);var t=r.getHiscore(f);m.content=ca(t),b.content="Level ".concat(f),O(f,i),g(E.Z.viewport),u.play()}},j=function(){if(!h){if(f>Zt.length)return l.play();f=Math.min(f+1,Zt.length+1);var t=r.getHiscore(f);b.content=f<=Zt.length?"Level ".concat(f):"Coming Soon",m.content=f<=Zt.length?ca(t):"more coming soon",O(f,i),g(E.Z.viewport),u.play()}},x=function t(){h=!0,n.clear();var r=Zt[f-1].id;if(!a.get(r)){n.content='\n        <div id="'.concat(ta,'" style="width: 44px; height:  12px;" >\n            <div class="').concat(he.loadingDot," ").concat(he.dotA,'"></div>\n            <div class="').concat(he.loadingDot," ").concat(he.dotB,'"></div>\n            <div class="').concat(he.loadingDot," ").concat(he.dotC,'"></div>\n        </div>\n    ');var o=n.get("#".concat(ta)),i=function(){e(f),a.off("error")};return o.pos=(0,I.qj)(E.Z.viewport,o,"center","center"),Zt.forEach((function(t){a.unload(t.id)})),a.load([r]),a.once("load",i),void a.once("error",(function(){a.off("load",i),n.content='\n<div id="'.concat("err",'" class="').concat(Wc.error," ").concat(Wc.hidden,'">\n    ').concat("Connection Problem",'\n</div>\n<div id="').concat("retry",'" class="').concat(Wc.retry," ").concat(Wc.hidden,'">\n    RETRY\n</div>\n');var e=n.get("#".concat("err")),r=n.get("#".concat(na));e.pos=(0,I.qj)(E.Z.viewport,e,"center","center"),r.pos=(0,I.EJ)(e,r,"bottom",0,10),r.show(),e.show(),r.on("click",t)}))}e(f)},P=function(){if(!h){if(f>i)return l.play();E.Z.viewport.off("change",w),s.play(),x()}},S=function(t){var e=t.which||t.keyCode;if(e)switch(e){case 37:case 65:A();break;case 39:case 68:j();break;case 32:case 13:P()}else switch(t.key){case"Left":case"ArrowLeft":case"A":case"a":A();break;case"Right":case"ArrowRight":case"D":case"d":j();break;case" ":case"Enter":P()}};return!1===E.Z.isMobile&&document.addEventListener("keydown",S),p.on("click",A),y.on("click",j),d.on("click",P),E.Z.viewport.on("change",w),w(E.Z.viewport),function(){!1===E.Z.isMobile&&document.removeEventListener("keydown",S),p.off("click",A),y.off("click",j),d.off("click",P)}};function sa(t){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function la(t,e){return(la=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fa(t,e){return!e||"object"!==sa(e)&&"function"!=typeof e?ha(t):e}function ha(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pa(t){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ya(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const da=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&la(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pa(r);if(o){var n=pa(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return fa(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.storage;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ya(ha(e=i.call(this)),"background","#000000"),ya(ha(e),"curLevel",0),e.game=n,e.storage=o,e.uiRoot=r,n.assetsCache.once("load",(function(){var t=n.assetsCache,r=new qe({resource:t.get(bc()),resourceId:bc(),meta:t.get(mc())});e.contSound=r.createPool("continue"),e.chSound=r.createPool("change"),e.errSound=r.createPool("error")})),e}return e=c,(n=[{key:"onEnter",value:function(t,e){var n=this,r=this.game,o=this.storage,i=this.uiRoot,c=this.contSound,a=this.chSound,s=this.errSound;t?(this.contSound.play(),this.curLevel=o.getCurLevel()):e&&(this.curLevel=Math.min(this.curLevel+1,Zt.length)),this.teardownUI=aa({onStart:function(t){r.switchScreen(Ut,t),n.curLevel=t},uiRoot:i,images:{arrow:r.assetsCache.get(Ki()),resume:r.assetsCache.get(tc())},assetsCache:r.assetsCache,storage:o,level:this.curLevel,maxLevel:o.getCurLevel(),contSound:c,chSound:a,errSound:s})}},{key:"onExit",value:function(){this.teardownUI()}}])&&ua(e.prototype,n),c}(t.Z);var ba,va=n(126),ma=n.n(va),ga=n(343),wa=n.n(ga);function Oa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Aa=function(t){var e;try{e=new J(t)}catch(n){console.log("Webgl 2 not supported.. resorting to Canvas2D"),e=new Y(t)}return e}({cnvQry:"#arena",scene:null,background:"#000000",viewport:E.Z.viewport}),ja=new st,xa=new bt(new E.Z.StorageStrat(E.Z.storageId)),Pa=C.query("#ui-layer"),Sa=xa.getCurLevel(),ka=[{url:Ai(),msg:"loading particles"},xc(),Cc(),Ac(),Sc(),tc(),Rc(),Ic(),Tc(),{url:Zt[Sa-1].id,msg:"loading level data"},{url:Ki(),msg:"loading ui assets"},{url:bc(),msg:"loading audio sprite"},{url:mc(),msg:"loading audio sprite metadata"},{url:ma(),msg:"loading images"},{url:wa(),msg:"loading texture atlas"}];E.Z.isMobile||ka.push(wc());var Ca=new gt(!!E.Z.SDKStrat&&new E.Z.SDKStrat),_a=(Oa(ba={},Yt,(function(t){return new re({game:t,uiRoot:Pa,assets:ka,sdk:Ca})})),Oa(ba,Nt,(function(t){return new je({game:t,uiRoot:Pa,sdk:Ca})})),Oa(ba,Ut,(function(t){return new Fc({game:t,uiRoot:Pa,storage:xa,sdk:Ca})})),Oa(ba,Lt,(function(t){return new da({game:t,uiRoot:Pa,storage:xa})})),ba),Ra=new x({renderer:Aa,assetsCache:ja,storage:xa,screenFactories:_a});Ca.setOnPause((function(){return Ra.pause()})),Ca.setOnResume((function(){return Ra.resume()})),xa.getSound()||Ra.turnOffSound(),ja.once("prog-end",(function(){var t=ja.get(wa()),e=ja.get(ma());Aa.setTexatlas(e,t),ut.Z.injectAtlasmeta(t)})),Ra.switchScreen(Yt),Ra.start()})()})();
//# sourceMappingURL=script.js.map